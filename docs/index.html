<!DOCTYPE html>
<!-- CHANGELOG: v3.5.2
  - Preserve custom avatar across login, refresh, logout/login cycles by merging auth on login and restoring from localStorage.
  - Added caching of avatar_custom keyed by gov_id when saving avatar.
  - Bootstrap now restores custom avatar from cache if server does not provide one.
  - Updated About modal to show version v3.5.2 explicitly.
  - Updated header logo to use data/images/logo.jpg (TrÆ°á»ng Tiá»ƒu Há»c VÃµng La).
  - Other modules and logic remain unchanged.
-->

<html lang="vi">
<head>
<!-- v2.5.6: Lá»›p 3 â€“ thÃªm BÃ i 3 (MÃ¡y tÃ­nh vÃ  em) + chÃ¨n hÃ¬nh minh há»a (BÃ i 3 C6, C8, C15; BÃ i 2 C15); no other modules touched. -->
<!-- v2.5.3: Vietnamese-only TTS override appended. Modules unchanged. -->
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Gáº¥u Con Há»c Tin Há»c</title>
<link href="data/images/logo.jpg" rel="shortcut icon" type="image/jpeg"/>
<!-- Táº£i Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- ThÃªm thÆ° viá»‡n Ã¢m thanh Tone.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js"></script>
<!-- ThÃªm font Inter -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<style>
        /* CSS tÃ¹y chá»‰nh */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* TÃ¹y chá»‰nh thanh cuá»™n */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #a0aec0; }

        /* --- Hiá»‡u á»©ng chung --- */
        .btn-hover {
            transition: all 0.2s ease-in-out;
        }
        .btn-hover:hover {
            transform: scale(1.03); /* PhÃ³ng to nháº¹ */
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.15); /* Äá»• bÃ³ng */
        }
        .btn-hover:active {
            transform: scale(0.98); /* Thu nhá» khi nháº¥n */
        }

        /* --- CSS cho nÃºt chá»n lá»›p --- */
        .grade-btn {
            background-color: white;
            color: #374151; /* text-gray-700 */
            border: 2px solid white;
            font-weight: 700; /* bold */
            font-size: 1.25rem; /* text-xl */
            border-radius: 1.5rem; /* rounded-3xl */
            padding: 1.25rem; /* p-5 */
            text-align: center;
        }
        .grade-btn.active-grade {
            /* NÃºt Ä‘Æ°á»£c chá»n */
            background-color: #3B82F6; /* bg-blue-600 */
            color: white;
            border-color: #60A5FA; /* border-blue-400 */
            box-shadow: 0 8px 15px -3px rgba(59, 130, 246, 0.4);
        }
        
        /* --- CSS cho nÃºt menu chÃ­nh --- */
        .menu-btn {
            color: white;
            font-weight: 700; /* bold */
            font-size: 1.125rem; /* text-lg */
            border-radius: 1.5rem; /* rounded-3xl */
            padding: 1.5rem; /* p-6 */
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            line-height: 1.4;
        }
        .menu-btn svg, .menu-btn .icon-emoji {
            width: 2.5rem; /* w-10 */
            height: 2.5rem; /* h-10 */
            margin-bottom: 0.75rem; /* mb-3 */
            font-size: 2.5rem; /* Cá»¡ cho emoji */
            line-height: 1;
        }
        
        /* CSS cho Game Äua Xe */
        #race-track {
            background-image: repeating-linear-gradient(
                -45deg,
                #f3f4f6,
                #f3f4f6 10px,
                #e5e7eb 10px,
                #e5e7eb 20px
            );
            border-bottom: 5px dashed #9ca3af;
            position: relative;
        }
        .racer {
            font-size: 3rem; /* 48px */
            transition: transform 0.5s ease-in-out;
            position: absolute;
            bottom: 0;
            left: 0;
        }
        .finish-line {
            font-size: 3rem;
            position: absolute;
            right: 10px;
            bottom: -10px;
        }

        /* TÃ¹y chá»‰nh cho khung video */
        .aspect-video {
            aspect-ratio: 16 / 9;
        }
        
        /* (Má»šI) Hiá»‡u á»©ng Láº¯c cho tháº» quiz */
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-10px); } 50% { transform: translateX(10px); } 75% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
        .shake { animation: shake 0.5s ease-in-out; }
    
        /* (Má»šI V2.4) CSS cho Timer */
        .timer-btn { background-color: white; border: 2px solid #3B82F6; color: #3B82F6; }
        .timer-btn.active-timer { background-color: #3B82F6; color: white; }
        @keyframes flash-red { 50% { background-color: #ef4444; color: white; } }
        .flash-warning { animation: flash-red 1s infinite; }

    
/* === Home tiles balance & sizing (v2.5.1 UI tune) === */
:root {
  --home-tile-h: clamp(140px, 19vw, 200px);
  --home-grade-h: clamp(80px, 10vw, 110px);
}
#page-home .menu-btn {
  min-height: var(--home-tile-h);
}
#page-home .grade-btn {
  min-height: var(--home-grade-h);
}
#page-home .menu-btn .icon-emoji,
#page-home .menu-btn svg {
  font-size: clamp(32px, 5vw, 48px);
  width: auto;
  height: auto;
}
/* Ensure equal spacing & full width */
#page-home .flex.flex-col.space-y-6 > .menu-btn,
#page-home .flex.flex-col.space-y-5 > .grade-btn {
  width: 100%;
}
/* Slightly larger title on desktop */
@media (min-width: 1024px){
  #page-home h1 { font-size: 3.25rem; line-height: 1.1; }
}

/* === v2.5.3: Tick + Glow for True/False === */
@keyframes tickPop { 0% {opacity:0; transform: translate(-50%,-50%) scale(0.6);} 30% {opacity:1; transform: translate(-50%,-50%) scale(1);} 100% {opacity:0; transform: translate(-50%,-50%) scale(1.1);} }.click-tick {
  position: absolute; width: 36px; height: 36px; border-radius: 9999px;
  background: #22c55e; color: #fff; display: flex; align-items: center; justify-content: center;
  border: 2px solid #fff;
  box-shadow: 0 10px 26px rgba(34,197,94,.45); pointer-events: none;
  transform: translate(-50%,-50%) scale(0.9); opacity: 0; animation: tickPop 1400ms ease-out forwards;
  font-weight: 900; font-size: 18px; line-height: 1;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
}
@keyframes rowGlow { 
  0% { box-shadow: 0 0 0 0 rgba(34,197,94,.7); background-color: #ecfdf5; } 
  100% { box-shadow: 0 0 22px 8px rgba(34,197,94,0); background-color: #ffffff; } 
}.row-glow { animation: rowGlow 900ms ease-out 1; }

/* v2.5.3b: persistent highlight for a chosen row */
.row-selected { background-color: #ecfdf5 !important; }

/* v2.5.3c: persistent tick */
@keyframes tickPopIn { 0% {opacity:0; transform: translate(-50%,-50%) scale(0.6);} 70% {opacity:1; transform: translate(-50%,-50%) scale(1.05);} 100% {opacity:1; transform: translate(-50%,-50%) scale(1);} }
.click-tick-fixed {
  position: absolute; width: 28px; height: 28px; border-radius: 9999px;
  background: #22c55e; color: #fff; display: flex; align-items: center; justify-content: center;
  border: 2px solid #fff; box-shadow: 0 8px 20px rgba(34,197,94,.35); pointer-events: none;
  transform: translate(-50%,-50%); opacity: 1; animation: tickPopIn 260ms ease-out forwards;
  font-weight: 900; font-size: 16px; line-height: 1;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, 'Helvetica Neue', Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
}

/* === v2.5.4: Matching links visuals (animated) === */
@keyframes drawLine { to { stroke-dashoffset: 0; } }
.match-line { stroke:#7c3aed; stroke-width:4; stroke-linecap:round; filter: drop-shadow(0 2px 6px rgba(124,58,237,.35)); }
.match-line-new { stroke-dasharray: 400; stroke-dashoffset: 400; animation: drawLine .6s ease-out forwards; }
.match-dot { fill:#7c3aed; stroke:#fff; stroke-width:2; }
</style>
<!-- Kids-friendly font for chatbot -->
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&amp;display=swap" rel="stylesheet"/>
<style>
      /* === Chatbot UI (v2.7 kids) === */
      .kids-font { font-family: 'Baloo 2', system-ui, -apple-system, 'Segoe UI', Roboto, Inter, sans-serif; }
      #gau-chat-toggle { position: fixed; right: 18px; bottom: 18px; z-index: 60; }
      #gau-chat-panel {
        position: fixed; left: 50%; transform: translateX(-50%);
        bottom: 90px; width: min(860px, 92vw); max-height: min(68vh, 620px);
        background: white; border-radius: 24px; box-shadow: 0 20px 60px rgba(20, 60, 120, .18);
        border: 1px solid rgba(2, 6, 23, .06);
        display: none; overflow: clip; z-index: 60;
      }
      #gau-chat-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px;
        background: linear-gradient(90deg, #e0f2fe, #fde68a); border-bottom: 1px solid rgba(2,6,23,.06); }
      #gau-chat-title { display: flex; align-items: center; gap: 10px; font-weight: 800; color: #1d4ed8; }
      #gau-chat-stream { padding: 16px; height: clamp(240px, 48vh, 520px); overflow: auto; background: #f8fafc; }
      .gau-msg { display: flex; gap: 10px; margin: 10px 0; }
      .gau-msg.me { justify-content: flex-end; }
      .gau-bubble {
        max-width: 78%; padding: 10px 14px; border-radius: 18px; font-size: 15px; line-height: 1.5;
        box-shadow: 0 6px 18px rgba(2, 6, 23, .06);
      }
      .gau-msg .me-bubble { background: #3b82f6; color: white; border-bottom-right-radius: 6px; }
      .gau-msg .ai-bubble { background: white; color: #0f172a; border-bottom-left-radius: 6px; border: 1px solid rgba(2,6,23,.06); }
      #gau-chat-inputbar { display: flex; gap: 10px; padding: 12px; border-top: 1px solid rgba(2,6,23,.06); background: white; }
      #gau-input { flex: 1; border: 1px solid #e5e7eb; border-radius: 999px; padding: 12px 16px; outline: none; font-size: 16px; }
      #gau-send { background: #facc15; border: none; border-radius: 999px; padding: 10px 14px; font-weight: 800; color: #0f172a; }
      #gau-send:hover { filter: brightness(0.98); transform: translateY(-1px); }
      #gau-chat-close { border: 0; background: transparent; font-size: 20px; opacity:.7; }
      .gau-meta { font-size: 12px; opacity: .7; margin-top: 6px; }
      .gau-tip { font-size: 12px; color: #475569; }
      .gau-select { border: 1px solid #cbd5e1; background: white; border-radius: 10px; padding: 6px 8px; }
      .typing { opacity: .8; }
    

/* === Chatbot FAB (new) === */
#gau-chat-toggle{ position:fixed; right:18px; bottom:18px; z-index:60; border:none; background:transparent; padding:0; }
.gau-fab{ display:flex; align-items:center; gap:10px; padding:8px 12px 8px 8px; background:#0ea5e9; color:#fff; border-radius:999px; box-shadow:0 10px 24px rgba(2,6,23,.18); }
.gau-fab-icon{ width:48px; height:48px; border-radius:50%; background:#0284c7; display:grid; place-items:center; overflow:hidden; }
.gau-fab-icon svg{ width:30px; height:30px; }
.gau-fab-text{ font-weight:800; font-size:14px; padding-right:2px; white-space:nowrap; }
/* rung láº¯c nháº¹ Ä‘á»‹nh ká»³ Ä‘á»ƒ dá»… chÃº Ã½ */
@keyframes gau-wiggle{ 0%,100%{ transform:rotate(0) } 15%{ transform:rotate(-8deg) } 30%{ transform:rotate(5deg) } 45%{ transform:rotate(-4deg) } 60%{ transform:rotate(2deg) } }
#gau-chat-toggle .gau-fab{ animation: gau-wiggle 1.3s ease-in-out 3s 2; } /* láº¯c 2 láº§n sau 3s */
#gau-chat-toggle:focus-visible .gau-fab{ outline:3px solid #38bdf8; outline-offset:2px }
/* thu gá»n trÃªn mÃ n nhá» náº¿u cháº­t */
@media (max-width:520px){
  .gau-fab-text{ display:none }
  .gau-fab{ padding:8px }
}

</style>
<style>
/* Auto-injected: brighten & saturate the bear image */
.bear-image-bright {
  filter: brightness(1.18) saturate(1.22) contrast(1.05);
  transition: filter 200ms ease-in-out;
}
.bear-image-bright:hover {
  filter: brightness(1.22) saturate(1.28) contrast(1.05);
}
</style><style>
/* --- Chatbot badge attention effect (minimal, isolated) --- */
.chatbot-attention{
  filter: drop-shadow(0 0 4px rgba(0, 170, 255, 0.55));
  animation: chatbot-glow 2.2s ease-in-out infinite alternate, chatbot-wobble 4.5s ease-in-out infinite;
  will-change: transform, filter;
}
@keyframes chatbot-glow{
  from{ filter: drop-shadow(0 0 2px rgba(0, 170, 255, 0.25)); transform: translateZ(0); }
  to{   filter: drop-shadow(0 0 8px rgba(0, 170, 255, 0.85)); }
}
@keyframes chatbot-wobble{
  0%, 100%{ transform: rotate(0deg) translateY(0); }
  20%{ transform: rotate(-1.5deg) translateY(-1px); }
  40%{ transform: rotate(1.5deg) translateY(1px); }
  60%{ transform: rotate(-1deg) translateY(0); }
  80%{ transform: rotate(1deg) translateY(-1px); }
}
</style></head>
<body class="bg-gradient-to-b from-sky-200 to-amber-200 min-h-screen p-4 md:p-8 text-gray-800 overflow-x-hidden">
<!-- TrÃ¬nh phÃ¡t Ã¢m thanh áº©n cho TTS -->
<audio id="tts-audio" style="display: none;"></audio>
<!-- ======================================================= -->
<!-- ==== TRANG CHá»¦ (MODULE CHá»ŒN Lá»šP & CHá»¨C NÄ‚NG) ==== -->
<!-- ======================================================= -->
<div class="page-container" id="page-home">
<!-- 1. Header (Logo vÃ  TiÃªu Ä‘á») -->
<header class="flex flex-col items-center justify-center mb-10">
<!-- (Má»šI) Brand Header (TrÆ°á»ng TH VÃµng La) -->
<div class="flex items-center gap-3 mb-4">
<!-- Updated: use the correct logo for TrÆ°á»ng Tiá»ƒu Há»c VÃµng La -->
<!-- Updated: correct the logo path to the official school logo; this was previously pointing to chatbot.png. -->
<!-- Fixed: correct logo path (logo.jpg) and removed chatbot-attention class to match v3.4 header -->
<img alt="Logo TrÆ°á»ng TH VÃµng La" class="w-16 h-16 rounded-full border-2 border-white shadow-md" src="data/images/logo.jpg"/>
<span class="text-3xl font-extrabold text-blue-800">TrÆ°á»ng Tiá»ƒu Há»c VÃµng La</span>
</div>
<!-- SVG Logo -->
<svg class="w-24 h-24" fill="none" viewbox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
<circle cx="50" cy="50" fill="#FDE047" r="45"></circle>
<defs><clippath id="circle-clip"><circle cx="50" cy="50" r="45"></circle></clippath></defs>
<path clip-path="url(#circle-clip)" d="M28 80 Q 50 70, 72 80 V 95 H 28 Z" fill="#3B82F6"></path>
<circle cx="28" cy="28" fill="#C27803" r="12"></circle><circle cx="72" cy="28" fill="#C27803" r="12"></circle>
<circle cx="50" cy="55" fill="#C27803" r="28"></circle>
<circle cx="30" cy="30" fill="#FCD34D" r="7"></circle><circle cx="70" cy="30" fill="#FCD34D" r="7"></circle>
<circle cx="42" cy="52" fill="#1F2937" r="3"></circle><circle cx="58" cy="52" fill="#1F2937" r="3"></circle>
<ellipse cx="36" cy="62" fill="#F472B6" fill-opacity="0.6" rx="5" ry="3"></ellipse><ellipse cx="64" cy="62" fill="#F472B6" fill-opacity="0.6" rx="5" ry="3"></ellipse>
<path d="M48 62 L 52 62 L 50 65 Z" fill="#1F2937"></path>
<path d="M44 70 Q 50 74, 56 70" fill="none" stroke="#1F2937" stroke-linecap="round" stroke-width="2"></path>
</svg>
<h1 class="text-3xl md:text-5xl font-extrabold text-blue-700 mt-4 text-center">Gáº¥u Con Há»c Tin</h1>
<p class="text-xl md:text-2xl text-blue-600 font-medium text-center">Trá»£ lÃ½ há»c táº­p thÃ´ng minh</p>
<p class="text-base md:text-lg text-gray-600 mt-1 text-center">CÃ¹ng em khÃ¡m phÃ¡ tháº¿ giá»›i Tin há»c lá»›p 3-4-5</p>
<!-- Auth Entry Button (added v2.7.3) -->
<div class="flex justify-center mt-3 mb-1" id="auth-entry-wrap">
<button class="px-5 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-white font-bold shadow btn-hover flex items-center gap-2" id="auth-open-btn">
<span>ğŸ”’</span><span>ÄÄƒng Nháº­p/ÄÄƒng KÃ½</span>
</button>
</div>
<!-- Account area (visible when logged in) -->
<div class="hidden mt-3 flex justify-center" id="account-area">
<div class="flex items-center gap-3 bg-white/90 backdrop-blur rounded-full shadow px-3 py-2 border border-gray-200">
<img alt="avatar" class="w-8 h-8 rounded-full ring-2 ring-blue-100 bear-image-bright" id="acc-avatar" src="data/images/logo-bear-64.png"/>
<div class="leading-tight">
<div class="font-bold text-gray-800 text-sm" id="acc-name">Há»c sinh</div>
<div class="text-xs text-gray-600" id="acc-meta">Khá»‘i â€¢ Lá»›p</div>
</div>
<button class="text-xs ml-1 px-3 py-1 rounded-full bg-indigo-600 text-white hover:bg-indigo-700 focus:outline-none" id="acc-settings">CÃ i Ä‘áº·t</button>
<button class="text-xs px-3 py-1 rounded-full bg-gray-200 hover:bg-gray-300 focus:outline-none" id="acc-logout">ÄÄƒng xuáº¥t</button>
</div>
</div>
</header>
<!-- 2. Main Content Grid -->
<main class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-7xl mx-auto">
<!-- Cá»™t 1: Chá»n Lá»›p -->
<div class="flex flex-col space-y-5">
<button class="grade-btn btn-hover active-grade" data-grade="Lá»›p 3">Lá»šP 3</button>
<button class="grade-btn btn-hover" data-grade="Lá»›p 4">Lá»šP 4</button>
<button class="grade-btn btn-hover" data-grade="Lá»›p 5">Lá»šP 5</button>
</div>
<!-- MODULES LAYOUT START -->
<!-- Modules grid: 2 rows Ã— 3 columns. This container spans the remaining columns on medium+ screens -->
<div class="md:col-span-2">
  <div class="modules-grid">
    <!-- Video há»c -->
    <button class="menu-btn btn-hover bg-red-400 hover:bg-red-500 shadow-lg shadow-red-200 module-card" onclick="showPage('page-video')">
      <span class="icon-emoji">ğŸ¥</span>
      <span>Video há»c</span>
    </button>
    <!-- Phiáº¿u bÃ i táº­p -->
    <button class="menu-btn btn-hover bg-yellow-500 hover:bg-yellow-600 shadow-lg shadow-yellow-200 module-card" onclick="showPage('page-quiz')">
      <!-- Changed icon from brain to a sheet of paper with a pen for better thematic match -->
      <span class="icon-emoji">ğŸ“</span>
      <span>Phiáº¿u bÃ i táº­p</span>
    </button>
    <!-- Báº£ng xáº¿p háº¡ng -->
    <button class="menu-btn btn-hover bg-amber-400 hover:bg-amber-500 shadow-lg shadow-amber-300 rounded-2xl flex flex-col items-center justify-center gap-2 py-6 module-card" id="p2-scoreboard-card" onclick="p2ShowLeaderboard()" type="button">
      <span class="text-5xl leading-none">ğŸ†</span>
      <span class="text-xl font-extrabold">Báº£ng Xáº¿p Háº¡ng</span>
    </button>
    <!-- TrÃ² chÆ¡i mini -->
    <button class="menu-btn btn-hover bg-green-500 hover:bg-green-600 shadow-lg shadow-green-200 module-card" onclick="showPage('page-game')">
      <span class="icon-emoji">ğŸ¯</span>
      <span>TrÃ² chÆ¡i mini</span>
    </button>
    <!-- Káº¿t quáº£ há»c táº­p -->
    <button class="menu-btn btn-hover bg-purple-500 hover:bg-purple-600 shadow-lg shadow-purple-200 module-card" onclick="showPage('page-results')">
      <span class="icon-emoji">ğŸ“ˆ</span>
      <span>Káº¿t quáº£ há»c táº­p</span>
    </button>
    <!-- Giá»›i thiá»‡u -->
    <button class="menu-btn btn-hover bg-teal-400 hover:bg-teal-500 shadow-lg shadow-teal-200 module-card" id="about-button" data-open-about>
      <span class="icon-emoji">â„¹ï¸</span>
      <span>Giá»›i thiá»‡u</span>
    </button>
  </div>
</div>
<!-- MODULES LAYOUT END -->
</main>
</div> <!-- Káº¿t thÃºc page-home -->
<!-- MODULES STYLE START -->
<style>
  /* Responsive grid for modules: 3 columns on large screens, 2 on medium, 1 on small */
  .modules-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }
  @media (max-width: 900px) {
    .modules-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  @media (max-width: 600px) {
    .modules-grid {
      grid-template-columns: repeat(1, 1fr);
    }
  }
  /* Module card flex alignment */
  .modules-grid .module-card {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: flex-start;
    width: 100%;
  }
  /* About modal base hidden state */
  #about-modal {
    display: none;
  }
  #about-modal.show {
    display: flex;
  }
  #about-modal .modal-content {
    background: #fff;
    border-radius: 1rem;
    padding: 1.5rem;
    max-width: 500px;
    width: 90%;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    position: relative;
  }
  #about-modal .modal-close {
    position: absolute;
    top: 0.5rem;
    right: 0.75rem;
    font-size: 1.5rem;
    line-height: 1;
    cursor: pointer;
  }
</style>
<!-- MODULES STYLE END -->
<!-- ======================================================= -->
<!-- ==== MODULE 1: VIDEO BÃ€I Há»ŒC (áº¨N) ==== -->
<!-- ======================================================= -->
<div class="page-container hidden max-w-6xl mx-auto" id="page-video">
<!-- Header cá»§a module -->
<header class="flex items-center mb-8">
<button class="back-btn btn-hover text-3xl md:text-5xl p-2 rounded-full hover:bg-black/10">ğŸ‘ˆ</button>
<h1 class="text-2xl md:text-4xl font-extrabold text-blue-700 ml-4" id="video-page-title">ğŸ“š Video BÃ i Há»c</h1>
</header>
<!-- LÆ°á»›i video -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="video-grid-container"></div>
</div> <!-- Káº¿t thÃºc page-video -->
<!-- ======================================================= -->
<!-- ==== MODULE 2: PHIáº¾U BÃ€I Táº¬P (áº¨N) ==== -->
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ==== MODULE 2: PHIáº¾U BÃ€I Táº¬P (V2.5.1 - áº¨N) ==== -->
<!-- ======================================================= -->
<div class="page-container hidden max-w-4xl mx-auto" id="page-quiz">
<!-- Header cá»§a module -->
<header class="flex items-center mb-8">
<button class="back-btn btn-hover text-3xl md:text-5xl p-2 rounded-full hover:bg-black/10">ğŸ‘ˆ</button>
<h1 class="text-2xl md:text-4xl font-extrabold text-blue-700 ml-4" id="quiz-page-title">ğŸ§  Phiáº¿u BÃ i Táº­p</h1>
</header>
<!-- (Má»šI V2.5.1) MÃ n hÃ¬nh chá»n bÃ i -->
<div class="space-y-4" id="quiz-lesson-selection">
<h2 class="text-2xl font-bold text-center text-blue-800 mb-6">Em hÃ£y chá»n bÃ i há»c:</h2>
<!-- Danh sÃ¡ch bÃ i táº­p sáº½ Ä‘Æ°á»£c JS chÃ¨n vÃ o Ä‘Ã¢y -->
</div>
<!-- (Má»šI V2.5.1) Tháº» lÃ m bÃ i (áº©n ban Ä‘áº§u) -->
<div class="bg-white/80 p-4 md:p-6 rounded-3xl shadow-xl backdrop-blur-sm relative hidden" id="quiz-card">
<!-- Popup Báº£ng Tá»•ng Káº¿t (Má»šI) -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="summary-popup">
<div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full text-center transform scale-100 transition-transform duration-300">
<h2 class="text-3xl font-extrabold text-blue-700 mb-4">Báº£ng Tá»•ng Káº¿t</h2>
<p class="text-xl font-medium p-4 rounded-xl bg-blue-100 text-blue-800 whitespace-pre-line mb-6" id="summary-popup-content"></p>
<button class="btn-hover w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg" id="summary-popup-close" onclick="document.getElementById('summary-popup').classList.add('hidden'); updatePageContent('page-quiz');">ÄÃ“NG</button>
</div>
</div>
<!-- Header cá»§a Tháº» BÃ i -->
<div class="mb-4">
<div class="text-gray-500 font-medium text-sm" id="quiz-topic">BÃ i 1: ThÃ´ng tin vÃ  quyáº¿t Ä‘á»‹nh</div>
<div class="w-full bg-gray-200 rounded-full h-2.5 mt-1">
<div class="bg-blue-500 h-2.5 rounded-full" id="quiz-progress" style="width: 0%"></div>
</div>
<div class="text-blue-600 font-bold text-lg mt-1" id="quiz-level">Má»¨C 1: NHáº¬N BIáº¾T ğŸ¯</div>
</div>
<!-- (Má»šI V2.5.1) Äá»“ng há»“ báº¥m giá» (Stopwatch) -->
<div class="absolute top-4 left-4 text-xl font-bold text-gray-800 bg-white/70 px-4 py-2 rounded-xl shadow-md">
<span id="quiz-stopwatch">00:00</span>
</div>
<!-- NÃºt Loa (Giá»¯ nguyÃªn id) -->
<button class="btn-hover absolute top-4 right-4 text-3xl md:text-4xl p-2 rounded-full hover:bg-blue-200" id="speak-button">ğŸ”ˆ</button>
<!-- CÃ¢u há»i chÃ­nh (Giá»¯ nguyÃªn id) -->
<h2 class="text-2xl md:text-3xl font-bold text-gray-900 my-6 min-h-[4rem]" id="question-text">
                CÃ¢u há»i sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y
            </h2>
<!-- Khu vá»±c ÄÃ¡p Ã¡n (JS render) -->
<div class="min-h-[240px]" id="quiz-answer-area"></div>
<!-- Pháº£n há»“i -->
<div class="hidden mt-6 text-xl font-medium p-4 rounded-xl" id="feedback-message"></div>
<!-- NÃºt CÃ¢u tiáº¿p theo -->
<button class="hidden btn-hover mt-6 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg" id="next-question-btn">Tiáº¿p theo â”</button>
</div>
<!-- Hiá»‡u á»©ng PhÃ¡o hoa toÃ n mÃ n hÃ¬nh (áº©n) -->
<div class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm" id="correct-overlay">
<div class="text-white text-6xl font-bold text-center animate-bounce">
                TUYá»†T Vá»œI! ğŸ¥³
                <div class="text-4xl">ğŸ‰âœ¨ğŸ‰</div>
</div>
</div>
</div> <!-- Káº¿t thÃºc page-quiz -->
<!-- ======================================================= -->
<!-- ==== MODULE 3: TRÃ’ CHÆ I MINI (áº¨N) ==== -->
<!-- ======================================================= -->
<!-- ======================================================= -->
<!-- ==== MODULE 3: TRÃ’ CHÆ I MINI (ÄÃƒ NÃ‚NG Cáº¤P) ==== -->
<!-- ======================================================= -->
<div class="page-container hidden max-w-5xl mx-auto" id="page-game">
<!-- Header -->
<header class="flex items-center mb-6">
<button class="back-btn btn-hover text-3xl md:text-5xl p-2 rounded-full hover:bg-black/10">ğŸ‘ˆ</button>
<h1 class="text-2xl md:text-4xl font-extrabold text-blue-700 ml-4" id="game-page-title">ğŸ¯ Mini Game Ã”n Táº­p</h1>
</header>
<!-- Khá»‘i chá»n lá»›p + danh sÃ¡ch game -->
<div class="bg-white/80 p-6 md:p-8 rounded-3xl shadow-xl backdrop-blur-sm">
      <!-- BXH TrÃ² chÆ¡i mini -->
      <div id="mini-bxh" class="mb-6">
        <h3 class="text-xl font-bold mb-3">ğŸ† BXH TrÃ² chÆ¡i mini</h3>
        <div class="grid grid-cols-3 gap-4 mb-4">
          <div class="text-center">
            <div class="text-5xl">ğŸ¥‡</div>
            <div id="mini-top1-name" class="font-semibold mt-1">â€”</div>
            <div id="mini-top1-class" class="text-sm text-gray-500">â€”</div>
            <div id="mini-top1-points" class="text-blue-600 font-bold text-sm">0 Ä‘iá»ƒm</div>
          </div>
          <div class="text-center">
            <div class="text-5xl">ğŸ¥ˆ</div>
            <div id="mini-top2-name" class="font-semibold mt-1">â€”</div>
            <div id="mini-top2-class" class="text-sm text-gray-500">â€”</div>
            <div id="mini-top2-points" class="text-blue-600 font-bold text-sm">0 Ä‘iá»ƒm</div>
          </div>
          <div class="text-center">
            <div class="text-5xl">ğŸ¥‰</div>
            <div id="mini-top3-name" class="font-semibold mt-1">â€”</div>
            <div id="mini-top3-class" class="text-sm text-gray-500">â€”</div>
            <div id="mini-top3-points" class="text-blue-600 font-bold text-sm">0 Ä‘iá»ƒm</div>
          </div>
        </div>
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm text-gray-500 italic">Top ngÆ°á»i chÆ¡i Ä‘áº¡t Ä‘iá»ƒm cao trong cÃ¡c mini game.</span>
          <button id="mini-bxh-refresh" class="btn-hover px-3 py-1 rounded bg-blue-100 text-blue-700 hover:bg-blue-200">Táº£i láº¡i</button>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-left text-sm">
            <thead class="bg-blue-50 text-gray-700">
              <tr>
                <th class="px-2 py-1">#</th>
                <th class="px-2 py-1">TÃªn</th>
                <th class="px-2 py-1">Lá»›p</th>
                <th class="px-2 py-1">Äiá»ƒm</th>
              </tr>
            </thead>
            <tbody id="mini-bxh-body" class="divide-y divide-gray-200">
              <tr><td colspan="4" class="px-2 py-2 text-center text-gray-500">Äang táº£i dá»¯ liá»‡u...</td></tr>
            </tbody>
          </table>
        </div>
        <div id="mini-bxh-err" class="text-sm text-red-600 mt-2 hidden">â€”</div>
      </div>
<div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
<div>
<h3 class="text-xl font-bold">Chá»n mini game theo <span class="text-blue-700" id="game-grade-label">Lá»›p 3</span></h3>
<p class="text-sm text-gray-600">Báº¥m vÃ o tháº» Ä‘á»ƒ báº¯t Ä‘áº§u chÆ¡i â€“ tÃ­ch Ä‘iá»ƒm &amp; nháº­n sao.</p>
</div>
<div class="flex gap-2">
<button class="game-grade-btn btn-hover px-4 py-2 rounded-full border-2 border-blue-300 text-blue-700 bg-white" data-grade="Lá»›p 3">Lá»›p 3</button>
<button class="game-grade-btn btn-hover px-4 py-2 rounded-full border-2 border-blue-300 text-blue-700 bg-white" data-grade="Lá»›p 4">Lá»›p 4</button>
<button class="game-grade-btn btn-hover px-4 py-2 rounded-full border-2 border-blue-300 text-blue-700 bg-white" data-grade="Lá»›p 5">Lá»›p 5</button>
</div>
</div>
<!-- Danh sÃ¡ch game -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" id="game-list"></div>
<!-- Khu vá»±c chÆ¡i game (áº©n ban Ä‘áº§u) -->
<div class="hidden mt-6" id="game-play">
<div class="flex items-center justify-between mb-3">
<button class="btn-hover px-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 border" id="game-back-list">â† Danh sÃ¡ch</button>
<div class="flex items-center gap-4 text-sm">
<span>Äiá»ƒm: <b id="game-score">0</b></span>
<span>Máº¡ng: <b id="game-lives">3</b></span>
<span>Thá»i gian: <b id="game-timer">--</b></span>
</div>
</div>
<!-- ÄÆ°á»ng Ä‘ua (chá»‰ dÃ¹ng cho game kiá»ƒu Ä‘ua xe/flash) -->
<div class="mb-4 hidden" id="race-wrap">
<h3 class="text-base font-semibold text-center mb-2">Gáº¥u ğŸ» vs Thá» ğŸ°</h3>
<div class="w-full h-24 rounded-lg overflow-hidden relative mb-2" id="race-track">
<div class="racer" id="player-bear" style="transform: translateX(0px);">ğŸ»</div>
<div class="racer" id="player-rabbit" style="transform: translateX(0px);">ğŸ°</div>
<div class="finish-line">ğŸ</div>
</div>
</div>
<!-- CÃ¢u há»i -->
<h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4" id="game-question-text">CÃ¢u há»i</h2>
<!-- SÃ¢n chÆ¡i -->
<div class="min-h-[200px]" id="game-stage"></div>
<!-- Pháº£n há»“i -->
<div class="hidden mt-4 text-lg font-medium p-4 rounded-xl" id="game-feedback"></div>
<!-- NÃºt tiáº¿p theo -->
<button class="hidden btn-hover mt-4 w-full p-3 bg-blue-600 text-white rounded-xl font-bold" id="game-next">CÃ¢u tiáº¿p theo â”</button>
</div>
</div>
<!-- Popup Tá»•ng káº¿t -->
<div class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50" id="game-summary">
<div class="bg-white w-full max-w-md rounded-3xl p-8 shadow-2xl text-center">
<h3 class="text-2xl font-extrabold text-blue-700 mb-2">Tá»•ng káº¿t lÆ°á»£t chÆ¡i</h3>
<p class="text-lg text-gray-700 mb-4 whitespace-pre-line" id="game-summary-text"></p>
<button class="btn-hover w-full p-3 bg-blue-600 text-white rounded-xl font-bold" id="game-summary-close">ÄÃ³ng</button>
</div>
</div>
</div> <!-- Káº¿t thÃºc page-game -->
<!-- ======================================================= -->
<!-- ==== MODULE 4: Káº¾T QUáº¢ Há»ŒC Táº¬P (áº¨N) ==== -->
<!-- ======================================================= -->
<div class="page-container hidden max-w-4xl mx-auto" id="page-results">
<!-- Header cá»§a module -->
<header class="flex items-center mb-8">
<button class="back-btn btn-hover text-3xl md:text-5xl p-2 rounded-full hover:bg-black/10">ğŸ‘ˆ</button>
<h1 class="text-2xl md:text-4xl font-extrabold text-blue-700 ml-4" id="results-page-title">ğŸ“ˆ Káº¿t Quáº£ Há»c Táº­p</h1>
</header>
<!-- Káº¿t quáº£ há»c táº­p má»›i: Ä‘á»“ng bá»™ vá»›i báº£ng xáº¿p háº¡ng -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4" id="results-stats">
<!-- Äiá»ƒm hÃ´m nay (daily points) -->
<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Äiá»ƒm hÃ´m nay</div>
<div class="relative h-3 bg-yellow-100 rounded-full overflow-hidden">
<div class="absolute top-0 left-0 h-full bg-yellow-400 rounded-full" id="rs-progress-bar" style="width:0%"></div>
</div>
<div class="text-xs mt-1" id="rs-progress-text">0 / 0</div>
</div>
<!-- Tá»•ng Ä‘iá»ƒm cao nháº¥t (sum of best scores per quiz) -->
<div class="p-4 bg-green-50 border border-green-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Tá»•ng Ä‘iá»ƒm cao nháº¥t</div>
<div class="text-lg font-bold" id="rs-best-points">â€”</div>
<div class="text-xs text-gray-500">Tá»•ng Ä‘iá»ƒm tá»« cÃ¡c bÃ i cao nháº¥t</div>
</div>
<!-- BÃ i Ä‘Ã£ lÃ m -->
<div class="p-4 bg-blue-50 border border-blue-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">BÃ i Ä‘Ã£ lÃ m</div>
<div class="text-lg font-bold" id="rs-completed">0</div>
</div>
<!-- Tá»· lá»‡ Ä‘Ãºng -->
<div class="p-4 bg-purple-50 border border-purple-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Tá»· lá»‡ Ä‘Ãºng</div>
<div class="text-lg font-bold" id="rs-accuracy">0%</div>
</div>
</div>
</div> <!-- Káº¿t thÃºc page-results -->
<!-- ======================= JAVASCRIPT ======================= -->
<script>// === v2.5.7-stable runtime guards ===
(function(){
  function panic(e){
    try{
      console.error('[GAU PANIC]', e);
      window.__gauErrs = window.__gauErrs || [];
      window.__gauErrs.push(e && e.stack ? e.stack : (e && e.message ? e.message : String(e)));
      var box = document.getElementById('app-error');
      if (box){
        box.classList.remove('hidden');
        var msgEl = box.querySelector('.msg');
        if (msgEl) msgEl.textContent = (e && e.message) ? e.message : String(e);
      }
    }catch(_){}
  }
  window.__gauPanic = panic;
  window.addEventListener('error', function(ev){ panic(ev.error || ev.message || ev); });
  window.addEventListener('unhandledrejection', function(ev){ panic(ev.reason || ev); });
  window.safeCall = function(fn){
    try{
      return fn && fn.apply ? fn.apply(this, Array.prototype.slice.call(arguments,1)) : null;
    }catch(e){ panic(e); }
  };
})();


// ===============================
// V2.5.1 FIXED - QUIZ BÃ€I 1
// ===============================

// ====== Há»‡ thá»‘ng lÆ°u Ä‘iá»ƒm ======
let userScores = {
  "Lá»›p 3": { totalStars: 0, completedCount: 0, correctAnswers: 0, totalAnswers: 0 },
  "Lá»›p 4": { totalStars: 0, completedCount: 0, correctAnswers: 0, totalAnswers: 0 },
  "Lá»›p 5": { totalStars: 0, completedCount: 0, correctAnswers: 0, totalAnswers: 0 }
};
const SCORE_STORAGE_KEY = 'gauConHocTinScores_v2_5_1';
function saveScores(){ try{ localStorage.setItem(SCORE_STORAGE_KEY, JSON.stringify(userScores)); }catch(e){} }
function loadScores(){ try{ const s = localStorage.getItem(SCORE_STORAGE_KEY); if(s){ userScores = JSON.parse(s); } }catch(e){} }

// ====== Ã‚m thanh & TTS (cÃ³ guard Tone) ======
let audioInitialized=false;
let hoverSound=null, correctSound=null, incorrectSound=null;
try{
  if (window.Tone) {
    hoverSound = new Tone.Synth({ oscillator:{type:'sine'}, envelope:{attack:0.005,decay:0.1,sustain:0,release:0.1} }).toDestination();
    correctSound = new Tone.PolySynth(Tone.Synth, { oscillator:{type:'triangle'}, envelope:{attack:0.01,decay:0.2,sustain:0,release:0.2} }).toDestination();
    incorrectSound = new Tone.Synth({ oscillator:{type:'fmsquare'}, envelope:{attack:0.01,decay:0.3,sustain:0,release:0.1} }).toDestination();
  }
}catch(e){}
function playHover(){ if(audioInitialized&&hoverSound) hoverSound.triggerAttackRelease('G5','16n'); }
function playCorrect(){ if(audioInitialized&&correctSound) correctSound.triggerAttackRelease(['C4','E4','G4'],'8n'); }
function playIncorrect(){ if(audioInitialized&&incorrectSound) incorrectSound.triggerAttackRelease('F#2','4n'); }

const ttsAudio = document.getElementById('tts-audio');
function speakText(txt){
	  if(!audioInitialized || !ttsAudio) return;
	  const shortText = (txt||"").slice(0,200);
	  const url = 'https://translate.google.com/translate_tts?ie=UTF-8&q='+encodeURIComponent(shortText)+'&tl=vi&client=tw-ob';
	  ttsAudio.src = url;
	  ttsAudio.play().then(()=>{ 
	      // Sá»¬A Sá» 1500 thÃ nh 8000
	      setTimeout(()=>{ try{ttsAudio.pause(); ttsAudio.currentTime=0;}catch(e){} }, 8000); 
	  }).catch(()=>{});
	}
function initAudioOnce(){
  if(audioInitialized) return;
  loadScores();
  if (window.Tone && Tone.start) {
    Tone.start().then(()=>{ audioInitialized=true; }).catch(()=>{ audioInitialized=true; });
  } else { audioInitialized=true; }
  if(ttsAudio){ ttsAudio.play().catch(()=>{}); ttsAudio.pause(); ttsAudio.currentTime=0; }
}
document.body.addEventListener('click', initAudioOnce, {once:true});
document.body.addEventListener('touchstart', initAudioOnce, {once:true});

// ====== Logic Ä‘a trang ======
let currentGrade = 'Lá»›p 3';
const allPages = document.querySelectorAll('.page-container');
function showPage(pageId){
  allPages.forEach(p=>p.classList.add('hidden'));
  const t=document.getElementById(pageId); if(t){ t.classList.remove('hidden'); updatePageContent(pageId); }
}

const gradeButtons = document.querySelectorAll('.grade-btn');
gradeButtons.forEach(b=> b.addEventListener('click', ()=>{
  gradeButtons.forEach(x=>x.classList.remove('active-grade'));
  b.classList.add('active-grade'); currentGrade=b.dataset.grade; playHover();
}));

document.querySelectorAll('.btn-hover, .gau-submit-btn').forEach(b=> b.addEventListener('mouseenter', playHover));
document.querySelectorAll('.back-btn').forEach(b=> b.addEventListener('click', ()=>{ showPage('page-home'); speakText(''); clearInterval(lessonStopwatchInterval); }));

// ====== Video (giá»¯ nguyÃªn) ======
const LOCAL_VIDEO_MAX = 60;
const pad2 = n=>String(n).padStart(2,'0');
const gradeToFolder = g => (g==='Lá»›p 3'?'lop3':(g==='Lá»›p 4'?'lop4':(g==='Lá»›p 5'?'lop5':'lop3')));

// === Added: Video lesson titles by grade ===
const VIDEO_TITLES = {
  "Lá»›p 3": [
    "BÃ i 1. ThÃ´ng tin vÃ  quyáº¿t Ä‘á»‹nh",
    "BÃ i 2. Xá»­ lÃ­ thÃ´ng tin",
    "BÃ i 3. MÃ¡y tÃ­nh vÃ  em",
    "BÃ i 4. LÃ m viá»‡c vá»›i mÃ¡y tÃ­nh",
    "BÃ i 5. Sá»­ dá»¥ng bÃ n phÃ­m",
    "BÃ i 6. KhÃ¡m phÃ¡ thÃ´ng tin trÃªn Internet",
    "BÃ i 7. Sáº¯p xáº¿p Ä‘á»ƒ dá»… tÃ¬m",
    "BÃ i 8. SÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y, tá»• chá»©c thÃ´ng tin trong mÃ¡y tÃ­nh"
  ],
  "Lá»›p 4": [
    "BÃ i 1: Pháº§n cá»©ng vÃ  pháº§n má»m mÃ¡y tÃ­nh",
    "BÃ i 2: GÃµ bÃ n phÃ­m Ä‘Ãºng cÃ¡ch",
    "BÃ i 3: ThÃ´ng tin trÃªn trang web",
    "BÃ i 4: TÃ¬m kiáº¿m thÃ´ng tin trÃªn internet",
    "BÃ i 5: Thao tÃ¡c vá»›i tá»‡p vÃ  thÆ° má»¥c",
    "BÃ i 6: Sá»­ dá»¥ng pháº§n má»m khi Ä‘Æ°á»£c phÃ©p",
    "BÃ i 7: Táº¡o bÃ i trÃ¬nh chiáº¿u",
    "BÃ i 8: Äá»‹nh dáº¡ng vÄƒn báº£n trÃªn trang chiáº¿u"
  ],
  "Lá»›p 5": [
    "1. Em cÃ³ thá»ƒ lÃ m gÃ¬ vá»›i mÃ¡y tÃ­nh?",
    "2. TÃ¬m kiáº¿m thÃ´ng tin trÃªn website",
    "3. TÃ¬m kiáº¿m thÃ´ng tin trong giáº£i quyáº¿t váº¥n Ä‘á»",
    "4. CÃ¢y thÆ° má»¥c",
    "5. Báº£n quyá»n ná»™i dung thÃ´ng tin",
    "6. Äá»‹nh dáº¡ng kÃ­ tá»± vÃ  bá»‘ trÃ­ hÃ¬nh áº£nh trong vÄƒn báº£n",
    "7. Thá»±c hÃ nh soáº¡n tháº£o vÄƒn báº£n",
    "8A. LÃ m quen vá»›i pháº§n má»m Ä‘á»“ há»a"
  ]
};

function loadVideoContent(){
  const grid = document.getElementById('video-grid-container'); if(!grid) return;
  grid.innerHTML='';
  const folder = gradeToFolder(currentGrade);
  let any=false;
  for(let i=1;i<=LOCAL_VIDEO_MAX;i++){
    const src='data/'+folder+'/b'+pad2(i)+'.mp4';
    const card=document.createElement('div'); card.className='bg-white rounded-2xl shadow-lg overflow-hidden btn-hover';
    const wrap=document.createElement('div'); wrap.className='w-full aspect-video bg-black/5';
    const v=document.createElement('video'); v.className='w-full h-full object-cover local-video'; v.controls=true; v.preload='metadata'; v.playsInline=true; v.src=src;
    let didError=false; v.onerror=()=>{didError=true; card.remove();};
    setTimeout(()=>{
      if(!didError){
        wrap.appendChild(v);
        const body=document.createElement('div'); body.className='p-4';
        body.innerHTML = (function(){
  const list = (VIDEO_TITLES[currentGrade]||[]);
  const title = list[i-1] || ('BÃ i ' + i);
  return '<h3 class="font-bold text-lg text-gray-800">'+title+'</h3>' +
         '<p class="text-gray-600 text-sm">ThÆ° má»¥c: '+folder+'</p>';
})();
        card.appendChild(wrap); card.appendChild(body); grid.appendChild(card); any=true;
      }
    },100);
  }
  setTimeout(()=>{ if(!any){ grid.innerHTML='<p class="text-gray-600 text-lg col-span-full text-center">ChÆ°a tÃ¬m tháº¥y video trong <code>data/'+folder+'</code>.<br>Äáº·t file dáº¡ng <b>b01.mp4, b02.mp4...</b></p>'; } },1000);
}

// ====== Káº¿t quáº£ há»c táº­p ======
function renderResultsPage(){
  // Always load scores from localStorage to ensure latest data
  try { loadScores(); } catch(_e){}
  // Get current grade stats from userScores (fallback to zeros)
  var s = (window.userScores && window.userScores[currentGrade]) || { totalStars:0, completedCount:0, correctAnswers:0, totalAnswers:0 };
  var completed = s.completedCount || 0;
  var accPct    = (s.totalAnswers ? Math.round((s.correctAnswers / s.totalAnswers) * 100) : 0);
  // Update local stat cards
  var compEl = document.getElementById('rs-completed');
  if(compEl) compEl.textContent = completed;
  var accEl  = document.getElementById('rs-accuracy');
  if(accEl)  accEl.textContent  = accPct + '%';
  // Reset progress and best points before fetching
  var bar    = document.getElementById('rs-progress-bar');
  var barTxt = document.getElementById('rs-progress-text');
  var bestEl = document.getElementById('rs-best-points');
  if(bar)    bar.style.width = '0%';
  if(barTxt) barTxt.textContent = '0 / 0';
  if(bestEl) bestEl.textContent = 'â€”';
  // Fetch user info via whoami to obtain token, grade and gov_id
  var auth = null;
  try { auth = getAuth(); } catch(_e2){}
  var token = auth && auth.token;
  if(!token){ return; }
  // Call whoami via apiPost (returns gov_id and grade)
  apiPost('whoami', { token: token }).then(function(me){
    if(!me || !me.ok){ return; }
    var grade      = String(me.grade || '');
    var gov_id = String(me.gov_id || '');
    // Fetch daily leaderboard to get today's points
    apiPost('leaderboard', { token: token, scope:'daily', limit:50 }).then(function(dailyRes){
      var today = 0;
      try{
        var rows = (dailyRes && (dailyRes.rows || dailyRes.data || dailyRes.items)) || [];
        for(var i=0; i<rows.length; i++){
          var row = rows[i];
          if(String(row.gov_id) === gov_id){ today = Number(row.points || row.score_final || 0); break; }
        }
      }catch(_e3){}
      // Determine daily cap based on grade (defaults to grade 4)
      var capMap = { '3': 200, '4': 250, '5': 300 };
      var cap    = capMap[grade] || capMap['4'];
      var pct    = cap ? Math.min(100, Math.round((today / cap) * 100)) : 0;
      if(bar)    bar.style.width = pct + '%';
      if(barTxt) barTxt.textContent = today + ' / ' + cap;
      // Fetch all-time leaderboard to get total (sum of best scores per quiz)
      apiPost('leaderboard', { token: token, scope:'all', limit:50 }).then(function(allRes){
        var bestPoints = 0;
        try{
          var rows2 = (allRes && (allRes.rows || allRes.data || allRes.items)) || [];
          for(var j=0; j<rows2.length; j++){
            var r2 = rows2[j];
            if(String(r2.gov_id) === gov_id){ bestPoints = Number(r2.points || 0); break; }
          }
        }catch(_e4){}
        if(bestEl) bestEl.textContent = bestPoints;
      }).catch(function(){ /* ignore errors for all-time leaderboard */ });
    }).catch(function(){ /* ignore errors for daily leaderboard */ });
  }).catch(function(){ /* ignore errors for whoami */ });
}

// ====== QUIZ DATA (BÃ i 1: 15 cÃ¢u â€“ theo tÃ i liá»‡u) ======
const quizData = {
  "Lá»›p 3": {
    "BÃ i 1": {
      title: "BÃ i 1: ThÃ´ng tin vÃ  quyáº¿t Ä‘á»‹nh",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: ThÃ´ng tin lÃ  gÃ¬?', options:[
          {text:'Nhá»¯ng gÃ¬ em nghe, nhÃ¬n, Ä‘á»c Ä‘Æ°á»£c giÃºp em hiá»ƒu biáº¿t hÆ¡n', correct:true},
          {text:'Má»™t loáº¡i thá»©c Äƒn', correct:false},
          {text:'Má»™t trÃ² chÆ¡i', correct:false},
          {text:'Má»™t thiáº¿t bá»‹ mÃ¡y tÃ­nh', correct:false}
        ]},
        { level:1, type:'image-choice', question:'CÃ¢u 2: Thiáº¿t bá»‹ nÃ o dÆ°á»›i Ä‘Ã¢y giÃºp em nháº­n thÃ´ng tin?', options:[
          {text:'A. Chuá»™t mÃ¡y tÃ­nh', correct:false, image:'svg:mouse'},
          {text:'B. MÃ n hÃ¬nh', correct:true, image:'svg:monitor'},
          {text:'C. BÃ n phÃ­m', correct:false, image:'svg:keyboard'},
          {text:'D. MÃ¡y in', correct:false, image:'svg:printer'}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Em nháº­n Ä‘Æ°á»£c thÃ´ng tin báº±ng giÃ¡c quan nÃ o?', options:[
          {text:'Máº¯t, tai, mÅ©i, lÆ°á»¡i, da', correct:true},
          {text:'Tay vÃ  chÃ¢n', correct:false},
          {text:'Chá»‰ báº±ng máº¯t', correct:false},
          {text:'Báº±ng mÅ©i', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 4: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ Nghe cÃ´ giÃ¡o giáº£ng bÃ i lÃ  nháº­n thÃ´ng tin.', correct:true},
          {text:'2ï¸âƒ£ Em báº¥m nÃºt má»Ÿ mÃ¡y tÃ­nh lÃ  gá»­i thÃ´ng tin.', correct:true}
        ]},
        { level:1, type:'matching', question:'CÃ¢u 5: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng:', columnA:['1. Máº¯t','2. Tai','3. Tay'], columnB:['a. Nháº­n thÃ´ng tin báº±ng Ã¢m thanh','b. Nháº­n thÃ´ng tin báº±ng hÃ¬nh áº£nh','c. Nháº­n thÃ´ng tin báº±ng xÃºc giÃ¡c'], correctMatches:{'1. Máº¯t':'b. Nháº­n thÃ´ng tin báº±ng hÃ¬nh áº£nh','2. Tai':'a. Nháº­n thÃ´ng tin báº±ng Ã¢m thanh','3. Tay':'c. Nháº­n thÃ´ng tin báº±ng xÃºc giÃ¡c'} },
        { level:1, type:'image-question', question:'CÃ¢u 6: Khi tháº¥y Ä‘Ã¨n giao thÃ´ng mÃ u Ä‘á» em nÃªn:', image:'svg:traffic_red', options:[
          {text:'A. Äi qua Ä‘Æ°á»ng', correct:false},
          {text:'B. Dá»«ng láº¡i', correct:true},
          {text:'C. Cháº¡y nhanh hÆ¡n', correct:false},
          {text:'D. Bá» qua vÃ¬ khÃ´ng quan trá»ng', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n cÃ³ thÃ´ng tin?', options:[
          {text:'Äá»ƒ hiá»ƒu vÃ  ra quyáº¿t Ä‘á»‹nh Ä‘Ãºng', correct:true},
          {text:'Äá»ƒ vui chÆ¡i', correct:false},
          {text:'Äá»ƒ lÃ m máº¥t thá»i gian', correct:false},
          {text:'KhÃ´ng cáº§n thiáº¿t', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi chá»n quáº§n Ã¡o máº·c phÃ¹ há»£p vá»›i thá»i tiáº¿t, em Ä‘Ã£ sá»­ dá»¥ng thÃ´ng tin gÃ¬?', options:[
          {text:'ThÃ´ng tin thá»i tiáº¿t', correct:true},
          {text:'ThÃ´ng tin thá»ƒ thao', correct:false},
          {text:'ThÃ´ng tin trÃ² chÆ¡i', correct:false},
          {text:'ThÃ´ng tin Ã¢m nháº¡c', correct:false}
        ]},
        { level:2, type:'fill-in-blank', question:'CÃ¢u 9: Em dÃ¹ng máº¯t Ä‘á»ƒ â€¦â€¦â€¦ hÃ¬nh áº£nh, dÃ¹ng tai Ä‘á»ƒ â€¦â€¦â€¦ Ã¢m thanh.', sentence:'Em dÃ¹ng máº¯t Ä‘á»ƒ [BLANK] hÃ¬nh áº£nh, dÃ¹ng tai Ä‘á»ƒ [BLANK] Ã¢m thanh.', hints:['nháº­n','nghe'], correctAnswers:['nháº­n','nghe'] },
        { level:2, type:'matching', question:'CÃ¢u 10: Ná»‘i tÃ¬nh huá»‘ng á»Ÿ cá»™t A vá»›i quyáº¿t Ä‘á»‹nh á»Ÿ cá»™t B:', columnA:['1. Trá»i mÆ°a','2. Báº¡n bá»‹ á»‘m','3. Tháº¥y á»• Ä‘iá»‡n há»Ÿ'], columnB:['a. Mang Ã´ hoáº·c Ã¡o mÆ°a','b. ThÄƒm há»i vÃ  giÃºp báº¡n há»c bÃ i','c. BÃ¡o cho ngÆ°á»i lá»›n biáº¿t'], correctMatches:{'1. Trá»i mÆ°a':'a. Mang Ã´ hoáº·c Ã¡o mÆ°a','2. Báº¡n bá»‹ á»‘m':'b. ThÄƒm há»i vÃ  giÃºp báº¡n há»c bÃ i','3. Tháº¥y á»• Ä‘iá»‡n há»Ÿ':'c. BÃ¡o cho ngÆ°á»i lá»›n biáº¿t'} },
        { level:2, type:'multiple-choice', question:'CÃ¢u 11: Khi tháº¥y báº£ng â€œCáº¥m trÃ¨oâ€, em nÃªn lÃ m gÃ¬?', options:[
          {text:'Tiáº¿p tá»¥c trÃ¨o', correct:false},
          {text:'Dá»«ng láº¡i vÃ  tuÃ¢n theo', correct:true},
          {text:'Bá» qua', correct:false},
          {text:'Chá»¥p áº£nh', correct:false}
        ]},
        { level:2, type:'true-false', question:'CÃ¢u 12: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ Nháº­n thÃ´ng tin Ä‘Ãºng giÃºp ta quyáº¿t Ä‘á»‹nh Ä‘Ãºng.', correct:true},
          {text:'2ï¸âƒ£ KhÃ´ng cáº§n kiá»ƒm tra thÃ´ng tin trÆ°á»›c khi hÃ nh Ä‘á»™ng.', correct:false}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 13: Khi há»c trá»±c tuyáº¿n, em nghe cÃ´ giáº£ng vÃ  nhÃ¬n hÃ¬nh trÃªn mÃ n hÃ¬nh. ÄÃ³ lÃ :', options:[
          {text:'Em Ä‘ang nháº­n thÃ´ng tin báº±ng giÃ¡c quan', correct:true},
          {text:'Em Ä‘ang gá»­i thÃ´ng tin', correct:false},
          {text:'Em khÃ´ng nháº­n thÃ´ng tin', correct:false},
          {text:'Em Ä‘ang chÆ¡i trÃ² chÆ¡i', correct:false}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 14: Em tháº¥y trá»i nhiá»u mÃ¢y Ä‘en vÃ  nghe tiáº¿ng sáº¥m, em nÃªn lÃ m gÃ¬?', options:[{text:'Mang Ã´ Ä‘i há»c', correct:true},{text:'KhÃ´ng mang gÃ¬', correct:false},{text:'Ra ngoÃ i chÆ¡i dÆ°á»›i mÆ°a', correct:false},{text:'Bá» há»c', correct:false}] },
        { level:3, type:'matching-image', question:'CÃ¢u 15: Quan sÃ¡t hÃ¬nh vÃ  ná»‘i vá»›i quyáº¿t Ä‘á»‹nh phÃ¹ há»£p:', columnA:[{text:'ğŸŒ Trá»i náº¯ng', image:'svg:sun'},{text:'â˜” Trá»i mÆ°a', image:'svg:rain'},{text:'â„ï¸ Trá»i láº¡nh', image:'svg:cold'}], columnB:['a. Äá»™i mÅ©, máº·c Ã¡o chá»‘ng náº¯ng','b. Mang Ã´, máº·c Ã¡o mÆ°a','c. Máº·c Ã¡o áº¥m'], correctMatches:{'ğŸŒ Trá»i náº¯ng':'a. Äá»™i mÅ©, máº·c Ã¡o chá»‘ng náº¯ng','â˜” Trá»i mÆ°a':'b. Mang Ã´, máº·c Ã¡o mÆ°a','â„ï¸ Trá»i láº¡nh':'c. Máº·c Ã¡o áº¥m'} }
      ]
    },
    
    "BÃ i 2": {
      title: "BÃ i 2: Xá»­ lÃ­ thÃ´ng tin",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Xá»­ lÃ­ thÃ´ng tin lÃ  gÃ¬?', options:[
          {text:'A. Nháº­n thÃ´ng tin báº±ng máº¯t, tai', correct:false},
          {text:'B. DÃ¹ng thÃ´ng tin Ä‘Ã£ cÃ³ Ä‘á»ƒ so sÃ¡nh, tÃ­nh toÃ¡n, sáº¯p xáº¿p', correct:true},
          {text:'C. Gá»­i thÃ´ng tin cho ngÆ°á»i khÃ¡c', correct:false},
          {text:'D. KhÃ´ng lÃ m gÃ¬ vá»›i thÃ´ng tin', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Thiáº¿t bá»‹ nÃ o dÆ°á»›i Ä‘Ã¢y giÃºp mÃ¡y tÃ­nh xá»­ lÃ­ thÃ´ng tin?', options:[
          {text:'A. MÃ n hÃ¬nh', correct:false},
          {text:'B. BÃ n phÃ­m', correct:false},
          {text:'C. Bá»™ xá»­ lÃ­ trung tÃ¢m (CPU)', correct:true},
          {text:'D. Chuá»™t', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Hoáº¡t Ä‘á»™ng nÃ o sau Ä‘Ã¢y lÃ  xá»­ lÃ­ thÃ´ng tin?', options:[
          {text:'A. Äá»c má»™t bÃ i bÃ¡o', correct:false},
          {text:'B. TÃ­nh Ä‘iá»ƒm trung bÃ¬nh cÃ¡c mÃ´n há»c', correct:true},
          {text:'C. Nghe nháº¡c', correct:false},
          {text:'D. NhÃ¬n tranh', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 4: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ Khi em so sÃ¡nh hai bá»©c tranh Ä‘á»ƒ tÃ¬m Ä‘iá»ƒm khÃ¡c nhau, Ä‘Ã³ lÃ  xá»­ lÃ­ thÃ´ng tin.', correct:true},
          {text:'2ï¸âƒ£ Khi em chá»‰ nhÃ¬n tranh mÃ  khÃ´ng suy nghÄ©, Ä‘Ã³ lÃ  xá»­ lÃ­ thÃ´ng tin.', correct:false}
        ]},
        { level:1, type:'matching', question:'CÃ¢u 5: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng:', 
          columnA:['1. Nháº­n thÃ´ng tin','2. Xá»­ lÃ­ thÃ´ng tin','3. Tráº£ káº¿t quáº£'], 
          columnB:['a. Xem káº¿t quáº£ bÃ i kiá»ƒm tra','b. TÃ­nh Ä‘iá»ƒm trung bÃ¬nh','c. Nghe cÃ´ giÃ¡o giáº£ng'], 
          correctMatches:{'1. Nháº­n thÃ´ng tin':'c. Nghe cÃ´ giÃ¡o giáº£ng','2. Xá»­ lÃ­ thÃ´ng tin':'b. TÃ­nh Ä‘iá»ƒm trung bÃ¬nh','3. Tráº£ káº¿t quáº£':'a. Xem káº¿t quáº£ bÃ i kiá»ƒm tra'} 
        },
        { level:1, type:'multiple-choice', question:'CÃ¢u 6: Bá»™ pháº­n nÃ o cá»§a con ngÆ°á»i lÃ m nhiá»‡m vá»¥ xá»­ lÃ­ thÃ´ng tin?', options:[
          {text:'A. ChÃ¢n tay', correct:false},
          {text:'B. ÄÃ´i tai', correct:false},
          {text:'C. ÄÃ´i máº¯t', correct:false},
          {text:'D. Bá»™ nÃ£o', correct:true}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Khi em xáº¿p sÃ¡ch theo mÃ u bÃ¬a, em Ä‘ang:', options:[
          {text:'A. Nháº­n thÃ´ng tin', correct:false},
          {text:'B. Gá»­i thÃ´ng tin', correct:false},
          {text:'C. Xá»­ lÃ­ thÃ´ng tin', correct:true},
          {text:'D. Sao chÃ©p thÃ´ng tin', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi xem báº£ng Ä‘iá»ƒm, em phÃ¡t hiá»‡n mÃ´n nÃ o mÃ¬nh há»c tá»‘t, Ä‘Ã³ lÃ :', options:[
          {text:'A. Em Ä‘ang xá»­ lÃ­ thÃ´ng tin Ä‘á»ƒ rÃºt ra káº¿t luáº­n', correct:true},
          {text:'B. Em Ä‘ang nháº­n thÃ´ng tin', correct:false},
          {text:'C. Em Ä‘ang váº½ tranh', correct:false},
          {text:'D. Em Ä‘ang sao chÃ©p', correct:false}
        ]},
        { level:2, type:'fill-in-blank', question:'CÃ¢u 9: Khi em so sÃ¡nh, sáº¯p xáº¿p, tÃ­nh toÃ¡n hay Ä‘Æ°a ra káº¿t luáº­n, em Ä‘ang â€¦â€¦â€¦â€¦â€¦â€¦ thÃ´ng tin.', 
          sentence:'Khi em so sÃ¡nh, sáº¯p xáº¿p, tÃ­nh toÃ¡n hay Ä‘Æ°a ra káº¿t luáº­n, em Ä‘ang [BLANK] thÃ´ng tin.', 
          hints:['xá»­ lÃ­'], correctAnswers:['xá»­ lÃ­'] 
        },
        { level:2, type:'matching', question:'CÃ¢u 10: Ná»‘i hoáº¡t Ä‘á»™ng vá»›i loáº¡i xá»­ lÃ­ thÃ´ng tin tÆ°Æ¡ng á»©ng:', 
          columnA:['1. So sÃ¡nh hai váº­t','2. TÃ­nh sá»‘ báº¡n trong lá»›p','3. Chá»n báº¡n Ä‘á»™i bÃ³ng'], 
          columnB:['a. TÃ­nh toÃ¡n','b. So sÃ¡nh','c. Ra quyáº¿t Ä‘á»‹nh'], 
          correctMatches:{'1. So sÃ¡nh hai váº­t':'b. So sÃ¡nh','2. TÃ­nh sá»‘ báº¡n trong lá»›p':'a. TÃ­nh toÃ¡n','3. Chá»n báº¡n Ä‘á»™i bÃ³ng':'c. Ra quyáº¿t Ä‘á»‹nh'} 
        },
        { level:2, type:'multiple-choice', question:'CÃ¢u 11: VÃ¬ sao con ngÆ°á»i vÃ  mÃ¡y tÃ­nh Ä‘á»u cáº§n xá»­ lÃ­ thÃ´ng tin?', options:[
          {text:'A. Äá»ƒ hiá»ƒu vÃ  Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh Ä‘Ãºng', correct:true},
          {text:'B. Äá»ƒ trang trÃ­ thÃ´ng tin', correct:false},
          {text:'C. Äá»ƒ lÃ m rá»‘i thÃ´ng tin', correct:false},
          {text:'D. Äá»ƒ khÃ´ng cáº§n nhá»› gÃ¬ cáº£', correct:false}
        ]},
        { level:2, type:'true-false', question:'CÃ¢u 12: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ MÃ¡y tÃ­nh chá»‰ nháº­n thÃ´ng tin mÃ  khÃ´ng xá»­ lÃ­.', correct:false},
          {text:'2ï¸âƒ£ Con ngÆ°á»i cÅ©ng cÃ³ thá»ƒ xá»­ lÃ­ thÃ´ng tin.', correct:true}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 13: Em tháº¥y ba báº¡n cÃ³ káº¿t quáº£ nhÆ° sau: Nam 7 Ä‘iá»ƒm, Lan 9 Ä‘iá»ƒm, Mai 8 Ä‘iá»ƒm. Ai há»c giá»i nháº¥t?', options:[
          {text:'A. Lan', correct:true},
          {text:'B. Nam', correct:false},
          {text:'C. Mai', correct:false},
          {text:'D. Cáº£ ba nhÆ° nhau', correct:false}
        ]},
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi máº¹ nhÃ¬n vÃ o báº£ng giÃ¡ rau vÃ  chá»n mua loáº¡i ráº» nháº¥t, máº¹ Ä‘ang â€¦â€¦â€¦â€¦â€¦â€¦ thÃ´ng tin Ä‘á»ƒ â€¦â€¦â€¦â€¦â€¦â€¦ mua hÃ ng.', 
          sentence:'Khi máº¹ nhÃ¬n vÃ o báº£ng giÃ¡ rau vÃ  chá»n mua loáº¡i ráº» nháº¥t, máº¹ Ä‘ang [BLANK] thÃ´ng tin Ä‘á»ƒ [BLANK] mua hÃ ng.', 
          hints:['xá»­ lÃ­','ra quyáº¿t Ä‘á»‹nh'], correctAnswers:['xá»­ lÃ­','ra quyáº¿t Ä‘á»‹nh'] 
        },
        { level:3, type:'matching-image', question:'CÃ¢u 15: Quan sÃ¡t vÃ  ná»‘i vá»›i hÃ nh Ä‘á»™ng xá»­ lÃ­ tÆ°Æ¡ng á»©ng:', 
          columnA:[{text:'ğŸ§® Em tÃ­nh sá»‘ bÃºt trong há»™p', image:'svg:calculator'},{text:'ğŸ” Em tÃ¬m Ä‘iá»ƒm khÃ¡c nhau trong hai tranh', image:'svg:magnifier'},{text:'ğŸ“Š Em chá»n báº¡n cÃ³ Ä‘iá»ƒm cao nháº¥t', image:'svg:chart'}], 
          columnB:['a. So sÃ¡nh thÃ´ng tin','b. Ra káº¿t luáº­n','c. TÃ­nh toÃ¡n thÃ´ng tin'], 
          correctMatches:{'ğŸ§® Em tÃ­nh sá»‘ bÃºt trong há»™p':'c. TÃ­nh toÃ¡n thÃ´ng tin','ğŸ” Em tÃ¬m Ä‘iá»ƒm khÃ¡c nhau trong hai tranh':'a. So sÃ¡nh thÃ´ng tin','ğŸ“Š Em chá»n báº¡n cÃ³ Ä‘iá»ƒm cao nháº¥t':'b. Ra káº¿t luáº­n'} 
        }
      ]
    },

    
    "BÃ i 3": {
      title: "BÃ i 3: MÃ¡y tÃ­nh vÃ  em",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: MÃ¡y tÃ­nh lÃ  gÃ¬?', options:[
          {text:'A. Má»™t thiáº¿t bá»‹ giÃºp con ngÆ°á»i há»c táº­p, lÃ m viá»‡c, giáº£i trÃ­', correct:true},
          {text:'B. Má»™t Ä‘á»“ chÆ¡i thÃ´ng thÆ°á»ng', correct:false},
          {text:'C. Má»™t chiáº¿c tivi', correct:false},
          {text:'D. Má»™t chiáº¿c Ä‘iá»‡n thoáº¡i', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: MÃ¡y tÃ­nh gá»“m nhá»¯ng bá»™ pháº­n chÃ­nh nÃ o?', options:[
          {text:'A. MÃ n hÃ¬nh, bÃ n phÃ­m, chuá»™t, thÃ¢n mÃ¡y', correct:true},
          {text:'B. BÃ n gháº¿, Ä‘Ã¨n, quáº¡t', correct:false},
          {text:'C. MÃ n hÃ¬nh vÃ  ti vi', correct:false},
          {text:'D. Chuá»™t vÃ  Ä‘iá»‡n thoáº¡i', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Thiáº¿t bá»‹ nÃ o giÃºp em nháº­p dá»¯ liá»‡u vÃ o mÃ¡y tÃ­nh?', options:[
          {text:'A. BÃ n phÃ­m vÃ  chuá»™t', correct:true},
          {text:'B. MÃ n hÃ¬nh', correct:false},
          {text:'C. Loa', correct:false},
          {text:'D. MÃ¡y in', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 4: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ MÃ n hÃ¬nh giÃºp em xem káº¿t quáº£ lÃ m viá»‡c cá»§a mÃ¡y tÃ­nh.', correct:true},
          {text:'2ï¸âƒ£ Chuá»™t dÃ¹ng Ä‘á»ƒ nghe Ã¢m thanh.', correct:false}
        ]},
        { level:1, type:'matching', question:'CÃ¢u 5: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng:', 
          columnA:['1. MÃ n hÃ¬nh','2. Chuá»™t','3. BÃ n phÃ­m'], 
          columnB:['a. Nháº­p thÃ´ng tin','b. Hiá»ƒn thá»‹ thÃ´ng tin','c. Äiá»u khiá»ƒn con trá»'], 
          correctMatches:{'1. MÃ n hÃ¬nh':'b. Hiá»ƒn thá»‹ thÃ´ng tin','2. Chuá»™t':'c. Äiá»u khiá»ƒn con trá»','3. BÃ n phÃ­m':'a. Nháº­p thÃ´ng tin'} 
        },
        { level:1, type:'image-question', image:'svg:child_pc', question:'CÃ¢u 6: MÃ¡y tÃ­nh giÃºp con ngÆ°á»i lÃ m viá»‡c gÃ¬?', options:[
          {text:'A. TÃ­nh toÃ¡n, váº½, há»c táº­p, giáº£i trÃ­', correct:true},
          {text:'B. Ä‚n uá»‘ng, ngá»§ nghá»‰', correct:false},
          {text:'C. Náº¥u Äƒn', correct:false},
          {text:'D. ChÆ¡i bÃ³ng', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n sá»­ dá»¥ng mÃ¡y tÃ­nh cáº©n tháº­n?', options:[
          {text:'A. Äá»ƒ mÃ¡y hoáº¡t Ä‘á»™ng tá»‘t vÃ  an toÃ n', correct:true},
          {text:'B. VÃ¬ mÃ¡y khÃ´ng quan trá»ng', correct:false},
          {text:'C. Äá»ƒ nhanh há»ng hÆ¡n', correct:false},
          {text:'D. VÃ¬ khÃ´ng cáº§n quan tÃ¢m', correct:false}
        ]},
        { level:2, type:'image-question', image:'svg:posture_ok', question:'CÃ¢u 8: Khi ngá»“i há»c vá»›i mÃ¡y tÃ­nh, tÆ° tháº¿ nÃ o lÃ  Ä‘Ãºng?', options:[
          {text:'A. Ngá»“i tháº³ng lÆ°ng, máº¯t cÃ¡ch mÃ n hÃ¬nh khoáº£ng 50 cm', correct:true},
          {text:'B. Náº±m ra bÃ n', correct:false},
          {text:'C. CÃºi sÃ¡t mÃ n hÃ¬nh', correct:false},
          {text:'D. Quay lÆ°ng láº¡i mÃ¡y', correct:false}
        ]},
        { level:2, type:'fill-in-blank', question:'CÃ¢u 9: MÃ¡y tÃ­nh giÃºp em â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦, â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦, vÃ  â€¦â€¦â€¦â€¦â€¦â€¦â€¦â€¦ tá»‘t hÆ¡n.', 
          sentence:'MÃ¡y tÃ­nh giÃºp em [BLANK], [BLANK], vÃ  [BLANK] tá»‘t hÆ¡n.', 
          hints:['há»c táº­p','giáº£i trÃ­','tÃ­nh toÃ¡n'], correctAnswers:['há»c táº­p','giáº£i trÃ­','tÃ­nh toÃ¡n'] 
        },
        { level:2, type:'matching', question:'CÃ¢u 10: Ná»‘i hoáº¡t Ä‘á»™ng cá»§a em vá»›i lá»£i Ã­ch cá»§a mÃ¡y tÃ­nh:', 
          columnA:['1. Váº½ tranh','2. Xem phim','3. LÃ m bÃ i ToÃ¡n'], 
          columnB:['a. Giáº£i trÃ­','b. Há»c táº­p','c. TÃ­nh toÃ¡n'], 
          correctMatches:{'1. Váº½ tranh':'b. Há»c táº­p','2. Xem phim':'a. Giáº£i trÃ­','3. LÃ m bÃ i ToÃ¡n':'c. TÃ­nh toÃ¡n'} 
        },
        { level:2, type:'multiple-choice', question:'CÃ¢u 11: Khi dÃ¹ng mÃ¡y tÃ­nh, em khÃ´ng nÃªn lÃ m gÃ¬?', options:[
          {text:'A. Ä‚n uá»‘ng khi Ä‘ang há»c', correct:true},
          {text:'B. Giá»¯ tay sáº¡ch, ngá»“i ngay ngáº¯n', correct:false},
          {text:'C. Táº¯t mÃ¡y khi khÃ´ng sá»­ dá»¥ng', correct:false},
          {text:'D. LÃ m theo hÆ°á»›ng dáº«n cá»§a tháº§y cÃ´', correct:false}
        ]},
        { level:2, type:'true-false', question:'CÃ¢u 12: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'1ï¸âƒ£ MÃ¡y tÃ­nh giÃºp em váº½ tranh, há»c Tiáº¿ng Anh.', correct:true},
          {text:'2ï¸âƒ£ DÃ¹ng mÃ¡y tÃ­nh lÃ¢u khÃ´ng cáº§n nghá»‰ ngÆ¡i.', correct:false}
        ]},

        { level:3, type:'multiple-choice', question:'CÃ¢u 13: Khi máº¹ nhá» em tra thÃ´ng tin thá»i tiáº¿t trÃªn mÃ¡y tÃ­nh, em Ä‘ang:', options:[
          {text:'A. Nháº­n vÃ  xá»­ lÃ­ thÃ´ng tin', correct:true},
          {text:'B. Nghe nháº¡c', correct:false},
          {text:'C. ChÆ¡i trÃ² chÆ¡i', correct:false},
          {text:'D. Váº½ tranh', correct:false}
        ]},
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi sá»­ dá»¥ng mÃ¡y tÃ­nh, em cáº§n ngá»“i â€¦â€¦â€¦â€¦â€¦â€¦â€¦ vÃ  giá»¯ khoáº£ng cÃ¡ch â€¦â€¦â€¦â€¦â€¦â€¦â€¦ Ä‘á»ƒ báº£o vá»‡ máº¯t.', 
          sentence:'Khi sá»­ dá»¥ng mÃ¡y tÃ­nh, em cáº§n ngá»“i [BLANK] vÃ  giá»¯ khoáº£ng cÃ¡ch [BLANK] Ä‘á»ƒ báº£o vá»‡ máº¯t.', 
          hints:['Ä‘Ãºng tÆ° tháº¿','an toÃ n'], correctAnswers:['Ä‘Ãºng tÆ° tháº¿','an toÃ n'] 
        },
        { level:3, type:'matching-image', question:'CÃ¢u 15: Quan sÃ¡t hÃ¬nh vÃ  ná»‘i vá»›i hÃ nh Ä‘á»™ng Ä‘Ãºng:', 
          columnA:[{text:'ğŸ’» Em táº¯t mÃ¡y tÃ­nh sau khi há»c', image:'svg:power_off'}, {text:'ğŸ§â€â™€ï¸ Em ngá»“i tháº³ng lÆ°ng, máº¯t cÃ¡ch mÃ n hÃ¬nh 50cm', image:'svg:posture_ok'}, {text:'ğŸ™…â€â™‚ï¸ Em khÃ´ng cháº¡m vÃ o dÃ¢y Ä‘iá»‡n', image:'svg:safety_electric'}], 
          columnB:['a. Giá»¯ vá»‡ sinh vÃ  tiáº¿t kiá»‡m Ä‘iá»‡n','b. Ngá»“i há»c Ä‘Ãºng tÆ° tháº¿','c. Giá»¯ an toÃ n khi dÃ¹ng mÃ¡y tÃ­nh'], 
          correctMatches:{'ğŸ’» Em táº¯t mÃ¡y tÃ­nh sau khi há»c':'a. Giá»¯ vá»‡ sinh vÃ  tiáº¿t kiá»‡m Ä‘iá»‡n','ğŸ§â€â™€ï¸ Em ngá»“i tháº³ng lÆ°ng, máº¯t cÃ¡ch mÃ n hÃ¬nh 50cm':'b. Ngá»“i há»c Ä‘Ãºng tÆ° tháº¿','ğŸ™…â€â™‚ï¸ Em khÃ´ng cháº¡m vÃ o dÃ¢y Ä‘iá»‡n':'c. Giá»¯ an toÃ n khi dÃ¹ng mÃ¡y tÃ­nh'} 
        }
      ]
    },

"BÃ i 4": {
  title: "BÃ i 4: LÃ m viá»‡c vá»›i mÃ¡y tÃ­nh",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: MÃ¡y tÃ­nh gá»“m nhá»¯ng bá»™ pháº­n chÃ­nh nÃ o sau Ä‘Ã¢y?', options:[
      {text:'A. MÃ n hÃ¬nh, bÃ n phÃ­m, chuá»™t', correct:false},
      {text:'B. MÃ n hÃ¬nh, CPU, bÃ n phÃ­m, chuá»™t', correct:true},
      {text:'C. CPU, mÃ¡y in, USB', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Bá»™ pháº­n nÃ o giÃºp em nháº­p dá»¯ liá»‡u vÃ o mÃ¡y tÃ­nh?', options:[
      {text:'A. Chuá»™t vÃ  bÃ n phÃ­m', correct:true},
      {text:'B. MÃ n hÃ¬nh', correct:false},
      {text:'C. Loa', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Bá»™ pháº­n nÃ o giÃºp em nhÃ¬n tháº¥y hÃ¬nh áº£nh, chá»¯ viáº¿t trÃªn mÃ¡y tÃ­nh?', options:[
      {text:'A. Chuá»™t', correct:false},
      {text:'B. MÃ n hÃ¬nh', correct:true},
      {text:'C. BÃ n phÃ­m', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: NÃºt nguá»“n thÆ°á»ng Ä‘Æ°á»£c Ä‘áº·t á»Ÿ Ä‘Ã¢u?', options:[
      {text:'A. TrÃªn CPU', correct:true},
      {text:'B. TrÃªn bÃ n phÃ­m', correct:false},
      {text:'C. TrÃªn chuá»™t', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Khi táº¯t mÃ¡y tÃ­nh, em cáº§n lÃ m gÃ¬?', options:[
      {text:'A. RÃºt dÃ¢y Ä‘iá»‡n ra ngay', correct:false},
      {text:'B. Nháº¥n táº¯t báº±ng pháº§n má»m hoáº·c nÃºt nguá»“n Ä‘Ãºng cÃ¡ch', correct:true},
      {text:'C. Äáº­p máº¡nh vÃ o CPU', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: HÃ¬nh dÆ°á»›i Ä‘Ã¢y thá»ƒ hiá»‡n hoáº¡t Ä‘á»™ng nÃ o Ä‘Ãºng khi sá»­ dá»¥ng mÃ¡y tÃ­nh?', options:[
      {text:'A. TÆ° tháº¿ ngá»“i sai', correct:false},
      {text:'B. TÆ° tháº¿ ngá»“i Ä‘Ãºng', correct:true},
      {text:'C. Cáº£ hai Ä‘á»u sai', correct:false}
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 7: Táº¡i sao chÃºng ta cáº§n táº¯t mÃ¡y Ä‘Ãºng cÃ¡ch?', answer:'Äá»ƒ báº£o vá»‡ dá»¯ liá»‡u vÃ  trÃ¡nh há»ng mÃ¡y' },
    { level:2, type:'fill-in-blank', question:'CÃ¢u 8: Em nÃªn lÃ m gÃ¬ khi mÃ n hÃ¬nh mÃ¡y tÃ­nh khÃ´ng sÃ¡ng?', answer:'Kiá»ƒm tra dÃ¢y nguá»“n hoáº·c bÃ¡o ngÆ°á»i lá»›n' },
    { level:2, type:'multiple-choice', question:'CÃ¢u 9: Em nÃªn giá»¯ khoáº£ng cÃ¡ch bao nhiÃªu giá»¯a máº¯t vÃ  mÃ n hÃ¬nh mÃ¡y tÃ­nh?', options:[
      {text:'A. 10â€“15 cm', correct:false},
      {text:'B. 30â€“50 cm', correct:true},
      {text:'C. 1 mÃ©t', correct:false}
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 10a: Em cÃ³ thá»ƒ vá»«a Äƒn vá»«a lÃ m viá»‡c trÃªn mÃ¡y tÃ­nh.', answer:false },
    { level:2, type:'true-false', question:'CÃ¢u 10b: Cáº§n rá»­a tay sáº¡ch trÆ°á»›c khi sá»­ dá»¥ng mÃ¡y tÃ­nh.', answer:true },
    { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i thÃ´ng tin cho phÃ¹ há»£p', left:[
      '1. Chuá»™t','2. MÃ n hÃ¬nh','3. CPU'
    ], right:[
      'a. Hiá»ƒn thá»‹ hÃ¬nh áº£nh','b. Xá»­ lÃ­ thÃ´ng tin','c. Äiá»u khiá»ƒn con trá» vÃ  chá»n lá»‡nh'
    ], pairs:[
      ['1. Chuá»™t','c. Äiá»u khiá»ƒn con trá» vÃ  chá»n lá»‡nh'],
      ['2. MÃ n hÃ¬nh','a. Hiá»ƒn thá»‹ hÃ¬nh áº£nh'],
      ['3. CPU','b. Xá»­ lÃ­ thÃ´ng tin']
    ]},
    { level:2, type:'fill-in-blank-choice', question:'CÃ¢u 12: MÃ¡y tÃ­nh chá»‰ lÃ m viá»‡c khi cÃ³ Ä‘áº§y Ä‘á»§ cÃ¡c â€¦â€¦.. vÃ  Ä‘Æ°á»£c â€¦â€¦.. Ä‘Ãºng cÃ¡ch.', choices:['bá»™ pháº­n','báº­t nguá»“n','sáº¡c pin','á»• cáº¯m'], answer:['bá»™ pháº­n','báº­t nguá»“n'] },
    { level:3, type:'multiple-choice', question:'CÃ¢u 13: Náº¿u Ä‘ang há»c mÃ  mÃ¡y tÃ­nh bá»‹ treo, em nÃªn lÃ m gÃ¬?', options:[
      {text:'A. Äáº­p bÃ n phÃ­m', correct:false},
      {text:'B. BÃ¡o tháº§y cÃ´ hoáº·c ngÆ°á»i lá»›n', correct:true},
      {text:'C. Táº¯t mÃ¡y ngay', correct:false}
    ]},
    { level:3, type:'matching', question:'CÃ¢u 14: Em hÃ£y ná»‘i hÃ nh vi Ä‘Ãºng khi lÃ m viá»‡c vá»›i mÃ¡y tÃ­nh', left:['a. Ngá»“i ngay ngáº¯n, khoáº£ng cÃ¡ch há»£p lÃ­','b. Vá»«a Äƒn vá»«a sá»­ dá»¥ng mÃ¡y','c. Giá»¯ mÃ n hÃ¬nh sáº¡ch, tay khÃ´ rÃ¡o'], right:['ÄÃºng','Sai'], pairs:[
      ['a. Ngá»“i ngay ngáº¯n, khoáº£ng cÃ¡ch há»£p lÃ­','ÄÃºng'],
      ['b. Vá»«a Äƒn vá»«a sá»­ dá»¥ng mÃ¡y','Sai'],
      ['c. Giá»¯ mÃ n hÃ¬nh sáº¡ch, tay khÃ´ rÃ¡o','ÄÃºng']
    ]},
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: MÃ´ táº£ tÆ° tháº¿ Ä‘Ãºng khi ngá»“i lÃ m viá»‡c vá»›i mÃ¡y tÃ­nh', answer:'Ngá»“i tháº³ng lÆ°ng, hai tay Ä‘áº·t trÃªn bÃ n, máº¯t cÃ¡ch mÃ n hÃ¬nh 40â€“50 cm' }
  ]
}
,

"BÃ i 5": {
  title: "BÃ i 5: Sá»­ dá»¥ng bÃ n phÃ­m",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: TrÃªn bÃ n phÃ­m cÃ³ máº¥y nhÃ³m phÃ­m chÃ­nh?', options:[
      {text:'A. 2 nhÃ³m', correct:false},
      {text:'B. 3 nhÃ³m', correct:false},
      {text:'C. 4 nhÃ³m', correct:true},
      {text:'D. 5 nhÃ³m', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: NhÃ³m phÃ­m chá»¯ náº±m á»Ÿ vá»‹ trÃ­ nÃ o trÃªn bÃ n phÃ­m?', options:[
      {text:'A. á» giá»¯a', correct:true},
      {text:'B. á» bÃªn pháº£i', correct:false},
      {text:'C. á» bÃªn trÃ¡i', correct:false},
      {text:'D. á» trÃªn cÃ¹ng', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: PhÃ­m Enter dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?', options:[
      {text:'A. XÃ³a chá»¯', correct:false},
      {text:'B. Xuá»‘ng dÃ²ng', correct:true},
      {text:'C. CÃ¡ch chá»¯', correct:false},
      {text:'D. Di chuyá»ƒn con trá»', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: PhÃ­m Backspace cÃ³ tÃ¡c dá»¥ng gÃ¬?', options:[
      {text:'A. XÃ³a chá»¯ bÃªn pháº£i con trá»', correct:false},
      {text:'B. XÃ³a chá»¯ bÃªn trÃ¡i con trá»', correct:true},
      {text:'C. Viáº¿t chá»¯ hoa', correct:false},
      {text:'D. Di chuyá»ƒn con trá»', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: PhÃ­m Caps Lock cÃ³ tÃ¡c dá»¥ng gÃ¬?', options:[
      {text:'A. GÃµ sá»‘', correct:false},
      {text:'B. GÃµ chá»¯ thÆ°á»ng', correct:false},
      {text:'C. GÃµ chá»¯ hoa', correct:true},
      {text:'D. XÃ³a chá»¯', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: CÃ¡c phÃ­m F, J thuá»™c hÃ ng phÃ­m nÃ o?', options:[
      {text:'A. HÃ ng phÃ­m trÃªn', correct:false},
      {text:'B. HÃ ng phÃ­m dÆ°á»›i', correct:false},
      {text:'C. HÃ ng phÃ­m cÆ¡ sá»Ÿ', correct:true}
    ]},

    { level:2, type:'multiple-choice', question:'CÃ¢u 7: Khi gÃµ chá»¯, náº¿u nháº¥n giá»¯ phÃ­m Shift rá»“i báº¥m phÃ­m chá»¯, chá»¯ sáº½â€¦', options:[
      {text:'A. ThÃ nh chá»¯ thÆ°á»ng', correct:false},
      {text:'B. ThÃ nh chá»¯ hoa', correct:true},
      {text:'C. KhÃ´ng hiá»‡n ra', correct:false},
      {text:'D. Hiá»‡n hai láº§n', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'CÃ¢u 8: Muá»‘n xÃ³a má»™t kÃ½ tá»± bÃªn pháº£i con trá», em dÃ¹ng phÃ­m nÃ o?', options:[
      {text:'A. Delete', correct:true},
      {text:'B. Backspace', correct:false},
      {text:'C. Tab', correct:false},
      {text:'D. Esc', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 9: HÃ£y ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. Spacebar','2. Backspace','3. Enter'
    ], right:[
      'a. XÃ³a kÃ½ tá»± bÃªn trÃ¡i con trá»','b. Táº¡o khoáº£ng cÃ¡ch giá»¯a hai chá»¯','c. Xuá»‘ng dÃ²ng'
    ], pairs:[
      ['1. Spacebar','b. Táº¡o khoáº£ng cÃ¡ch giá»¯a hai chá»¯'],
      ['2. Backspace','a. XÃ³a kÃ½ tá»± bÃªn trÃ¡i con trá»'],
      ['3. Enter','c. Xuá»‘ng dÃ²ng']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 10a: PhÃ­m Shift giÃºp viáº¿t chá»¯ hoa khi giá»¯ cÃ¹ng phÃ­m chá»¯.', answer:true },
    { level:2, type:'true-false', question:'CÃ¢u 10b: PhÃ­m Ctrl dÃ¹ng Ä‘á»ƒ xuá»‘ng dÃ²ng.', answer:false },
    { level:2, type:'fill-in-blank', question:'CÃ¢u 11: Khi muá»‘n viáº¿t chá»¯ hoa, em cÃ³ thá»ƒ nháº¥n phÃ­m â€¦ cÃ¹ng vá»›i phÃ­m chá»¯.', answer:'Shift' },
    { level:2, type:'matching', question:'CÃ¢u 12: Em hÃ£y ná»‘i cÃ¡c phÃ­m vá»›i cÃ´ng dá»¥ng tÆ°Æ¡ng á»©ng', left:[
      '1. Tab','2. Delete','3. Caps Lock'
    ], right:[
      'a. XÃ³a chá»¯ bÃªn pháº£i con trá»','b. LÃ¹i nhanh sang vá»‹ trÃ­ káº¿ tiáº¿p','c. GÃµ toÃ n bá»™ chá»¯ hoa'
    ], pairs:[
      ['1. Tab','b. LÃ¹i nhanh sang vá»‹ trÃ­ káº¿ tiáº¿p'],
      ['2. Delete','a. XÃ³a chá»¯ bÃªn pháº£i con trá»'],
      ['3. Caps Lock','c. GÃµ toÃ n bá»™ chá»¯ hoa']
    ]},

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: NÃªu má»™t vÃ­ dá»¥ cáº§n dÃ¹ng phÃ­m Enter trong khi há»c Tin há»c.', answer:'VÃ­ dá»¥: Khi viáº¿t Ä‘oáº¡n vÄƒn báº£n, nháº¥n Enter Ä‘á»ƒ xuá»‘ng dÃ²ng má»›i.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: VÃ¬ sao cáº§n Ä‘áº·t tay Ä‘Ãºng tÆ° tháº¿ trÃªn bÃ n phÃ­m?', answer:'Äá»ƒ gÃµ nhanh, chÃ­nh xÃ¡c vÃ  trÃ¡nh má»i tay.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Há»c sinh trong hÃ¬nh cÃ³ tÆ° tháº¿ ngá»“i Ä‘Ãºng chÆ°a? VÃ¬ sao?', answer:'CÃ³. Ngá»“i tháº³ng lÆ°ng, máº¯t cÃ¡ch mÃ n hÃ¬nh vá»«a pháº£i, hai tay Ä‘áº·t Ä‘Ãºng trÃªn bÃ n phÃ­m.' }
  ]
}
,

"BÃ i 6": {
  title: "BÃ i 6: KhÃ¡m phÃ¡ thÃ´ng tin trÃªn Internet",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Internet lÃ  gÃ¬?', options:[
      {text:'A. Má»™t trÃ² chÆ¡i Ä‘iá»‡n tá»­', correct:false},
      {text:'B. Má»™t máº¡ng káº¿t ná»‘i nhiá»u mÃ¡y tÃ­nh trÃªn toÃ n tháº¿ giá»›i', correct:true},
      {text:'C. Má»™t loáº¡i mÃ¡y tÃ­nh má»›i', correct:false},
      {text:'D. Má»™t pháº§n má»m gÃµ vÄƒn báº£n', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Khi muá»‘n tÃ¬m kiáº¿m thÃ´ng tin trÃªn Internet, em cÃ³ thá»ƒ dÃ¹ng cÃ´ng cá»¥ nÃ o?', options:[
      {text:'A. Microsoft Word', correct:false},
      {text:'B. Google', correct:true},
      {text:'C. Paint', correct:false},
      {text:'D. MÃ¡y tÃ­nh bá» tÃºi', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Äá»ƒ truy cáº­p Internet, mÃ¡y tÃ­nh cáº§n cÃ³:', options:[
      {text:'A. Káº¿t ná»‘i máº¡ng', correct:true},
      {text:'B. Loa', correct:false},
      {text:'C. MÃ¡y in', correct:false},
      {text:'D. BÃ n phÃ­m', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: TrÃ¬nh duyá»‡t web lÃ  gÃ¬?', options:[
      {text:'A. á»¨ng dá»¥ng giÃºp váº½ hÃ¬nh', correct:false},
      {text:'B. á»¨ng dá»¥ng giÃºp xem phim', correct:false},
      {text:'C. á»¨ng dá»¥ng giÃºp truy cáº­p trang web', correct:true},
      {text:'D. á»¨ng dá»¥ng chÆ¡i game', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Trang web lÃ  gÃ¬?', options:[
      {text:'A. Má»™t tá» giáº¥y tráº¯ng', correct:false},
      {text:'B. Má»™t hÃ¬nh áº£nh trong mÃ¡y tÃ­nh', correct:false},
      {text:'C. Má»™t trang thÃ´ng tin hiá»ƒn thá»‹ trÃªn trÃ¬nh duyá»‡t', correct:true},
      {text:'D. Má»™t pháº§n cá»§a mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Ã nÃ o dÆ°á»›i Ä‘Ã¢y khÃ´ng pháº£i lÃ  Ä‘áº·c Ä‘iá»ƒm cá»§a thÃ´ng tin trÃªn Internet?', options:[
      {text:'A. ÄÃ¡ng tin cáº­y, luÃ´n chÃ­nh xÃ¡c', correct:true},
      {text:'B. ÄÆ°á»£c cáº­p nháº­t thÆ°á»ng xuyÃªn', correct:false},
      {text:'C. Äa dáº¡ng vÃ  phong phÃº', correct:false},
      {text:'D. CÃ³ thá»ƒ truy cáº­p má»i nÆ¡i khi cÃ³ káº¿t ná»‘i máº¡ng', correct:false}
    ]},

    { level:2, type:'multiple-choice', question:'CÃ¢u 7: Khi muá»‘n xem dá»± bÃ¡o thá»i tiáº¿t trÃªn Internet, em cáº§n lÃ m gÃ¬ Ä‘áº§u tiÃªn?', options:[
      {text:'A. Má»Ÿ mÃ¡y tÃ­nh vÃ  káº¿t ná»‘i máº¡ng', correct:true},
      {text:'B. Gá»i Ä‘iá»‡n thoáº¡i cho báº¡n', correct:false},
      {text:'C. Má»Ÿ pháº§n má»m Paint', correct:false},
      {text:'D. Táº¯t mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 8: HÃ£y ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. TrÃ¬nh duyá»‡t web','2. Ã” tÃ¬m kiáº¿m','3. Trang web'
    ], right:[
      'a. NÆ¡i nháº­p tá»« khÃ³a tÃ¬m kiáº¿m','b. GiÃºp em truy cáº­p cÃ¡c trang web','c. Hiá»ƒn thá»‹ thÃ´ng tin em muá»‘n xem'
    ], pairs:[
      ['1. TrÃ¬nh duyá»‡t web','b. GiÃºp em truy cáº­p cÃ¡c trang web'],
      ['2. Ã” tÃ¬m kiáº¿m','a. NÆ¡i nháº­p tá»« khÃ³a tÃ¬m kiáº¿m'],
      ['3. Trang web','c. Hiá»ƒn thá»‹ thÃ´ng tin em muá»‘n xem']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 9a: Internet chá»‰ cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ chÆ¡i game.', answer:false },
    { level:2, type:'true-false', question:'CÃ¢u 9b: Em cÃ³ thá»ƒ há»c táº­p vÃ  tÃ¬m kiáº¿m kiáº¿n thá»©c trÃªn Internet.', answer:true },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi truy cáº­p Internet, em nÃªn lÃ m gÃ¬ Ä‘á»ƒ an toÃ n?', options:[
      {text:'A. KhÃ´ng chia sáº» thÃ´ng tin cÃ¡ nhÃ¢n', correct:true},
      {text:'B. GÃµ máº­t kháº©u lÃªn má»i trang web', correct:false},
      {text:'C. Nháº¥p vÃ o má»i Ä‘Æ°á»ng link láº¡', correct:false},
      {text:'D. NÃ³i chuyá»‡n vá»›i ngÆ°á»i láº¡ trÃªn máº¡ng', correct:false}
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 11: Khi muá»‘n tÃ¬m kiáº¿m hÃ¬nh áº£nh, em nháº­p tá»« khÃ³a vÃ o Ã´ â€¦â€¦â€¦ rá»“i nháº¥n Enter.', answer:'tÃ¬m kiáº¿m' },
    { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i ná»™i dung Ä‘Ãºng', left:[
      '1. TÃ¬m thÃ´ng tin há»c táº­p','2. Xem video hÆ°á»›ng dáº«n','3. TrÃ² chuyá»‡n vá»›i báº¡n bÃ¨'
    ], right:[
      'a. GiÃºp há»c tá»‘t hÆ¡n','b. Biáº¿t thÃªm nhiá»u Ä‘iá»u hay','c. Káº¿t ná»‘i, chia sáº» vá»›i nhau'
    ], pairs:[
      ['1. TÃ¬m thÃ´ng tin há»c táº­p','a. GiÃºp há»c tá»‘t hÆ¡n'],
      ['2. Xem video hÆ°á»›ng dáº«n','b. Biáº¿t thÃªm nhiá»u Ä‘iá»u hay'],
      ['3. TrÃ² chuyá»‡n vá»›i báº¡n bÃ¨','c. Káº¿t ná»‘i, chia sáº» vá»›i nhau']
    ]},

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Em hÃ£y nÃªu má»™t vÃ­ dá»¥ vá» viá»‡c em dÃ¹ng Internet Ä‘á»ƒ há»c táº­p.', answer:'VÃ­ dá»¥: Xem bÃ i giáº£ng trá»±c tuyáº¿n hoáº·c tra nghÄ©a tá»« má»›i.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Náº¿u tháº¥y má»™t trang web cÃ³ ná»™i dung khÃ´ng phÃ¹ há»£p, em nÃªn lÃ m gÃ¬?', answer:'ÄÃ³ng trang vÃ  bÃ¡o cho ngÆ°á»i lá»›n.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Em cÃ³ nháº­n xÃ©t gÃ¬ vá» cÃ¡ch sá»­ dá»¥ng Internet Ä‘Ãºng cÃ¡ch?', answer:'Chá»‰ tÃ¬m thÃ´ng tin há»c táº­p, khÃ´ng chia sáº» thÃ´ng tin cÃ¡ nhÃ¢n, sá»­ dá»¥ng an toÃ n.' }
  ]
}
,

"BÃ i 7": {
  title: "BÃ i 7: Sáº¯p xáº¿p Ä‘á»ƒ dá»… tÃ¬m",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Sáº¯p xáº¿p cÃ¡c tá»‡p tin gá»n gÃ ng giÃºp em lÃ m gÃ¬?', options:[
      {text:'A. Dá»… tÃ¬m khi cáº§n', correct:true},
      {text:'B. LÃ m mÃ¡y cháº¡y cháº­m', correct:false},
      {text:'C. XÃ³a bá»›t dá»¯ liá»‡u', correct:false},
      {text:'D. Táº¡o ra virus', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: ThÆ° má»¥c (Folder) dÃ¹ng Ä‘á»ƒ:', options:[
      {text:'A. XÃ³a tá»‡p tin', correct:false},
      {text:'B. LÆ°u trá»¯ vÃ  sáº¯p xáº¿p tá»‡p tin', correct:true},
      {text:'C. Má»Ÿ mÃ¡y tÃ­nh', correct:false},
      {text:'D. Táº¯t mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Em hÃ£y sáº¯p xáº¿p cÃ¡c loáº¡i rau cá»§ quáº£ sau vÃ o ba nhÃ³m thÃ­ch há»£p?', options:[
      {text:'A. Cá»§: khoai tÃ¢y, su hÃ o, báº¯p cáº£i vÃ  cÃ  rá»‘t', correct:false},
      {text:'B. Quáº£: nhÃ£n, nho, mÃ­t, dÆ°a háº¥u', correct:true},
      {text:'C. Rau: báº¯p cáº£i, su hÃ o', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: Biá»ƒu tÆ°á»£ng cá»§a thÆ° má»¥c thÆ°á»ng cÃ³ hÃ¬nh:', options:[
      {text:'A. Quyá»ƒn vá»Ÿ', correct:false},
      {text:'B. CÃ¡i bÃºt', correct:false},
      {text:'C. CÃ¡i cáº·p tÃ i liá»‡u', correct:true},
      {text:'D. CÃ¡i loa', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Trong mÃ¡y tÃ­nh, em nÃªn Ä‘áº·t tÃªn tá»‡p nhÆ° tháº¿ nÃ o cho dá»… tÃ¬m?', options:[
      {text:'A. TÃªn rÃµ rÃ ng, dá»… hiá»ƒu', correct:true},
      {text:'B. TÃªn quÃ¡ dÃ i', correct:false},
      {text:'C. TÃªn toÃ n sá»‘', correct:false},
      {text:'D. KhÃ´ng cáº§n Ä‘áº·t tÃªn', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Khi muá»‘n má»Ÿ thÆ° má»¥c em nÃªn:', options:[
      {text:'A. Nháº¥n Ä‘Ãºp chuá»™t vÃ o biá»ƒu tÆ°á»£ng thÆ° má»¥c', correct:true},
      {text:'B. Nháº¥n phÃ­m Delete', correct:false},
      {text:'C. Nháº¥n Enter liÃªn tá»¥c', correct:false},
      {text:'D. Táº¯t mÃ¡y', correct:false}
    ]},

    { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n sáº¯p xáº¿p tá»‡p tin vÃ o cÃ¡c thÆ° má»¥c khÃ¡c nhau?', options:[
      {text:'A. Äá»ƒ trang trÃ­ cho mÃ¡y tÃ­nh', correct:false},
      {text:'B. Äá»ƒ dá»… tÃ¬m vÃ  quáº£n lÃ½ hÆ¡n', correct:true},
      {text:'C. Äá»ƒ xÃ³a bá»›t tá»‡p', correct:false},
      {text:'D. Äá»ƒ giáº£m dung lÆ°á»£ng', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 8: HÃ£y ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. Há»c táº­p','2. Giáº£i trÃ­','3. áº¢nh cÃ¡ nhÃ¢n'
    ], right:[
      'a. LÆ°u cÃ¡c bÃ i hÃ¡t yÃªu thÃ­ch','b. LÆ°u bÃ i táº­p ToÃ¡n, Tiáº¿ng Viá»‡t','c. LÆ°u hÃ¬nh áº£nh cá»§a em vÃ  gia Ä‘Ã¬nh'
    ], pairs:[
      ['1. Há»c táº­p','b. LÆ°u bÃ i táº­p ToÃ¡n, Tiáº¿ng Viá»‡t'],
      ['2. Giáº£i trÃ­','a. LÆ°u cÃ¡c bÃ i hÃ¡t yÃªu thÃ­ch'],
      ['3. áº¢nh cÃ¡ nhÃ¢n','c. LÆ°u hÃ¬nh áº£nh cá»§a em vÃ  gia Ä‘Ã¬nh']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 9a: Má»i tá»‡p tin Ä‘á»u náº±m trong thÆ° má»¥c.', answer:false },
    { level:2, type:'true-false', question:'CÃ¢u 9b: Má»™t thÆ° má»¥c cÃ³ thá»ƒ chá»©a nhiá»u thÆ° má»¥c con.', answer:true },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi lÆ°u tá»‡p, nÃªn chá»n vá»‹ trÃ­ lÆ°u nhÆ° tháº¿ nÃ o?', options:[
      {text:'A. LÆ°u láº«n lá»™n kháº¯p nÆ¡i', correct:false},
      {text:'B. LÆ°u vÃ o thÆ° má»¥c cÃ³ tÃªn rÃµ rÃ ng', correct:true},
      {text:'C. LÆ°u vÃ o thÃ¹ng rÃ¡c', correct:false},
      {text:'D. KhÃ´ng cáº§n lÆ°u', correct:false}
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 11: Khi em lÆ°u cÃ¡c tá»‡p vÃ o cÃ¡c thÆ° má»¥c riÃªng biá»‡t, em sáº½ â€¦ cÃ¡c tá»‡p dá»… dÃ ng hÆ¡n.', answer:'tÃ¬m' },
    { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i tÃªn hÃ nh Ä‘á»™ng vá»›i lá»£i Ã­ch tÆ°Æ¡ng á»©ng', left:[
      '1. Äáº·t tÃªn tá»‡p rÃµ rÃ ng','2. LÆ°u tá»‡p vÃ o thÆ° má»¥c riÃªng','3. XÃ³a tá»‡p khÃ´ng cáº§n thiáº¿t'
    ], right:[
      'a. Biáº¿t ná»™i dung tá»‡p lÃ  gÃ¬','b. Dá»… tÃ¬m khi cáº§n','c. Giá»¯ mÃ¡y gá»n gÃ ng'
    ], pairs:[
      ['1. Äáº·t tÃªn tá»‡p rÃµ rÃ ng','a. Biáº¿t ná»™i dung tá»‡p lÃ  gÃ¬'],
      ['2. LÆ°u tá»‡p vÃ o thÆ° má»¥c riÃªng','b. Dá»… tÃ¬m khi cáº§n'],
      ['3. XÃ³a tá»‡p khÃ´ng cáº§n thiáº¿t','c. Giá»¯ mÃ¡y gá»n gÃ ng']
    ]},

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Em hÃ£y cho vÃ­ dá»¥ vá» cÃ¡ch em sáº¯p xáº¿p tá»‡p trong mÃ¡y tÃ­nh.', answer:'VÃ­ dá»¥: Táº¡o thÆ° má»¥c â€œBÃ i táº­p há»c ká»³ Iâ€ vÃ  sáº¯p xáº¿p bÃ i Word, hÃ¬nh váº½ vÃ o Ä‘Ã³.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi mÃ¡y tÃ­nh cÃ³ quÃ¡ nhiá»u tá»‡p rá»i ráº¡c, em sáº½ lÃ m gÃ¬ Ä‘á»ƒ dá»… tÃ¬m hÆ¡n?', answer:'Táº¡o thÆ° má»¥c theo chá»§ Ä‘á» vÃ  sáº¯p xáº¿p tá»‡p vÃ o Ä‘Ã³.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Theo em, mÃ n hÃ¬nh nÃ o dá»… tÃ¬m hÆ¡n? VÃ¬ sao?', answer:'MÃ n hÃ¬nh C dá»… tÃ¬m hÆ¡n vÃ¬ sáº¯p xáº¿p ngÄƒn náº¯p, gá»n gÃ ng.' }
  ]
}
,

"BÃ i 8": {
  title: "BÃ i 8: SÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y â€“ Tá»• chá»©c thÃ´ng tin",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: SÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y dÃ¹ng Ä‘á»ƒ thá»ƒ hiá»‡n Ä‘iá»u gÃ¬?', options:[
      {text:'A. CÃ¡ch cÃ¡c tá»‡p tin vÃ  thÆ° má»¥c Ä‘Æ°á»£c sáº¯p xáº¿p trong mÃ¡y tÃ­nh', correct:true},
      {text:'B. CÃ¡ch trá»“ng cÃ¢y ngoÃ i vÆ°á»n', correct:false},
      {text:'C. CÃ¡ch gÃµ vÄƒn báº£n', correct:false},
      {text:'D. CÃ¡ch há»c bÃ i', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Trong sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y, thÆ° má»¥c gá»‘c thÆ°á»ng náº±m á»Ÿ vá»‹ trÃ­ nÃ o?', options:[
      {text:'A. á» trÃªn cÃ¹ng', correct:true},
      {text:'B. á» giá»¯a', correct:false},
      {text:'C. á» dÆ°á»›i', correct:false},
      {text:'D. á» bÃªn trÃ¡i', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: ThÆ° má»¥c con lÃ  gÃ¬?', options:[
      {text:'A. ThÆ° má»¥c nhá» náº±m trong má»™t thÆ° má»¥c khÃ¡c', correct:true},
      {text:'B. ThÆ° má»¥c Ä‘á»ƒ xÃ³a tá»‡p', correct:false},
      {text:'C. ThÆ° má»¥c Ä‘áº·c biá»‡t chá»©a trÃ² chÆ¡i', correct:false},
      {text:'D. ThÆ° má»¥c ngoÃ i mÃ n hÃ¬nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: Trong sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y, má»—i nhÃ¡nh ná»‘i thá»ƒ hiá»‡n:', options:[
      {text:'A. Má»‘i liÃªn há»‡ giá»¯a thÆ° má»¥c cha vÃ  thÆ° má»¥c con', correct:true},
      {text:'B. CÃ¡ch di chuyá»ƒn chuá»™t', correct:false},
      {text:'C. Sá»‘ lÆ°á»£ng tá»‡p tin', correct:false},
      {text:'D. Thá»© tá»± báº­t mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Trong sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y, thÆ° má»¥c cha lÃ :', options:[
      {text:'A. ThÆ° má»¥c chá»©a thÆ° má»¥c con', correct:true},
      {text:'B. ThÆ° má»¥c nhá» nháº¥t', correct:false},
      {text:'C. ThÆ° má»¥c bá»‹ xÃ³a', correct:false},
      {text:'D. ThÆ° má»¥c rá»—ng', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Má»—i tá»‡p tin thÆ°á»ng náº±m á»Ÿ vá»‹ trÃ­:', options:[
      {text:'A. TrÃªn nhÃ¡nh', correct:false},
      {text:'B. á» cuá»‘i nhÃ¡nh', correct:true},
      {text:'C. á» Ä‘áº§u nhÃ¡nh', correct:false},
      {text:'D. á» gá»‘c cÃ¢y', correct:false}
    ]},

    { level:2, type:'multiple-choice', question:'CÃ¢u 7: SÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y giÃºp em hiá»ƒu rÃµ Ä‘iá»u gÃ¬ vá» mÃ¡y tÃ­nh?', options:[
      {text:'A. Cáº¥u trÃºc sáº¯p xáº¿p dá»¯ liá»‡u trong mÃ¡y tÃ­nh', correct:true},
      {text:'B. CÃ¡ch váº½ tranh', correct:false},
      {text:'C. CÃ¡ch chÆ¡i game', correct:false},
      {text:'D. CÃ¡ch báº­t táº¯t mÃ¡y', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 8: HÃ£y ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. ThÆ° má»¥c cha','2. ThÆ° má»¥c con','3. Tá»‡p tin'
    ], right:[
      'a. Náº±m trong thÆ° má»¥c khÃ¡c','b. Chá»©a cÃ¡c thÆ° má»¥c hoáº·c tá»‡p tin khÃ¡c','c. Náº±m á»Ÿ cuá»‘i nhÃ¡nh cá»§a sÆ¡ Ä‘á»“'
    ], pairs:[
      ['1. ThÆ° má»¥c cha','b. Chá»©a cÃ¡c thÆ° má»¥c hoáº·c tá»‡p tin khÃ¡c'],
      ['2. ThÆ° má»¥c con','a. Náº±m trong thÆ° má»¥c khÃ¡c'],
      ['3. Tá»‡p tin','c. Náº±m á»Ÿ cuá»‘i nhÃ¡nh cá»§a sÆ¡ Ä‘á»“']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 9a: Má»™t thÆ° má»¥c cÃ³ thá»ƒ chá»©a nhiá»u thÆ° má»¥c con.', answer:true },
    { level:2, type:'true-false', question:'CÃ¢u 9b: Má»™t tá»‡p tin cÃ³ thá»ƒ chá»©a thÆ° má»¥c khÃ¡c.', answer:false },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi nhÃ¬n vÃ o sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y, em cÃ³ thá»ƒ biáº¿t Ä‘iá»u gÃ¬?', options:[
      {text:'A. Vá»‹ trÃ­ cá»§a cÃ¡c thÆ° má»¥c vÃ  tá»‡p tin', correct:true},
      {text:'B. MÃ u sáº¯c thÆ° má»¥c', correct:false},
      {text:'C. TÃªn cá»§a cÃ¡c pháº§n má»m chÆ¡i game', correct:false},
      {text:'D. HÃ¬nh dÃ¡ng chuá»™t mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 11: ThÆ° má»¥c náº±m trong má»™t thÆ° má»¥c khÃ¡c Ä‘Æ°á»£c gá»i lÃ  â€¦.', answer:'thÆ° má»¥c con' },
    { level:2, type:'matching', question:'CÃ¢u 12: HÃ£y ná»‘i hÃ nh Ä‘á»™ng vá»›i Ã½ nghÄ©a Ä‘Ãºng', left:[
      '1. Táº¡o thÆ° má»¥c má»›i','2. Xem sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y','3. Äáº·t tÃªn thÆ° má»¥c'
    ], right:[
      'a. Biáº¿t vá»‹ trÃ­ cÃ¡c tá»‡p trong mÃ¡y tÃ­nh','b. Sáº¯p xáº¿p dá»¯ liá»‡u gá»n gÃ ng hÆ¡n','c. Dá»… nháº­n biáº¿t ná»™i dung thÆ° má»¥c'
    ], pairs:[
      ['1. Táº¡o thÆ° má»¥c má»›i','b. Sáº¯p xáº¿p dá»¯ liá»‡u gá»n gÃ ng hÆ¡n'],
      ['2. Xem sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y','a. Biáº¿t vá»‹ trÃ­ cÃ¡c tá»‡p trong mÃ¡y tÃ­nh'],
      ['3. Äáº·t tÃªn thÆ° má»¥c','c. Dá»… nháº­n biáº¿t ná»™i dung thÆ° má»¥c']
    ]},

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: NÃªu vÃ­ dá»¥ sáº¯p xáº¿p thÆ° má»¥c theo sÆ¡ Ä‘á»“ hÃ¬nh cÃ¢y.', answer:'VÃ­ dá»¥: Há»c táº­p â†’ ToÃ¡n, Tiáº¿ng Viá»‡t â†’ má»—i thÆ° má»¥c con cÃ³ cÃ¡c bÃ i táº­p riÃªng.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi tháº¥y tá»‡p tin lá»™n xá»™n khÃ´ng theo thá»© tá»±, em sáº½ lÃ m gÃ¬?', answer:'Sáº¯p xáº¿p láº¡i, táº¡o thÃªm thÆ° má»¥c con Ä‘á»ƒ dá»… tÃ¬m hÆ¡n.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Chá»‰ ra Ä‘Ã¢u lÃ  thÆ° má»¥c gá»‘c, thÆ° má»¥c con vÃ  tá»‡p tin trong hÃ¬nh.', answer:'ThÆ° má»¥c gá»‘c á»Ÿ trÃªn cÃ¹ng; thÆ° má»¥c con lÃ  nhÃ¡nh dÆ°á»›i; tá»‡p tin á»Ÿ cuá»‘i nhÃ¡nh.' }
  ]
}
,

"BÃ i 9": {
  title: "BÃ i 9: Thá»±c hÃ nh vá»›i tá»‡p vÃ  thÆ° má»¥c",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Tá»‡p (file) lÃ  gÃ¬?', options:[
      {text:'A. LÃ  nÆ¡i chá»©a cÃ¡c thÆ° má»¥c', correct:false},
      {text:'B. LÃ  nÆ¡i lÆ°u trá»¯ thÃ´ng tin nhÆ° vÄƒn báº£n, hÃ¬nh áº£nh, bÃ i hÃ¡t, video...', correct:true},
      {text:'C. LÃ  biá»ƒu tÆ°á»£ng cá»§a pháº§n má»m', correct:false},
      {text:'D. LÃ  tÃªn cá»§a thÆ° má»¥c', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: ThÆ° má»¥c (folder) lÃ  gÃ¬?', options:[
      {text:'A. LÃ  táº­p há»£p chá»©a cÃ¡c tá»‡p hoáº·c thÆ° má»¥c khÃ¡c', correct:true},
      {text:'B. LÃ  má»™t pháº§n má»m trÃ² chÆ¡i', correct:false},
      {text:'C. LÃ  thanh cÃ´ng cá»¥ cá»§a mÃ¡y tÃ­nh', correct:false},
      {text:'D. LÃ  tá»‡p vÄƒn báº£n', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Äá»ƒ táº¡o thÆ° má»¥c má»›i, ta thá»±c hiá»‡n thao tÃ¡c nÃ o?', options:[
      {text:'A. NhÃ¡y chuá»™t pháº£i â†’ New â†’ Folder', correct:true},
      {text:'B. Nháº¥n phÃ­m Delete', correct:false},
      {text:'C. Má»Ÿ trÃ¬nh duyá»‡t web', correct:false},
      {text:'D. KÃ©o tá»‡p vÃ o thÃ¹ng rÃ¡c', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: Khi muá»‘n Ä‘á»•i tÃªn thÆ° má»¥c, ta:', options:[
      {text:'A. NhÃ¡y chuá»™t pháº£i â†’ chá»n Rename', correct:true},
      {text:'B. Nháº¥n phÃ­m Ctrl + N', correct:false},
      {text:'C. Nháº¥n phÃ­m Delete', correct:false},
      {text:'D. NhÃ¡y Ä‘Ãºp chuá»™t vÃ o thÆ° má»¥c', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Khi xÃ³a má»™t tá»‡p, tá»‡p Ä‘Ã³ sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘áº¿n:', options:[
      {text:'A. ThÃ¹ng rÃ¡c (Recycle Bin)', correct:true},
      {text:'B. ThÆ° má»¥c áº©n', correct:false},
      {text:'C. MÃ n hÃ¬nh ná»n', correct:false},
      {text:'D. Thanh cÃ´ng cá»¥', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Äá»ƒ má»Ÿ tá»‡p, em cáº§n:', options:[
      {text:'A. NhÃ¡y Ä‘Ãºp chuá»™t vÃ o biá»ƒu tÆ°á»£ng cá»§a tá»‡p', correct:true},
      {text:'B. KÃ©o tá»‡p ra mÃ n hÃ¬nh ná»n', correct:false},
      {text:'C. Nháº¥n phÃ­m Delete', correct:false},
      {text:'D. Má»Ÿ pháº§n má»m khÃ¡c', correct:false}
    ]},

    { level:2, type:'matching', question:'CÃ¢u 7: HÃ£y ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. ThÆ° má»¥c','2. Tá»‡p','3. ThÃ¹ng rÃ¡c'
    ], right:[
      'a. Chá»©a cÃ¡c tá»‡p vÃ  thÆ° má»¥c con','b. LÆ°u trá»¯ thÃ´ng tin, dá»¯ liá»‡u','c. NÆ¡i chá»©a tá»‡p hoáº·c thÆ° má»¥c bá»‹ xÃ³a'
    ], pairs:[
      ['1. ThÆ° má»¥c','a. Chá»©a cÃ¡c tá»‡p vÃ  thÆ° má»¥c con'],
      ['2. Tá»‡p','b. LÆ°u trá»¯ thÃ´ng tin, dá»¯ liá»‡u'],
      ['3. ThÃ¹ng rÃ¡c','c. NÆ¡i chá»©a tá»‡p hoáº·c thÆ° má»¥c bá»‹ xÃ³a']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 8a: Má»™t thÆ° má»¥c cÃ³ thá»ƒ chá»©a nhiá»u tá»‡p tin.', answer:true },
    { level:2, type:'true-false', question:'CÃ¢u 8b: Khi xÃ³a tá»‡p trong mÃ¡y tÃ­nh, tá»‡p Ä‘Ã³ biáº¿n máº¥t hoÃ n toÃ n.', answer:false },
    { level:2, type:'fill-in-blank', question:'CÃ¢u 9: Äá»ƒ xÃ³a tá»‡p hoáº·c thÆ° má»¥c, ta cÃ³ thá»ƒ chá»n tá»‡p rá»“i nháº¥n phÃ­m â€¦â€¦.', answer:'Delete' },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi muá»‘n di chuyá»ƒn tá»‡p tá»« thÆ° má»¥c nÃ y sang thÆ° má»¥c khÃ¡c, ta cÃ³ thá»ƒ:', options:[
      {text:'A. DÃ¹ng thao tÃ¡c kÃ©o tháº£ chuá»™t', correct:true},
      {text:'B. Nháº¥n phÃ­m Delete', correct:false},
      {text:'C. Táº¯t mÃ¡y tÃ­nh', correct:false},
      {text:'D. Nháº¥n Enter', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 11: HÃ£y ná»‘i thao tÃ¡c vá»›i cÃ´ng dá»¥ng Ä‘Ãºng', left:[
      '1. New â†’ Folder','2. Rename','3. Delete'
    ], right:[
      'a. Äá»•i tÃªn thÆ° má»¥c hoáº·c tá»‡p','b. Táº¡o thÆ° má»¥c má»›i','c. XÃ³a thÆ° má»¥c hoáº·c tá»‡p'
    ], pairs:[
      ['1. New â†’ Folder','b. Táº¡o thÆ° má»¥c má»›i'],
      ['2. Rename','a. Äá»•i tÃªn thÆ° má»¥c hoáº·c tá»‡p'],
      ['3. Delete','c. XÃ³a thÆ° má»¥c hoáº·c tá»‡p']
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 12: ThÃ¹ng rÃ¡c trÃªn mÃ¡y tÃ­nh cÃ³ tÃªn tiáº¿ng Anh lÃ  â€¦â€¦.', answer:'Recycle Bin' },

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Em hÃ£y nÃªu má»™t vÃ­ dá»¥ vá» viá»‡c táº¡o thÆ° má»¥c Ä‘á»ƒ sáº¯p xáº¿p há»c táº­p gá»n gÃ ng hÆ¡n.', answer:'VÃ­ dá»¥: Táº¡o thÆ° má»¥c â€œBÃ i há»c lá»›p 3â€ vá»›i cÃ¡c thÆ° má»¥c con ToÃ¡n, Tiáº¿ng Viá»‡t, Tin há»c.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi tháº¥y mÃ¡y tÃ­nh cÃ³ quÃ¡ nhiá»u tá»‡p náº±m lá»™n xá»™n trÃªn mÃ n hÃ¬nh, em sáº½ lÃ m gÃ¬ Ä‘á»ƒ dá»… tÃ¬m hÆ¡n?', answer:'Táº¡o thÆ° má»¥c theo chá»§ Ä‘á» vÃ  sáº¯p xáº¿p tá»‡p vÃ o Ä‘Ã³.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Thao tÃ¡c nÃ o Ä‘Ãºng Ä‘á»ƒ Ä‘á»•i tÃªn vÃ  xÃ³a tá»‡p theo yÃªu cáº§u?', answer:'Äá»•i tÃªn: NhÃ¡y chuá»™t pháº£i â†’ Rename. XÃ³a: NhÃ¡y chuá»™t pháº£i â†’ Delete.' }
  ]
}
,

"BÃ i 10": {
  title: "BÃ i 10: Báº£o vá»‡ thÃ´ng tin khi dÃ¹ng mÃ¡y tÃ­nh",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Báº£o vá»‡ thÃ´ng tin khi dÃ¹ng mÃ¡y tÃ­nh cÃ³ nghÄ©a lÃ :', options:[
      {text:'A. KhÃ´ng cho ai mÆ°á»£n mÃ¡y tÃ­nh', correct:false},
      {text:'B. Giá»¯ cho thÃ´ng tin cá»§a mÃ¬nh Ä‘Æ°á»£c an toÃ n, khÃ´ng bá»‹ máº¥t hoáº·c bá»‹ xem trá»™m', correct:true},
      {text:'C. XÃ³a háº¿t tá»‡p trong mÃ¡y tÃ­nh', correct:false},
      {text:'D. Chia sáº» thÃ´ng tin cho má»i ngÆ°á»i', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Máº­t kháº©u lÃ  gÃ¬?', options:[
      {text:'A. LÃ  má»™t Ä‘oáº¡n chá»¯ hoáº·c sá»‘ giÃºp báº£o vá»‡ thÃ´ng tin cÃ¡ nhÃ¢n', correct:true},
      {text:'B. LÃ  tÃªn Ä‘Äƒng nháº­p cá»§a em', correct:false},
      {text:'C. LÃ  trÃ² chÆ¡i trÃªn mÃ¡y tÃ­nh', correct:false},
      {text:'D. LÃ  hÃ¬nh ná»n mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Em nÃªn Ä‘áº·t máº­t kháº©u nhÆ° tháº¿ nÃ o Ä‘á»ƒ báº£o vá»‡ tá»‘t nháº¥t?', options:[
      {text:'A. Dá»… Ä‘oÃ¡n nhÆ° â€œ123456â€ hoáº·c â€œabcdâ€', correct:false},
      {text:'B. Ngáº¯n, dá»… nhá»›', correct:false},
      {text:'C. CÃ³ cáº£ chá»¯, sá»‘ vÃ  kÃ½ hiá»‡u Ä‘áº·c biá»‡t', correct:true},
      {text:'D. KhÃ´ng Ä‘áº·t máº­t kháº©u', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: Khi dÃ¹ng mÃ¡y tÃ­nh cÃ´ng cá»™ng, em nÃªn:', options:[
      {text:'A. ÄÄƒng nháº­p rá»“i quÃªn Ä‘Äƒng xuáº¥t', correct:false},
      {text:'B. KhÃ´ng Ä‘Äƒng nháº­p tÃ i khoáº£n cÃ¡ nhÃ¢n', correct:true},
      {text:'C. Ghi máº­t kháº©u ra giáº¥y dÃ¡n cáº¡nh mÃ¡y', correct:false},
      {text:'D. LÆ°u máº­t kháº©u vÃ o trÃ¬nh duyá»‡t', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Khi cÃ³ ngÆ°á»i láº¡ há»i thÃ´ng tin cÃ¡ nhÃ¢n, em nÃªn:', options:[
      {text:'A. NÃ³i tháº­t Ä‘á»ƒ káº¿t báº¡n', correct:false},
      {text:'B. KhÃ´ng tráº£ lá»i vÃ  bÃ¡o ngÆ°á»i lá»›n', correct:true},
      {text:'C. Gá»­i áº£nh vÃ  thÃ´ng tin cá»§a mÃ¬nh', correct:false},
      {text:'D. ÄÄƒng lÃªn máº¡ng cho vui', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Dáº¥u hiá»‡u nÃ o cho tháº¥y mÃ¡y tÃ­nh cÃ³ thá»ƒ bá»‹ nhiá»…m virus?', options:[
      {text:'A. MÃ¡y hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng', correct:false},
      {text:'B. MÃ¡y cháº­m, xuáº¥t hiá»‡n cá»­a sá»• láº¡ hoáº·c tá»‡p tá»± máº¥t', correct:true},
      {text:'C. MÃ n hÃ¬nh sÃ¡ng rÃµ hÆ¡n', correct:false},
      {text:'D. MÃ¡y tá»± táº¯t do háº¿t pin', correct:false}
    ]},

    { level:2, type:'matching', question:'CÃ¢u 7: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. Máº­t kháº©u','2. Virus mÃ¡y tÃ­nh','3. Sao lÆ°u dá»¯ liá»‡u'
    ], right:[
      'a. GiÃºp báº£o vá»‡ tÃ i khoáº£n cÃ¡ nhÃ¢n','b. CÃ³ thá»ƒ lÃ m há»ng hoáº·c xÃ³a dá»¯ liá»‡u','c. LÆ°u thÃ´ng tin quan trá»ng á»Ÿ nÆ¡i khÃ¡c'
    ], pairs:[
      ['1. Máº­t kháº©u','a. GiÃºp báº£o vá»‡ tÃ i khoáº£n cÃ¡ nhÃ¢n'],
      ['2. Virus mÃ¡y tÃ­nh','b. CÃ³ thá»ƒ lÃ m há»ng hoáº·c xÃ³a dá»¯ liá»‡u'],
      ['3. Sao lÆ°u dá»¯ liá»‡u','c. LÆ°u thÃ´ng tin quan trá»ng á»Ÿ nÆ¡i khÃ¡c']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 8a: KhÃ´ng nÃªn chia sáº» máº­t kháº©u cho báº¡n bÃ¨.', answer:true },
    { level:2, type:'true-false', question:'CÃ¢u 8b: Khi tháº¥y thÆ° láº¡, em nÃªn má»Ÿ ngay Ä‘á»ƒ xem ná»™i dung.', answer:false },
    { level:2, type:'fill-in-blank', question:'CÃ¢u 9: Äá»ƒ báº£o vá»‡ thÃ´ng tin, em nÃªn cÃ i Ä‘áº·t â€¦â€¦â€¦â€¦â€¦â€¦. trÃªn mÃ¡y tÃ­nh.', answer:'pháº§n má»m diá»‡t virus' },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi mÃ¡y tÃ­nh bá»‹ nhiá»…m virus, em nÃªn lÃ m gÃ¬?', options:[
      {text:'A. Tiáº¿p tá»¥c sá»­ dá»¥ng bÃ¬nh thÆ°á»ng', correct:false},
      {text:'B. BÃ¡o ngÆ°á»i lá»›n hoáº·c tháº§y cÃ´ Ä‘á»ƒ kiá»ƒm tra', correct:true},
      {text:'C. CÃ i thÃªm trÃ² chÆ¡i', correct:false},
      {text:'D. XÃ³a ngáº«u nhiÃªn cÃ¡c tá»‡p', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 11: HÃ£y ná»‘i thao tÃ¡c vá»›i cÃ´ng dá»¥ng', left:[
      '1. Äáº·t máº­t kháº©u','2. Sao lÆ°u dá»¯ liá»‡u','3. CÃ i pháº§n má»m diá»‡t virus'
    ], right:[
      'a. GiÃºp ngÆ°á»i khÃ¡c khÃ´ng má»Ÿ Ä‘Æ°á»£c mÃ¡y cá»§a em','b. Giá»¯ thÃ´ng tin an toÃ n khi mÃ¡y há»ng','c. PhÃ¡t hiá»‡n vÃ  tiÃªu diá»‡t virus'
    ], pairs:[
      ['1. Äáº·t máº­t kháº©u','a. GiÃºp ngÆ°á»i khÃ¡c khÃ´ng má»Ÿ Ä‘Æ°á»£c mÃ¡y cá»§a em'],
      ['2. Sao lÆ°u dá»¯ liá»‡u','b. Giá»¯ thÃ´ng tin an toÃ n khi mÃ¡y há»ng'],
      ['3. CÃ i pháº§n má»m diá»‡t virus','c. PhÃ¡t hiá»‡n vÃ  tiÃªu diá»‡t virus']
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 12: KhÃ´ng nÃªn táº£i â€¦â€¦â€¦â€¦â€¦â€¦.. hoáº·c â€¦â€¦â€¦â€¦â€¦â€¦. tá»« nhá»¯ng trang web khÃ´ng Ä‘Ã¡ng tin cáº­y.', answer:'pháº§n má»m; tá»‡p tin' },

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Em sáº½ lÃ m gÃ¬ náº¿u báº¡n cÃ¹ng lá»›p xin máº­t kháº©u tÃ i khoáº£n há»c trá»±c tuyáº¿n cá»§a em?', answer:'KhÃ´ng cho máº­t kháº©u; náº¿u cáº§n giÃºp, nhá» cÃ´ giÃ¡o há»— trá»£ báº¡n.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: HÃ£y nÃªu 2 viá»‡c em cÃ³ thá»ƒ lÃ m Ä‘á»ƒ báº£o vá»‡ thÃ´ng tin trong mÃ¡y tÃ­nh.', answer:'Äáº·t máº­t kháº©u máº¡nh; cÃ i pháº§n má»m diá»‡t virus vÃ  khÃ´ng má»Ÿ tá»‡p láº¡.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: HÃ£y chá»‰ ra 2 thao tÃ¡c trong hÃ¬nh giÃºp báº£o vá»‡ thÃ´ng tin.', answer:'Äáº·t máº­t kháº©u vÃ  sao lÆ°u dá»¯ liá»‡u lÃªn Ä‘Ã¡m mÃ¢y.' }
  ]
}
,

"BÃ i 11": {
  title: "BÃ i 11: BÃ i trÃ¬nh chiáº¿u cá»§a em",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m giÃºp táº¡o bÃ i trÃ¬nh chiáº¿u lÃ :', options:[
      {text:'A. Word', correct:false},
      {text:'B. Paint', correct:false},
      {text:'C. PowerPoint', correct:true},
      {text:'D. Excel', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Má»™t bÃ i trÃ¬nh chiáº¿u gá»“m nhiá»u:', options:[
      {text:'A. Trang giáº¥y', correct:false},
      {text:'B. Trang chiáº¿u (Slide)', correct:true},
      {text:'C. Tá»‡p nháº¡c', correct:false},
      {text:'D. Bá»©c tranh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Äá»ƒ táº¡o trang chiáº¿u má»›i, em chá»n:', options:[
      {text:'A. Insert â†’ New Slide', correct:true},
      {text:'B. File â†’ Save', correct:false},
      {text:'C. View â†’ Zoom', correct:false},
      {text:'D. Home â†’ Delete', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: Khi muá»‘n chÃ¨n hÃ¬nh áº£nh vÃ o slide, em chá»n:', options:[
      {text:'A. Insert â†’ Picture', correct:true},
      {text:'B. Design â†’ Themes', correct:false},
      {text:'C. File â†’ Save', correct:false},
      {text:'D. Review â†’ Spell Check', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Trong bÃ i trÃ¬nh chiáº¿u, chá»¯ viáº¿t Ä‘Æ°á»£c gá»i lÃ :', options:[
      {text:'A. VÄƒn báº£n', correct:true},
      {text:'B. HÃ¬nh ná»n', correct:false},
      {text:'C. TiÃªu Ä‘á»', correct:false},
      {text:'D. áº¢nh chÃ¨n', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Khi muá»‘n xem toÃ n bá»™ bÃ i trÃ¬nh chiáº¿u, em chá»n:', options:[
      {text:'A. File â†’ Print', correct:false},
      {text:'B. Slide Show â†’ From Beginning', correct:true},
      {text:'C. Home â†’ Copy', correct:false},
      {text:'D. Insert â†’ Shape', correct:false}
    ]},

    { level:2, type:'matching', question:'CÃ¢u 7: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng', left:[
      '1. Slide','2. PowerPoint','3. Slide Show'
    ], right:[
      'a. Trang trÃ¬nh chiáº¿u trong bÃ i','b. Pháº§n má»m táº¡o bÃ i trÃ¬nh chiáº¿u','c. Cháº¿ Ä‘á»™ trÃ¬nh chiáº¿u bÃ i cá»§a em'
    ], pairs:[
      ['1. Slide','a. Trang trÃ¬nh chiáº¿u trong bÃ i'],
      ['2. PowerPoint','b. Pháº§n má»m táº¡o bÃ i trÃ¬nh chiáº¿u'],
      ['3. Slide Show','c. Cháº¿ Ä‘á»™ trÃ¬nh chiáº¿u bÃ i cá»§a em']
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 8a: Trong PowerPoint, chá»‰ cÃ³ thá»ƒ chÃ¨n chá»¯, khÃ´ng thá»ƒ chÃ¨n hÃ¬nh.', answer:false },
    { level:2, type:'true-false', question:'CÃ¢u 8b: CÃ³ thá»ƒ táº¡o nhiá»u trang chiáº¿u trong má»™t bÃ i trÃ¬nh chiáº¿u.', answer:true },
    { level:2, type:'fill-in-blank', question:'CÃ¢u 9: Má»—i bÃ i trÃ¬nh chiáº¿u thÆ°á»ng cÃ³ má»™t trang Ä‘áº§u gá»i lÃ  â€¦â€¦.', answer:'trang tiÃªu Ä‘á»' },
    { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi muá»‘n chÃ¨n Ã¢m thanh vÃ o bÃ i trÃ¬nh chiáº¿u, em chá»n:', options:[
      {text:'A. Insert â†’ Audio', correct:true},
      {text:'B. Insert â†’ Picture', correct:false},
      {text:'C. Design â†’ Format', correct:false},
      {text:'D. Review â†’ Comment', correct:false}
    ]},
    { level:2, type:'matching', question:'CÃ¢u 11: HÃ£y ná»‘i thao tÃ¡c vá»›i cÃ´ng dá»¥ng', left:[
      '1. Insert â†’ New Slide','2. Insert â†’ Picture','3. Slide Show â†’ From Beginning'
    ], right:[
      'a. Táº¡o trang chiáº¿u má»›i','b. ChÃ¨n hÃ¬nh áº£nh','c. Xem bÃ i trÃ¬nh chiáº¿u tá»« Ä‘áº§u'
    ], pairs:[
      ['1. Insert â†’ New Slide','a. Táº¡o trang chiáº¿u má»›i'],
      ['2. Insert â†’ Picture','b. ChÃ¨n hÃ¬nh áº£nh'],
      ['3. Slide Show â†’ From Beginning','c. Xem bÃ i trÃ¬nh chiáº¿u tá»« Ä‘áº§u']
    ]},
    { level:2, type:'fill-in-blank', question:'CÃ¢u 12: Äá»ƒ lÆ°u bÃ i trÃ¬nh chiáº¿u, ta chá»n File â†’ â€¦â€¦.. â†’ chá»n nÆ¡i lÆ°u vÃ  Ä‘áº·t tÃªn tá»‡p.', answer:'Save' },

    { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Em hÃ£y nÃªu vÃ­ dá»¥ vá» chá»§ Ä‘á» bÃ i trÃ¬nh chiáº¿u mÃ  em cÃ³ thá»ƒ tá»± táº¡o.', answer:'VÃ­ dá»¥: Gia Ä‘Ã¬nh em; TrÆ°á»ng em; Báº£o vá»‡ mÃ´i trÆ°á»ng.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi trÃ¬nh chiáº¿u, náº¿u tháº¥y hÃ¬nh áº£nh chÆ°a Ä‘áº¹p, em cÃ³ thá»ƒ lÃ m gÃ¬ Ä‘á»ƒ bÃ i trÃ¬nh chiáº¿u háº¥p dáº«n hÆ¡n?', answer:'Chá»‰nh kÃ­ch thÆ°á»›c áº£nh, thÃªm hiá»‡u á»©ng hoáº·c chá»n ná»n Ä‘áº¹p.' },
    { level:3, type:'fill-in-blank', question:'CÃ¢u 15: a) TÃªn pháº§n má»m Ä‘ang dÃ¹ng? b) Slide â€œCáº£m Æ¡nâ€ dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?', answer:'a) PowerPoint; b) Káº¿t thÃºc bÃ i trÃ¬nh chiáº¿u vÃ  gá»­i lá»i chÃ o.' }
  ]
}
,

"BÃ i 12": {
  title: "BÃ i 12: TÃ¬m hiá»ƒu vá» tháº¿ giá»›i tá»± nhiÃªn",
  questions: [
    { level:1, type:'multiple-choice', question:'CÃ¢u 1: Internet giÃºp em tÃ¬m hiá»ƒu vá» Ä‘iá»u gÃ¬?', options:[
      {text:'A. CÃ¡c loÃ i Ä‘á»™ng váº­t, thá»±c váº­t', correct:true},
      {text:'B. TrÃ² chÆ¡i Ä‘iá»‡n tá»­', correct:false},
      {text:'C. Quáº£ng cÃ¡o mua hÃ ng', correct:false},
      {text:'D. Tin tá»©c ngÆ°á»i ná»•i tiáº¿ng', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 2: Äá»ƒ tÃ¬m hiá»ƒu vá» â€œrá»«ng nhiá»‡t Ä‘á»›iâ€, em cÃ³ thá»ƒ dÃ¹ng cÃ´ng cá»¥ nÃ o trÃªn mÃ¡y tÃ­nh?', options:[
      {text:'A. Paint', correct:false},
      {text:'B. TrÃ¬nh duyá»‡t web', correct:true},
      {text:'C. Word', correct:false},
      {text:'D. MÃ¡y tÃ­nh cáº§m tay', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 3: Khi tÃ¬m kiáº¿m thÃ´ng tin trÃªn Internet, em gÃµ tá»« khÃ³a vÃ o Ä‘Ã¢u?', options:[
      {text:'A. Thanh Ä‘á»‹a chá»‰', correct:false},
      {text:'B. Ã” tÃ¬m kiáº¿m cá»§a trÃ¬nh duyá»‡t', correct:true},
      {text:'C. Báº£ng tÃ­nh Excel', correct:false},
      {text:'D. Há»™p thoáº¡i trong Word', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 4: ÄÃ¢y lÃ  biá»ƒu tÆ°á»£ng cá»§a pháº§n má»m nÃ o?', options:[
      {text:'A. Microsoft Word', correct:false},
      {text:'B. Google Chrome', correct:true},
      {text:'C. Paint', correct:false},
      {text:'D. PowerPoint', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 5: Khi muá»‘n xem hÃ¬nh áº£nh vá» â€œhoa há»“ngâ€, em nÃªn chá»n má»¥c nÃ o trÃªn Google?', options:[
      {text:'A. Táº¥t cáº£ (All)', correct:false},
      {text:'B. HÃ¬nh áº£nh (Images)', correct:true},
      {text:'C. Video', correct:false},
      {text:'D. Tin tá»©c', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'CÃ¢u 6: Äá»ƒ Ä‘Ã³ng trang web Ä‘ang má»Ÿ, em báº¥m nÃºt nÃ o?', options:[
      {text:'A. Dáº¥u X (Close)', correct:true},
      {text:'B. Dáº¥u + (New Tab)', correct:false},
      {text:'C. Dáº¥u â†» (Refresh)', correct:false},
      {text:'D. Biá»ƒu tÆ°á»£ng kÃ­nh lÃºp (Search)', correct:false}
    ]},

    { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n chá»n lá»c thÃ´ng tin khi tÃ¬m hiá»ƒu trÃªn Internet?', options:[
      {text:'A. VÃ¬ táº¥t cáº£ thÃ´ng tin Ä‘á»u Ä‘Ãºng', correct:false},
      {text:'B. VÃ¬ cÃ³ thÃ´ng tin sai, khÃ´ng chÃ­nh xÃ¡c', correct:true},
      {text:'C. VÃ¬ máº¥t thá»i gian Ä‘á»c', correct:false},
      {text:'D. VÃ¬ Internet khÃ´ng cÃ³ thÃ´ng tin tháº­t', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi em tÃ¬m hiá»ƒu vá» Ä‘á»™ng váº­t quÃ½ hiáº¿m, em nÃªn chá»n trang web nÃ o?', options:[
      {text:'A. Trang giáº£i trÃ­', correct:false},
      {text:'B. Trang bÃ¡n hÃ ng', correct:false},
      {text:'C. Trang giÃ¡o dá»¥c hoáº·c khoa há»c', correct:true},
      {text:'D. Trang phim hoáº¡t hÃ¬nh', correct:false}
    ]},
    { level:2, type:'true-false', question:'CÃ¢u 9a: Em cÃ³ thá»ƒ tin vÃ o má»i thÃ´ng tin Ä‘á»c Ä‘Æ°á»£c trÃªn máº¡ng.', answer:false },
    { level:2, type:'true-false', question:'CÃ¢u 9b: Cáº§n há»i ngÆ°á»i lá»›n khi truy cáº­p trang web láº¡.', answer:true },
    { level:2, type:'matching', question:'CÃ¢u 10: Ná»‘i cÃ¡c cá»™t cho Ä‘Ãºng', left:[
      '1. Äá»™ng váº­t sá»‘ng á»Ÿ biá»ƒn','2. Thá»±c váº­t rá»«ng xanh','3. Chim sá»‘ng trÃªn cao'
    ], right:[
      'a. Rá»«ng nhiá»‡t Ä‘á»›i','b. Biá»ƒn','c. Báº§u trá»i'
    ], pairs:[
      ['1. Äá»™ng váº­t sá»‘ng á»Ÿ biá»ƒn','b. Biá»ƒn'],
      ['2. Thá»±c váº­t rá»«ng xanh','a. Rá»«ng nhiá»‡t Ä‘á»›i'],
      ['3. Chim sá»‘ng trÃªn cao','c. Báº§u trá»i']
    ]},
    { level:2, type:'multiple-choice', question:'CÃ¢u 11: Khi tÃ¬m hÃ¬nh áº£nh cÃ¢y cá»‘i, em nÃªn nháº­p tá»« khÃ³a nÃ o vÃ o Ã´ tÃ¬m kiáº¿m?', options:[
      {text:'A. cÃ¢y cá»‘i', correct:true},
      {text:'B. thÃº rá»«ng', correct:false},
      {text:'C. trÃ² chÆ¡i', correct:false},
      {text:'D. mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'CÃ¢u 12: Táº¡i sao cáº§n dÃ¹ng Internet má»™t cÃ¡ch an toÃ n?', options:[
      {text:'A. VÃ¬ cÃ³ thá»ƒ gáº·p trang web xáº¥u, Ä‘á»™c háº¡i', correct:true},
      {text:'B. VÃ¬ Internet khÃ´ng cÃ³ lá»£i', correct:false},
      {text:'C. VÃ¬ mÃ¡y tÃ­nh khÃ´ng má»Ÿ Ä‘Æ°á»£c máº¡ng', correct:false},
      {text:'D. VÃ¬ tá»‘n Ä‘iá»‡n', correct:false}
    ]},

    { level:3, type:'fill-in-blank-choice', question:'CÃ¢u 13: Khi muá»‘n biáº¿t thÃ´ng tin vá» â€œkhÃ­ háº­u Viá»‡t Namâ€, em má»Ÿ (â€¦â€¦) rá»“i nháº­p tá»« khÃ³a (â€¦â€¦).', choices:['trÃ¬nh duyá»‡t web','khÃ­ háº­u Viá»‡t Nam','Google Drive','mÃ¡y tÃ­nh cáº§m tay'], answer:['trÃ¬nh duyá»‡t web','khÃ­ háº­u Viá»‡t Nam'] },
    { level:3, type:'matching', question:'CÃ¢u 14: Ná»‘i thao tÃ¡c vá»›i hÃ nh Ä‘á»™ng Ä‘Ãºng', left:[
      '1. GÃµ tá»« khÃ³a vÃ o Ã´ tÃ¬m kiáº¿m','2. Nháº¥n Enter'
    ], right:[
      'a. Hiá»ƒn thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m','b. TÃ¬m thÃ´ng tin em muá»‘n biáº¿t'
    ], pairs:[
      ['1. GÃµ tá»« khÃ³a vÃ o Ã´ tÃ¬m kiáº¿m','b. TÃ¬m thÃ´ng tin em muá»‘n biáº¿t'],
      ['2. Nháº¥n Enter','a. Hiá»ƒn thá»‹ káº¿t quáº£ tÃ¬m kiáº¿m']
    ]},
    { level:3, type:'multiple-choice', question:'CÃ¢u 15: Khi em tÃ¬m tháº¥y hÃ¬nh áº£nh káº¿t quáº£ tÃ¬m kiáº¿m, em Ä‘Ã£ dÃ¹ng cÃ´ng cá»¥ nÃ o?', options:[
      {text:'A. Google Images', correct:true},
      {text:'B. YouTube', correct:false},
      {text:'C. Google Maps', correct:false},
      {text:'D. PowerPoint', correct:false}
    ]}
  ]
}
,
},
  "Lá»›p 4": {
    "BÃ i 1": {
      title: "BÃ i 1: Pháº§n cá»©ng vÃ  pháº§n má»m cá»§a mÃ¡y tÃ­nh",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n cá»©ng cá»§a mÃ¡y tÃ­nh lÃ  gÃ¬?', options:[
          {text:'A. CÃ¡c chÆ°Æ¡ng trÃ¬nh Ä‘iá»u khiá»ƒn mÃ¡y tÃ­nh', correct:false},
          {text:'B. CÃ¡c bá»™ pháº­n cÃ³ thá»ƒ sá», cáº§m, nhÃ¬n tháº¥y Ä‘Æ°á»£c', correct:true},
          {text:'C. CÃ¡c táº­p tin trong mÃ¡y', correct:false},
          {text:'D. CÃ¡c á»©ng dá»¥ng', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: CPU lÃ  viáº¿t táº¯t cá»§a cá»¥m tá»« nÃ o?', options:[
          {text:'A. Central Process Unit', correct:false},
          {text:'B. Central Processing Unit', correct:true},
          {text:'C. Center Programming Unit', correct:false},
          {text:'D. Control Processing Unit', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Bá»™ pháº­n nÃ o giÃºp hiá»ƒn thá»‹ hÃ¬nh áº£nh?', options:[
          {text:'A. BÃ n phÃ­m', correct:false},
          {text:'B. MÃ n hÃ¬nh', correct:true},
          {text:'C. Chuá»™t', correct:false},
          {text:'D. Loa', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Thiáº¿t bá»‹ nÃ o lÃ  pháº§n cá»©ng nháº­p dá»¯ liá»‡u?', options:[
          {text:'A. MÃ n hÃ¬nh', correct:false},
          {text:'B. MÃ¡y in', correct:false},
          {text:'C. BÃ n phÃ­m', correct:true},
          {text:'D. Loa', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'Pháº§n má»m lÃ  cÃ¡c thiáº¿t bá»‹ váº­t lÃ½ cá»§a mÃ¡y tÃ­nh.', correct:false},
          {text:'Há»‡ Ä‘iá»u hÃ nh lÃ  má»™t loáº¡i pháº§n má»m giÃºp Ä‘iá»u khiá»ƒn hoáº¡t Ä‘á»™ng cá»§a mÃ¡y tÃ­nh.', correct:true}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'MÃ n hÃ¬nh lÃ  thiáº¿t bá»‹ xuáº¥t dá»¯ liá»‡u.', correct:true},
          {text:'BÃ n phÃ­m lÃ  thiáº¿t bá»‹ xuáº¥t dá»¯ liá»‡u.', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Pháº§n má»m soáº¡n tháº£o vÄƒn báº£n lÃ :', options:[
          {text:'A. Paint', correct:false},
          {text:'B. Word', correct:true},
          {text:'C. Excel', correct:false},
          {text:'D. PowerPoint', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Pháº§n má»m nÃ o giÃºp em váº½ tranh trÃªn mÃ¡y tÃ­nh?', options:[
          {text:'A. Paint', correct:true},
          {text:'B. Word', correct:false},
          {text:'C. Excel', correct:false},
          {text:'D. PowerPoint', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Trong cÃ¡c thiáº¿t bá»‹ sau, thiáº¿t bá»‹ nÃ o lÃ  pháº§n cá»©ng xuáº¥t dá»¯ liá»‡u?', options:[
          {text:'A. Chuá»™t', correct:false},
          {text:'B. MÃ n hÃ¬nh', correct:true},
          {text:'C. BÃ n phÃ­m', correct:false},
          {text:'D. USB', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Náº¿u mÃ¡y tÃ­nh khÃ´ng cÃ³ pháº§n má»m, nÃ³ sáº½:', options:[
          {text:'A. Váº«n hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng', correct:false},
          {text:'B. KhÃ´ng thá»ƒ lÃ m viá»‡c Ä‘Æ°á»£c', correct:true},
          {text:'C. Tá»± Ä‘á»™ng táº¯t', correct:false},
          {text:'D. Cháº¡y cháº­m hÆ¡n', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i cá»™t A vá»›i cá»™t B cho phÃ¹ há»£p:', 
          columnA:['a. Chuá»™t','b. MÃ n hÃ¬nh','c. CPU','d. BÃ n phÃ­m'],
          columnB:['1. Thiáº¿t bá»‹ nháº­p dá»¯ liá»‡u','2. Thiáº¿t bá»‹ xuáº¥t dá»¯ liá»‡u','3. Xá»­ lÃ½ dá»¯ liá»‡u','4. Nháº­p vÄƒn báº£n'],
          correctMatches:{'a. Chuá»™t':'1. Thiáº¿t bá»‹ nháº­p dá»¯ liá»‡u','b. MÃ n hÃ¬nh':'2. Thiáº¿t bá»‹ xuáº¥t dá»¯ liá»‡u','c. CPU':'3. Xá»­ lÃ½ dá»¯ liá»‡u','d. BÃ n phÃ­m':'4. Nháº­p vÄƒn báº£n'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i pháº§n má»m vá»›i cÃ´ng dá»¥ng Ä‘Ãºng:', 
          columnA:['a. Paint','b. Word','c. Excel'],
          columnB:['1. Váº½ tranh','2. Soáº¡n tháº£o vÄƒn báº£n','3. TÃ­nh toÃ¡n, láº­p báº£ng'],
          correctMatches:{'a. Paint':'1. Váº½ tranh','b. Word':'2. Soáº¡n tháº£o vÄƒn báº£n','c. Excel':'3. TÃ­nh toÃ¡n, láº­p báº£ng'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Pháº§n cá»©ng gá»“m cÃ¡c bá»™ pháº­n nhÆ°: ________, ________, chuá»™t vÃ  CPU.', 
          sentence:'Pháº§n cá»©ng gá»“m cÃ¡c bá»™ pháº­n nhÆ°: [BLANK], [BLANK], chuá»™t vÃ  CPU.', 
          hints:['mÃ n hÃ¬nh','bÃ n phÃ­m'], correctAnswers:['mÃ n hÃ¬nh','bÃ n phÃ­m'] 
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Pháº§n má»m lÃ  táº­p há»£p cÃ¡c ________ giÃºp mÃ¡y tÃ­nh thá»±c hiá»‡n cÃ´ng viá»‡c.', 
          sentence:'Pháº§n má»m lÃ  táº­p há»£p cÃ¡c [BLANK] giÃºp mÃ¡y tÃ­nh thá»±c hiá»‡n cÃ´ng viá»‡c.', 
          hints:['chÆ°Æ¡ng trÃ¬nh','lá»‡nh'], correctAnswers:['chÆ°Æ¡ng trÃ¬nh'], altAnswers:['lá»‡nh']
        },
        { level:3, type:'matching', question:'CÃ¢u 15: Ná»‘i Ä‘Ãºng theo cáº·p kiáº¿n thá»©c â€“ cÃ´ng dá»¥ng:', 
          columnA:['1. CPU','2. BÃ n phÃ­m','3. MÃ n hÃ¬nh','4. Paint','5. Word'],
          columnB:['a. Bá»™ xá»­ lÃ½ trung tÃ¢m','b. Nháº­p dá»¯ liá»‡u vÄƒn báº£n','c. Hiá»ƒn thá»‹ hÃ¬nh áº£nh','d. Pháº§n má»m váº½ tranh','e. Soáº¡n tháº£o vÄƒn báº£n'],
          correctMatches:{'1. CPU':'a. Bá»™ xá»­ lÃ½ trung tÃ¢m','2. BÃ n phÃ­m':'b. Nháº­p dá»¯ liá»‡u vÄƒn báº£n','3. MÃ n hÃ¬nh':'c. Hiá»ƒn thá»‹ hÃ¬nh áº£nh','4. Paint':'d. Pháº§n má»m váº½ tranh','5. Word':'e. Soáº¡n tháº£o vÄƒn báº£n'}
        }
      ]
    }
,    
"BÃ i 2": {
  title: "BÃ i 2: GÃµ bÃ n phÃ­m Ä‘Ãºng cÃ¡ch",
  questions: [
    // Má»¨C 1 â€“ Nháº­n biáº¿t (6 cÃ¢u)
    { level:1, type:'multiple-choice', question:'Bá»™ pháº­n nÃ o cá»§a mÃ¡y tÃ­nh dÃ¹ng Ä‘á»ƒ gÃµ chá»¯ vÃ  sá»‘?', options:[
      {text:'A. Chuá»™t', correct:false},
      {text:'B. BÃ n phÃ­m', correct:true},
      {text:'C. MÃ n hÃ¬nh', correct:false},
      {text:'D. Loa', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Khi gÃµ phÃ­m, em cáº§n Ä‘áº·t ngÃ³n tay á»Ÿ hÃ ng phÃ­m nÃ o Ä‘á»ƒ báº¯t Ä‘áº§u?', options:[
      {text:'A. HÃ ng phÃ­m sá»‘', correct:false},
      {text:'B. HÃ ng phÃ­m giá»¯a (hÃ ng cÆ¡ sá»Ÿ)', correct:true},
      {text:'C. HÃ ng phÃ­m trÃªn', correct:false},
      {text:'D. HÃ ng phÃ­m dÆ°á»›i', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Hai phÃ­m cÃ³ gai nhá» Ä‘á»ƒ Ä‘áº·t ngÃ³n trá» tay trÃ¡i vÃ  pháº£i lÃ :', options:[
      {text:'A. A vÃ  S', correct:false},
      {text:'B. F vÃ  J', correct:true},
      {text:'C. D vÃ  K', correct:false},
      {text:'D. E vÃ  I', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'PhÃ­m Enter cÃ³ chá»©c nÄƒng gÃ¬?', options:[
      {text:'A. XÃ³a chá»¯', correct:false},
      {text:'B. Xuá»‘ng dÃ²ng hoáº·c thá»±c hiá»‡n lá»‡nh', correct:true},
      {text:'C. Di chuyá»ƒn con trá»', correct:false},
      {text:'D. Viáº¿t hoa', correct:false}
    ]},
    { level:1, type:'true-false', question:'ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
      {text:'Khi gÃµ phÃ­m, em nÃªn nhÃ¬n lÃ¢u vÃ o bÃ n phÃ­m Ä‘á»ƒ trÃ¡nh sai.', correct:false},
      {text:'Ngá»“i tháº³ng lÆ°ng, máº¯t nhÃ¬n mÃ n hÃ¬nh, hai tay Ä‘áº·t Ä‘Ãºng vá»‹ trÃ­ lÃ  tÆ° tháº¿ Ä‘Ãºng.', correct:true}
    ]},
    { level:1, type:'multiple-choice', question:'PhÃ­m nÃ o cÃ³ tÃ¡c dá»¥ng viáº¿t hoa khi giá»¯ cÃ¹ng vá»›i phÃ­m chá»¯?', options:[
      {text:'A. Shift', correct:true},
      {text:'B. Ctrl', correct:false},
      {text:'C. Alt', correct:false},
      {text:'D. Tab', correct:false}
    ]},

    // Má»¨C 2 â€“ Hiá»ƒu (6 cÃ¢u)
    { level:2, type:'multiple-choice', question:'Khi muá»‘n xÃ³a chá»¯ phÃ­a sau con trá», em dÃ¹ng phÃ­m nÃ o?', options:[
      {text:'A. Backspace', correct:false},
      {text:'B. Delete', correct:true},
      {text:'C. Shift', correct:false},
      {text:'D. Ctrl', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'VÃ¬ sao cáº§n há»c gÃµ phÃ­m báº±ng mÆ°á»i ngÃ³n?', options:[
      {text:'A. Cho vui', correct:false},
      {text:'B. Tiáº¿t kiá»‡m thá»i gian vÃ  báº£o vá»‡ sá»©c khá»e', correct:true},
      {text:'C. KhÃ´ng cÃ³ lÃ½ do', correct:false},
      {text:'D. Äá»ƒ láº¡', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Khi gÃµ phÃ­m, náº¿u em Ä‘á»ƒ tay sai vá»‹ trÃ­ sáº½:', options:[
      {text:'A. GÃµ nhanh hÆ¡n', correct:false},
      {text:'B. Dá»… gÃµ sai vÃ  má»i tay', correct:true},
      {text:'C. KhÃ´ng áº£nh hÆ°á»Ÿng gÃ¬', correct:false},
      {text:'D. LÃ m mÃ¡y tÃ­nh cháº­m', correct:false}
    ]},
    { level:2, type:'matching', question:'Ná»‘i tÃªn ngÃ³n tay vá»›i phÃ­m phÃ¹ há»£p:', 
      columnA:['a. NgÃ³n trá» trÃ¡i','b. NgÃ³n trá» pháº£i','c. NgÃ³n cÃ¡i','d. NgÃ³n Ãºt trÃ¡i'], 
      columnB:['1. F','2. J','3. PhÃ­m cÃ¡ch (Spacebar)','4. PhÃ­m Shift trÃ¡i'], 
      correctMatches:{'a. NgÃ³n trá» trÃ¡i':'1. F','b. NgÃ³n trá» pháº£i':'2. J','c. NgÃ³n cÃ¡i':'3. PhÃ­m cÃ¡ch (Spacebar)','d. NgÃ³n Ãºt trÃ¡i':'4. PhÃ­m Shift trÃ¡i'}
    },
    { level:2, type:'matching', question:'Ná»‘i hÃ nh Ä‘á»™ng Ä‘Ãºng vá»›i quy táº¯c gÃµ phÃ­m:', 
      columnA:['a. Äáº·t tay lÃªn hÃ ng cÆ¡ sá»Ÿ','b. Ngá»“i tháº³ng lÆ°ng','c. NhÃ¬n vÃ o mÃ n hÃ¬nh khi gÃµ'], 
      columnB:['1. GiÃºp nhá»› vá»‹ trÃ­ phÃ­m','2. Giá»¯ tÆ° tháº¿ thoáº£i mÃ¡i','3. Táº­p trung vÃ  gÃµ nhanh hÆ¡n'], 
      correctMatches:{'a. Äáº·t tay lÃªn hÃ ng cÆ¡ sá»Ÿ':'1. GiÃºp nhá»› vá»‹ trÃ­ phÃ­m','b. Ngá»“i tháº³ng lÆ°ng':'2. Giá»¯ tÆ° tháº¿ thoáº£i mÃ¡i','c. NhÃ¬n vÃ o mÃ n hÃ¬nh khi gÃµ':'3. Táº­p trung vÃ  gÃµ nhanh hÆ¡n'}
    },
    { level:2, type:'multiple-choice', question:'Khi gÃµ chá»¯ hoa, em cáº§n káº¿t há»£p phÃ­m nÃ o?', options:[
      {text:'A. Shift', correct:true},
      {text:'B. Alt', correct:false},
      {text:'C. Ctrl', correct:false},
      {text:'D. Caps Lock (nháº¥n giá»¯)', correct:false}
    ]},

    // Má»¨C 3 â€“ Váº­n dá»¥ng (3 cÃ¢u)
    { level:3, type:'fill-in-blank', question:'Em Ä‘áº·t hai ngÃ³n trá» tay trÃ¡i vÃ  tay pháº£i láº§n lÆ°á»£t lÃªn phÃ­m ______ vÃ  ______.', 
      sentence:'Em Ä‘áº·t hai ngÃ³n trá» tay trÃ¡i vÃ  tay pháº£i láº§n lÆ°á»£t lÃªn phÃ­m [BLANK] vÃ  [BLANK].', hints:['F','J'], correctAnswers:['F','J']
    },
    { level:3, type:'fill-in-blank', question:'Khi muá»‘n gÃµ chá»¯ cÃ¡i in hoa, em giá»¯ phÃ­m ______ rá»“i nháº¥n phÃ­m ______.', 
      sentence:'Khi muá»‘n gÃµ chá»¯ cÃ¡i in hoa, em giá»¯ phÃ­m [BLANK] rá»“i nháº¥n phÃ­m [BLANK].', hints:['Shift','chá»¯ cÃ¡i cáº§n gÃµ'], correctAnswers:['Shift','chá»¯ cÃ¡i cáº§n gÃµ']
    },
    { level:3, type:'multiple-choice', question:'TÆ° tháº¿ Ä‘Ãºng khi gÃµ phÃ­m lÃ :', options:[
      {text:'A. CÃºi sÃ¡t bÃ n phÃ­m, tay Ä‘áº·t tÃ¹y Ã½', correct:false},
      {text:'B. Ngá»“i tháº³ng lÆ°ng, máº¯t nhÃ¬n mÃ n hÃ¬nh, tay Ä‘áº·t Ä‘Ãºng hÃ ng cÆ¡ sá»Ÿ', correct:true},
      {text:'C. Náº±m ra bÃ n khi gÃµ', correct:false},
      {text:'D. NhÃ¬n bÃ n phÃ­m liÃªn tá»¥c Ä‘á»ƒ trÃ¡nh sai', correct:false}
    ]}
  ]
},
"BÃ i 3": {
  title: "BÃ i 3: ThÃ´ng tin trÃªn trang Web",
  questions: [
    { level:1, type:'multiple-choice', question:'Trang Web lÃ  gÃ¬?', options:[
      {text:'A. Má»™t pháº§n má»m chÆ¡i game', correct:false},
      {text:'B. Má»™t nÆ¡i lÆ°u trá»¯ thÃ´ng tin trÃªn Internet', correct:true},
      {text:'C. Má»™t thiáº¿t bá»‹ pháº§n cá»©ng', correct:false},
      {text:'D. Má»™t chÆ°Æ¡ng trÃ¬nh há»c gÃµ phÃ­m', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Äá»ƒ xem thÃ´ng tin trÃªn trang Web, em cáº§n dÃ¹ng pháº§n má»m nÃ o?', options:[
      {text:'A. Paint', correct:false},
      {text:'B. TrÃ¬nh duyá»‡t Web (Chrome, Edge, Firefox)', correct:true},
      {text:'C. Word', correct:false},
      {text:'D. PowerPoint', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Khi truy cáº­p má»™t trang Web, ta cáº§n cÃ³:', options:[
      {text:'A. MÃ¡y tÃ­nh, káº¿t ná»‘i Internet vÃ  trÃ¬nh duyá»‡t', correct:true},
      {text:'B. BÃºt vÃ  giáº¥y', correct:false},
      {text:'C. Chuá»™t mÃ¡y tÃ­nh', correct:false},
      {text:'D. á»” Ä‘Ä©a CD', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Pháº§n chá»¯ hoáº·c hÃ¬nh áº£nh mÃ  ta nháº¥n vÃ o Ä‘á»ƒ má»Ÿ trang khÃ¡c gá»i lÃ :', options:[
      {text:'A. ÄÆ°á»ng dáº«n (liÃªn káº¿t)', correct:true},
      {text:'B. Thanh cÃ´ng cá»¥', correct:false},
      {text:'C. Biá»ƒu tÆ°á»£ng', correct:false},
      {text:'D. NÃºt táº¯t', correct:false}
    ]},
    { level:1, type:'true-false', question:'ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
      {text:'TrÃ¬nh duyá»‡t Web dÃ¹ng Ä‘á»ƒ váº½ hÃ¬nh.', correct:false},
      {text:'Trang Web cÃ³ thá»ƒ chá»©a chá»¯, hÃ¬nh, Ã¢m thanh vÃ  video.', correct:true}
    ]},
    { level:1, type:'matching', question:'Ná»‘i thÃ´ng tin cho Ä‘Ãºng', 
      columnA:['1. Google Chrome','2. Google','3. https://'],
      columnB:['a. TrÃ¬nh duyá»‡t Web','b. Trang tÃ¬m kiáº¿m thÃ´ng tin','c. Äáº§u Ä‘á»‹a chá»‰ cá»§a má»™t trang Web'],
      correctMatches:{'1. Google Chrome':'a. TrÃ¬nh duyá»‡t Web','2. Google':'b. Trang tÃ¬m kiáº¿m thÃ´ng tin','3. https://':'c. Äáº§u Ä‘á»‹a chá»‰ cá»§a má»™t trang Web'}
    },

    { level:2, type:'multiple-choice', question:'Trang Web giÃ¡o dá»¥c giÃºp em:', options:[
      {text:'A. ChÆ¡i game giáº£i trÃ­', correct:false},
      {text:'B. Há»c vÃ  tÃ¬m hiá»ƒu kiáº¿n thá»©c', correct:true},
      {text:'C. Táº£i nháº¡c', correct:false},
      {text:'D. Gá»­i thÆ°', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Khi muá»‘n tÃ¬m thÃ´ng tin an toÃ n, em nÃªn:', options:[
      {text:'A. VÃ o trang Web cÃ³ nguá»“n tin rÃµ rÃ ng', correct:true},
      {text:'B. VÃ o báº¥t ká»³ trang nÃ o xuáº¥t hiá»‡n Ä‘áº§u tiÃªn', correct:false},
      {text:'C. Nháº¥n vÃ o quáº£ng cÃ¡o cÃ³ hÃ¬nh Ä‘áº¹p', correct:false},
      {text:'D. Há»i ngÆ°á»i láº¡ trÃªn máº¡ng', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Khi tháº¥y thÃ´ng tin khÃ´ng phÃ¹ há»£p trÃªn trang Web, em nÃªn lÃ m gÃ¬?', options:[
      {text:'A. Bá» qua vÃ  Ä‘Ã³ng trang Ä‘Ã³', correct:true},
      {text:'B. Gá»­i link cho báº¡n bÃ¨', correct:false},
      {text:'C. BÃ¬nh luáº­n pháº£n Ä‘á»‘i', correct:false},
      {text:'D. Chá»¥p láº¡i vÃ  Ä‘Äƒng máº¡ng xÃ£ há»™i', correct:false}
    ]},
    { level:2, type:'true-false', question:'ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
      {text:'Má»i trang Web Ä‘á»u an toÃ n vá»›i tráº» em.', correct:false},
      {text:'Cáº§n há»i ngÆ°á»i lá»›n khi truy cáº­p trang láº¡.', correct:true}
    ]},
    { level:2, type:'matching', question:'Ná»‘i Ä‘Ãºng chá»©c nÄƒng trÃ¬nh duyá»‡t', 
      columnA:['1. NÃºt â€œQuay láº¡iâ€','2. NÃºt â€œLÃ m má»›iâ€','3. Ã” Ä‘á»‹a chá»‰'],
      columnB:['a. Má»Ÿ trang Web má»›i','b. Xem láº¡i trang trÆ°á»›c Ä‘Ã³','c. GÃµ Ä‘á»‹a chá»‰ Web cáº§n truy cáº­p'],
      correctMatches:{'1. NÃºt â€œQuay láº¡iâ€':'b. Xem láº¡i trang trÆ°á»›c Ä‘Ã³','2. NÃºt â€œLÃ m má»›iâ€':'a. Má»Ÿ trang Web má»›i','3. Ã” Ä‘á»‹a chá»‰':'c. GÃµ Ä‘á»‹a chá»‰ Web cáº§n truy cáº­p'}
    },
    { level:2, type:'fill-in-blank', question:'Chá»n vÃ  Ä‘iá»n tá»«', 
      sentence:'a) Em dÃ¹ng [BLANK] Ä‘á»ƒ truy cáº­p vÃ  xem cÃ¡c trang Web. b) Má»—i trang Web cÃ³ má»™t [BLANK] riÃªng.',
      hints:['trÃ¬nh duyá»‡t web','Ä‘á»‹a chá»‰ (URL)'],
      correctAnswers:['trÃ¬nh duyá»‡t web','Ä‘á»‹a chá»‰ (URL)']
    },

    { level:3, type:'multiple-choice', question:'Khi cáº§n tÃ¬m hÃ¬nh áº£nh vá» â€œhoa há»“ngâ€ trÃªn Internet, em nÃªn:', options:[
      {text:'A. GÃµ tá»« khÃ³a â€œhoa há»“ngâ€ vÃ o Ã´ tÃ¬m kiáº¿m cá»§a Google', correct:true},
      {text:'B. VÃ o trang báº¥t ká»³', correct:false},
      {text:'C. Tá»± váº½ báº±ng Paint', correct:false},
      {text:'D. Há»i báº¡n', correct:false}
    ]},
    { level:3, type:'fill-in-blank', question:'Äiá»n tá»«', 
      sentence:'Khi Ä‘á»c thÃ´ng tin trÃªn Web, em cáº§n [BLANK] trÆ°á»›c khi tin vÃ  chia sáº».',
      hints:['kiá»ƒm tra nguá»“n hoáº·c há»i ngÆ°á»i lá»›n'],
      correctAnswers:['kiá»ƒm tra nguá»“n hoáº·c há»i ngÆ°á»i lá»›n']
    },
    { level:3, type:'matching', question:'Ná»‘i hoáº¡t Ä‘á»™ng vá»›i hÃ nh Ä‘á»™ng Ä‘Ãºng khi sá»­ dá»¥ng Internet', 
      columnA:['1. TÃ¬m thÃ´ng tin há»c táº­p','2. Giáº£i trÃ­','3. Gáº·p thÃ´ng tin xáº¥u'],
      columnB:['a. Chá»n trang giÃ¡o dá»¥c','b. Chá»n trÃ² chÆ¡i phÃ¹ há»£p lá»©a tuá»•i','c. BÃ¡o vá»›i cha máº¹ hoáº·c tháº§y cÃ´'],
      correctMatches:{'1. TÃ¬m thÃ´ng tin há»c táº­p':'a. Chá»n trang giÃ¡o dá»¥c','2. Giáº£i trÃ­':'b. Chá»n trÃ² chÆ¡i phÃ¹ há»£p lá»©a tuá»•i','3. Gáº·p thÃ´ng tin xáº¥u':'c. BÃ¡o vá»›i cha máº¹ hoáº·c tháº§y cÃ´'}
    }
  ]
},
"BÃ i 4": {
  title: "BÃ i 4: TÃ¬m kiáº¿m thÃ´ng tin trÃªn Internet",
  questions: [
    { level:1, type:'multiple-choice', question:'Internet lÃ  gÃ¬?', options:[
      {text:'A. Má»™t trÃ² chÆ¡i Ä‘iá»‡n tá»­', correct:false},
      {text:'B. Má»™t máº¡ng mÃ¡y tÃ­nh toÃ n cáº§u giÃºp chia sáº» thÃ´ng tin', correct:true},
      {text:'C. Má»™t chÆ°Æ¡ng trÃ¬nh soáº¡n tháº£o vÄƒn báº£n', correct:false},
      {text:'D. Má»™t pháº§n cá»©ng mÃ¡y tÃ­nh', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Pháº§n má»m giÃºp em tÃ¬m kiáº¿m thÃ´ng tin trÃªn Internet lÃ :', options:[
      {text:'A. Microsoft Word', correct:false},
      {text:'B. Google Chrome', correct:true},
      {text:'C. Paint', correct:false},
      {text:'D. PowerPoint', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Em gÃµ tá»« khÃ³a Ä‘á»ƒ tÃ¬m kiáº¿m á»Ÿ Ä‘Ã¢u?', options:[
      {text:'A. TrÃªn bÃ n phÃ­m', correct:false},
      {text:'B. Trong Ã´ tÃ¬m kiáº¿m cá»§a trang Google', correct:true},
      {text:'C. Trong pháº§n má»m váº½', correct:false},
      {text:'D. Trong Ã´ Ä‘á»‹a chá»‰', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Khi gÃµ tá»« khÃ³a â€œhoa há»“ngâ€, káº¿t quáº£ hiá»ƒn thá»‹ lÃ :', options:[
      {text:'A. HÃ¬nh áº£nh, bÃ i viáº¿t, video vá» hoa há»“ng', correct:true},
      {text:'B. TrÃ² chÆ¡i hoa há»“ng', correct:false},
      {text:'C. áº¢nh mÃ¨o', correct:false},
      {text:'D. VÄƒn báº£n báº¥t ká»³', correct:false}
    ]},
    { level:1, type:'true-false', question:'ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
      {text:'(1) Chá»‰ cÃ³ thá»ƒ tÃ¬m kiáº¿m thÃ´ng tin báº±ng Ä‘iá»‡n thoáº¡i.', correct:false},
      {text:'(2) TÃ¬m kiáº¿m trÃªn Internet giÃºp em há»c há»i nhiá»u Ä‘iá»u má»›i.', correct:true}
    ]},
    { level:1, type:'matching', question:'Ná»‘i cho Ä‘Ãºng', 
      columnA:['1. Google','2. Ã” tÃ¬m kiáº¿m','3. Káº¿t quáº£ tÃ¬m kiáº¿m'],
      columnB:['a. Trang Web tÃ¬m kiáº¿m thÃ´ng tin','b. NÆ¡i nháº­p tá»« khÃ³a tÃ¬m kiáº¿m','c. Danh sÃ¡ch thÃ´ng tin hiá»ƒn thá»‹ sau khi tÃ¬m'],
      correctMatches:{'1. Google':'a. Trang Web tÃ¬m kiáº¿m thÃ´ng tin','2. Ã” tÃ¬m kiáº¿m':'b. NÆ¡i nháº­p tá»« khÃ³a tÃ¬m kiáº¿m','3. Káº¿t quáº£ tÃ¬m kiáº¿m':'c. Danh sÃ¡ch thÃ´ng tin hiá»ƒn thá»‹ sau khi tÃ¬m'}
    },

    { level:2, type:'multiple-choice', question:'Äá»ƒ tÃ¬m hÃ¬nh áº£nh con mÃ¨o, em nÃªn gÃµ tá»« khÃ³a nÃ o?', options:[
      {text:'A. Con chÃ³', correct:false},
      {text:'B. HÃ¬nh con mÃ¨o', correct:true},
      {text:'C. Ä‚n sÃ¡ng', correct:false},
      {text:'D. MÃ¡y tÃ­nh', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Khi káº¿t quáº£ tÃ¬m kiáº¿m quÃ¡ nhiá»u, em nÃªn:', options:[
      {text:'A. Bá» qua', correct:false},
      {text:'B. Äá»c chá»n lá»c, xem trang Ä‘Ã¡ng tin cáº­y', correct:true},
      {text:'C. Má»Ÿ táº¥t cáº£ cÃ¡c trang', correct:false},
      {text:'D. Nháº¥n vÃ o quáº£ng cÃ¡o', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Äá»ƒ tÃ¬m bÃ i hÃ¡t â€œQuá»‘c ca Viá»‡t Namâ€, em nÃªn:', options:[
      {text:'A. GÃµ tá»« khÃ³a â€œQuá»‘c ca Viá»‡t Namâ€ vÃ o Ã´ tÃ¬m kiáº¿m', correct:true},
      {text:'B. Má»Ÿ pháº§n má»m Paint', correct:false},
      {text:'C. GÃµ tá»« khÃ³a â€œtrÃ² chÆ¡iâ€', correct:false},
      {text:'D. KhÃ´ng cáº§n gÃµ gÃ¬ cáº£', correct:false}
    ]},
    { level:2, type:'true-false', question:'Äiá»n Ä‘Ãºng/sai', statements:[
      {text:'(1) Khi tÃ¬m kiáº¿m thÃ´ng tin, em nÃªn Ä‘á»c ká»¹ tiÃªu Ä‘á» trÆ°á»›c khi má»Ÿ.', correct:true},
      {text:'(2) Má»i trang Web Ä‘á»u chÃ­nh xÃ¡c vÃ  an toÃ n.', correct:false}
    ]},
    { level:2, type:'matching', question:'Ná»‘i cho Ä‘Ãºng', 
      columnA:['1. Biá»ƒu tÆ°á»£ng kÃ­nh lÃºp ğŸ”','2. Nháº¥n Enter','3. Tá»« khÃ³a'],
      columnB:['a. Káº¿t quáº£ tÃ¬m kiáº¿m xuáº¥t hiá»‡n','b. Thá»±c hiá»‡n lá»‡nh tÃ¬m kiáº¿m','c. Chá»§ Ä‘á» cáº§n tÃ¬m'],
      correctMatches:{'1. Biá»ƒu tÆ°á»£ng kÃ­nh lÃºp ğŸ”':'b. Thá»±c hiá»‡n lá»‡nh tÃ¬m kiáº¿m','2. Nháº¥n Enter':'a. Káº¿t quáº£ tÃ¬m kiáº¿m xuáº¥t hiá»‡n','3. Tá»« khÃ³a':'c. Chá»§ Ä‘á» cáº§n tÃ¬m'}
    },
    { level:2, type:'fill-in-blank', question:'Chá»n vÃ  Ä‘iá»n tá»«', 
      sentence:'a) Khi muá»‘n tÃ¬m thÃ´ng tin, em nháº­p [BLANK] vÃ o Ã´ tÃ¬m kiáº¿m. b) TrÃ¬nh duyá»‡t Web phá»• biáº¿n lÃ  [BLANK].',
      hints:['tá»« khÃ³a','Google Chrome'],
      correctAnswers:['tá»« khÃ³a','Google Chrome']
    },

    { level:3, type:'multiple-choice', question:'Khi muá»‘n tÃ¬m thÃ´ng tin vá» â€œcÃ¡ch chÄƒm sÃ³c cÃ¢y hoa há»“ngâ€, em nÃªn:', options:[
      {text:'A. GÃµ tá»« khÃ³a â€œchÄƒm sÃ³c hoa há»“ngâ€', correct:true},
      {text:'B. GÃµ â€œchÄƒm sÃ³c cÃ¢yâ€', correct:false},
      {text:'C. Chá»‰ gÃµ â€œhoaâ€', correct:false},
      {text:'D. KhÃ´ng gÃµ gÃ¬', correct:false}
    ]},
    { level:3, type:'fill-in-blank', question:'Chá»n vÃ  Ä‘iá»n tá»«', 
      sentence:'Khi tháº¥y trang Web cÃ³ ná»™i dung khÃ´ng phÃ¹ há»£p, em nÃªn [BLANK].',
      hints:['Ä‘Ã³ng trang láº¡i vÃ  bÃ¡o vá»›i ngÆ°á»i lá»›n'],
      correctAnswers:['Ä‘Ã³ng trang láº¡i vÃ  bÃ¡o vá»›i ngÆ°á»i lá»›n']
    },
    { level:3, type:'matching', question:'Ná»‘i hÃ nh Ä‘á»™ng vá»›i viá»‡c lÃ m Ä‘Ãºng khi tÃ¬m kiáº¿m thÃ´ng tin', 
      columnA:['1. TÃ¬m kiáº¿m bÃ i há»c ToÃ¡n','2. Gáº·p quáº£ng cÃ¡o khÃ´ng liÃªn quan','3. Cáº§n hÃ¬nh áº£nh thiÃªn nhiÃªn'],
      columnB:['a. Chá»n trang giÃ¡o dá»¥c Ä‘Ã¡ng tin cáº­y','b. KhÃ´ng báº¥m vÃ o','c. DÃ¹ng pháº§n â€œHÃ¬nh áº£nhâ€ cá»§a Google'],
      correctMatches:{'1. TÃ¬m kiáº¿m bÃ i há»c ToÃ¡n':'a. Chá»n trang giÃ¡o dá»¥c Ä‘Ã¡ng tin cáº­y','2. Gáº·p quáº£ng cÃ¡o khÃ´ng liÃªn quan':'b. KhÃ´ng báº¥m vÃ o','3. Cáº§n hÃ¬nh áº£nh thiÃªn nhiÃªn':'c. DÃ¹ng pháº§n â€œHÃ¬nh áº£nhâ€ cá»§a Google'}
    }
  ]
},
"BÃ i 5": {
  title: "BÃ i 5: Thao tÃ¡c vá»›i tá»‡p vÃ  thÆ° má»¥c",
  questions: [
    { level:1, type:'multiple-choice', question:'Tá»‡p (file) lÃ  gÃ¬?', options:[
      {text:'A. LÃ  nÆ¡i lÆ°u trá»¯ dá»¯ liá»‡u trong mÃ¡y tÃ­nh', correct:true},
      {text:'B. LÃ  thiáº¿t bá»‹ nháº­p dá»¯ liá»‡u', correct:false},
      {text:'C. LÃ  chÆ°Æ¡ng trÃ¬nh mÃ¡y tÃ­nh', correct:false},
      {text:'D. LÃ  máº¡ng Internet', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'ThÆ° má»¥c (folder) dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?', options:[
      {text:'A. Äá»ƒ gÃµ vÄƒn báº£n', correct:false},
      {text:'B. Äá»ƒ chá»©a cÃ¡c tá»‡p tin', correct:true},
      {text:'C. Äá»ƒ nghe nháº¡c', correct:false},
      {text:'D. Äá»ƒ káº¿t ná»‘i máº¡ng', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Biá»ƒu tÆ°á»£ng nÃ o thÆ°á»ng dÃ¹ng Ä‘á»ƒ má»Ÿ thÆ° má»¥c?', options:[
      {text:'A. ğŸ–¼ï¸', correct:false},
      {text:'B. ğŸ“‚', correct:true},
      {text:'C. ğŸ§', correct:false},
      {text:'D. ğŸ’¾', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Äá»ƒ má»Ÿ má»™t tá»‡p, em cáº§n thá»±c hiá»‡n thao tÃ¡c nÃ o?', options:[
      {text:'A. Nháº¥n Ä‘Ãºp chuá»™t trÃ¡i vÃ o biá»ƒu tÆ°á»£ng tá»‡p', correct:true},
      {text:'B. Nháº¥n chuá»™t pháº£i', correct:false},
      {text:'C. KÃ©o tá»‡p ra ngoÃ i mÃ n hÃ¬nh', correct:false},
      {text:'D. Táº¯t mÃ¡y', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Khi em muá»‘n xÃ³a má»™t tá»‡p khÃ´ng cáº§n thiáº¿t, em cÃ³ thá»ƒ:', options:[
      {text:'A. Nháº¥n Delete trÃªn bÃ n phÃ­m', correct:true},
      {text:'B. Nháº¥n Enter', correct:false},
      {text:'C. Nháº¥n Ctrl + C', correct:false},
      {text:'D. Nháº¥n Shift', correct:false}
    ]},
    { level:1, type:'multiple-choice', question:'Khi tá»‡p bá»‹ xÃ³a, tá»‡p sáº½ táº¡m thá»i Ä‘Æ°á»£c Ä‘Æ°a vÃ o Ä‘Ã¢u?', options:[
      {text:'A. ThÆ° má»¥c Documents', correct:false},
      {text:'B. ThÃ¹ng rÃ¡c (Recycle Bin)', correct:true},
      {text:'C. á»” Ä‘Ä©a D', correct:false},
      {text:'D. MÃ n hÃ¬nh chÃ­nh', correct:false}
    ]},

    { level:2, type:'multiple-choice', question:'Má»¥c Ä‘Ã­ch cá»§a viá»‡c táº¡o thÆ° má»¥c má»›i lÃ  gÃ¬?', options:[
      {text:'A. Äá»ƒ lÆ°u táº¡m', correct:false},
      {text:'B. Äá»ƒ sáº¯p xáº¿p vÃ  quáº£n lÃ½ cÃ¡c tá»‡p dá»… dÃ ng hÆ¡n', correct:true},
      {text:'C. Äá»ƒ trang trÃ­ mÃ¡y tÃ­nh', correct:false},
      {text:'D. Äá»ƒ nghe nháº¡c', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Äá»ƒ Ä‘á»•i tÃªn má»™t tá»‡p, em chá»n tá»‡p vÃ  nháº¥n:', options:[
      {text:'A. F2', correct:true},
      {text:'B. F1', correct:false},
      {text:'C. F5', correct:false},
      {text:'D. Delete', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Khi sao chÃ©p tá»‡p tá»« thÆ° má»¥c nÃ y sang thÆ° má»¥c khÃ¡c, em dÃ¹ng tá»• há»£p phÃ­m:', options:[
      {text:'A. Ctrl + X vÃ  Ctrl + V', correct:false},
      {text:'B. Ctrl + C vÃ  Ctrl + V', correct:true},
      {text:'C. Ctrl + A', correct:false},
      {text:'D. Shift + Delete', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Tá»‡p vÄƒn báº£n thÆ°á»ng cÃ³ pháº§n má»Ÿ rá»™ng lÃ :', options:[
      {text:'A. .jpg', correct:false},
      {text:'B. .mp3', correct:false},
      {text:'C. .docx', correct:true},
      {text:'D. .png', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Tá»‡p hÃ¬nh áº£nh thÆ°á»ng cÃ³ pháº§n má»Ÿ rá»™ng lÃ :', options:[
      {text:'A. .exe', correct:false},
      {text:'B. .png', correct:true},
      {text:'C. .txt', correct:false},
      {text:'D. .docx', correct:false}
    ]},
    { level:2, type:'multiple-choice', question:'Äá»ƒ xem ná»™i dung cá»§a má»™t tá»‡p, em cáº§n lÃ m gÃ¬?', options:[
      {text:'A. Nháº¥p Ä‘Ãºp vÃ o tá»‡p', correct:true},
      {text:'B. XÃ³a tá»‡p', correct:false},
      {text:'C. Äá»•i tÃªn tá»‡p', correct:false},
      {text:'D. Sao chÃ©p tá»‡p', correct:false}
    ]},

    { level:3, type:'true-false', question:'ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
      {text:'a) ThÆ° má»¥c cÃ³ thá»ƒ chá»©a nhiá»u tá»‡p vÃ  thÆ° má»¥c con.', correct:true},
      {text:'b) KhÃ´ng thá»ƒ táº¡o thÆ° má»¥c má»›i trong mÃ¡y tÃ­nh.', correct:false}
    ]},
    { level:3, type:'matching', question:'Ná»‘i thao tÃ¡c á»Ÿ cá»™t A vá»›i káº¿t quáº£ á»Ÿ cá»™t B', 
      columnA:['1. Ctrl + C','2. Ctrl + V','3. Ctrl + X','4. Delete'],
      columnB:['a. XÃ³a tá»‡p','b. DÃ¡n tá»‡p','c. Sao chÃ©p tá»‡p','d. Cáº¯t tá»‡p'],
      correctMatches:{'1. Ctrl + C':'c. Sao chÃ©p tá»‡p','2. Ctrl + V':'b. DÃ¡n tá»‡p','3. Ctrl + X':'d. Cáº¯t tá»‡p','4. Delete':'a. XÃ³a tá»‡p'}
    },
    { level:3, type:'fill-in-blank', question:'Chá»n vÃ  Ä‘iá»n tá»«', 
      sentence:'a) Khi táº¡o thÆ° má»¥c má»›i, em chá»n chuá»™t pháº£i â†’ chá»n [BLANK] â†’ chá»n Folder. b) Äá»ƒ Ä‘á»•i tÃªn tá»‡p, em cÃ³ thá»ƒ nháº¥n phÃ­m [BLANK] hoáº·c chá»n Rename.',
      hints:['New','F2'],
      correctAnswers:['New','F2']
    }
  ]
}

  ,
    "BÃ i 6": {
      title: "BÃ i 6: Sá»­ dá»¥ng pháº§n má»m khi Ä‘Æ°á»£c phÃ©p",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m mÃ¡y tÃ­nh lÃ  gÃ¬?', options:[
          {text:'A. LÃ  thiáº¿t bá»‹ pháº§n cá»©ng', correct:false},
          {text:'B. LÃ  táº­p há»£p cÃ¡c chÆ°Æ¡ng trÃ¬nh giÃºp mÃ¡y tÃ­nh lÃ m viá»‡c', correct:true},
          {text:'C. LÃ  trÃ² chÆ¡i Ä‘iá»‡n tá»­', correct:false},
          {text:'D. LÃ  dá»¯ liá»‡u trong mÃ¡y', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Khi sá»­ dá»¥ng pháº§n má»m, em cáº§n tuÃ¢n thá»§ Ä‘iá»u gÃ¬?', options:[
          {text:'A. Sá»­ dá»¥ng thoáº£i mÃ¡i, khÃ´ng cáº§n xin phÃ©p', correct:false},
          {text:'B. Chia sáº» pháº§n má»m cho báº¡n bÃ¨', correct:false},
          {text:'C. Sá»­ dá»¥ng khi Ä‘Æ°á»£c phÃ©p', correct:true},
          {text:'D. Tá»± Ã½ cÃ i Ä‘áº·t pháº§n má»m láº¡', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Pháº§n má»m cÃ³ báº£n quyá»n nghÄ©a lÃ  gÃ¬?', options:[
          {text:'A. LÃ  pháº§n má»m miá»…n phÃ­', correct:false},
          {text:'B. LÃ  pháº§n má»m pháº£i tráº£ phÃ­ hoáº·c Ä‘Æ°á»£c cáº¥p phÃ©p má»›i dÃ¹ng', correct:true},
          {text:'C. LÃ  pháº§n má»m ai cÅ©ng táº£i Ä‘Æ°á»£c', correct:false},
          {text:'D. LÃ  pháº§n má»m bá»‹ há»ng', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Biá»ƒu tÆ°á»£ng cá»§a báº£n quyá»n pháº§n má»m thÆ°á»ng cÃ³ kÃ½ hiá»‡u:', options:[
          {text:'A. ğŸ…°ï¸', correct:false},
          {text:'B. Â©', correct:true},
          {text:'C. Â®', correct:false},
          {text:'D. â„¢', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 5: Em cÃ³ thá»ƒ táº£i pháº§n má»m tá»« Ä‘Ã¢u Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n?', options:[
          {text:'A. Trang web chÃ­nh thá»©c cá»§a nhÃ  sáº£n xuáº¥t', correct:true},
          {text:'B. CÃ¡c trang khÃ´ng rÃµ nguá»“n', correct:false},
          {text:'C. Qua báº¡n bÃ¨ gá»­i', correct:false},
          {text:'D. TrÃªn máº¡ng xÃ£ há»™i', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 6: Viá»‡c sao chÃ©p pháº§n má»m báº£n quyá»n mÃ  khÃ´ng Ä‘Æ°á»£c phÃ©p lÃ  hÃ nh vi:', options:[
          {text:'A. ÄÃºng quy Ä‘á»‹nh', correct:false},
          {text:'B. Vi pháº¡m báº£n quyá»n', correct:true},
          {text:'C. BÃ¬nh thÆ°á»ng', correct:false},
          {text:'D. Tá»‘t vÃ¬ giÃºp tiáº¿t kiá»‡m', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n dÃ¹ng pháº§n má»m khi Ä‘Æ°á»£c phÃ©p?', options:[
          {text:'A. VÃ¬ Ä‘Ã³ lÃ  quy Ä‘á»‹nh phÃ¡p luáº­t vÃ  giÃºp trÃ¡nh vi pháº¡m', correct:true},
          {text:'B. VÃ¬ pháº§n má»m Ä‘Æ°á»£c phÃ©p cháº¡y nhanh hÆ¡n', correct:false},
          {text:'C. VÃ¬ pháº§n má»m miá»…n phÃ­ dá»… dÃ¹ng hÆ¡n', correct:false},
          {text:'D. VÃ¬ báº¡n bÃ¨ Ä‘á»u lÃ m váº­y', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi em muá»‘n cÃ i Ä‘áº·t pháº§n má»m má»›i trÃªn mÃ¡y tÃ­nh á»Ÿ trÆ°á»ng, em nÃªn lÃ m gÃ¬?', options:[
          {text:'A. Tá»± cÃ i Ä‘áº·t luÃ´n', correct:false},
          {text:'B. Há»i Ã½ kiáº¿n tháº§y cÃ´ hoáº·c ngÆ°á»i phá»¥ trÃ¡ch', correct:true},
          {text:'C. Nhá» báº¡n giÃºp', correct:false},
          {text:'D. Táº£i báº¥t ká»³ pháº§n má»m nÃ o tháº¥y hay', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Náº¿u pháº§n má»m yÃªu cáº§u tráº£ phÃ­, em nÃªn lÃ m gÃ¬?', options:[
          {text:'A. TÃ¬m báº£n sao miá»…n phÃ­ trÃªn máº¡ng', correct:false},
          {text:'B. BÃ¡o ngÆ°á»i lá»›n biáº¿t vÃ  xin phÃ©p trÆ°á»›c khi mua', correct:true},
          {text:'C. Táº£i báº£n khÃ¡c', correct:false},
          {text:'D. Bá» qua cáº£nh bÃ¡o', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Pháº§n má»m miá»…n phÃ­ (free software) lÃ  gÃ¬?', options:[
          {text:'A. LÃ  pháº§n má»m Ä‘Æ°á»£c dÃ¹ng vÃ  chia sáº» há»£p phÃ¡p', correct:true},
          {text:'B. LÃ  pháº§n má»m khÃ´ng cÃ³ báº£n quyá»n', correct:false},
          {text:'C. LÃ  pháº§n má»m ai cÅ©ng tá»± táº¡o', correct:false},
          {text:'D. LÃ  pháº§n má»m khÃ´ng an toÃ n', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 11: Khi em sao chÃ©p pháº§n má»m cá»§a ngÆ°á»i khÃ¡c mÃ  khÃ´ng xin phÃ©p, em Ä‘Ã£:', options:[
          {text:'A. LÃ m Ä‘Ãºng quy Ä‘á»‹nh', correct:false},
          {text:'B. Vi pháº¡m báº£n quyá»n', correct:true},
          {text:'C. GiÃºp ngÆ°á»i khÃ¡c tiáº¿t kiá»‡m', correct:false},
          {text:'D. LÃ m viá»‡c tá»‘t', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 12: Em cÃ³ thá»ƒ nháº­n biáº¿t pháº§n má»m khÃ´ng an toÃ n qua Ä‘Ã¢u?', options:[
          {text:'A. Nguá»“n táº£i khÃ´ng rÃµ rÃ ng, cÃ³ cáº£nh bÃ¡o virus', correct:true},
          {text:'B. CÃ³ nhiá»u mÃ u sáº¯c', correct:false},
          {text:'C. CÃ³ hÃ¬nh con mÃ¨o', correct:false},
          {text:'D. CÃ³ biá»ƒu tÆ°á»£ng Ä‘áº¹p', correct:false}
        ]},

        { level:3, type:'true-false', question:'CÃ¢u 13: ÄÃ¡nh dáº¥u ÄÃºng (Ä) hoáº·c Sai (S)', statements:[
          {text:'a) Em cÃ³ thá»ƒ chia sáº» pháº§n má»m báº£n quyá»n cho báº¡n bÃ¨ mÃ  khÃ´ng cáº§n xin phÃ©p.', correct:false},
          {text:'b) Khi táº£i pháº§n má»m, em nÃªn chá»n nguá»“n Ä‘Ã¡ng tin cáº­y.', correct:true}
        ]},
        { level:3, type:'matching', question:'CÃ¢u 14: HÃ£y ná»‘i cá»™t A vÃ  cá»™t B sao cho Ä‘Ãºng ná»™i dung.', 
          columnA:['1. Mua pháº§n má»m báº£n quyá»n','2. Táº£i pháº§n má»m tá»« trang chÃ­nh thá»©c','3. Sao chÃ©p pháº§n má»m láº­u'],
          columnB:['a. Vi pháº¡m báº£n quyá»n','b. Äáº£m báº£o an toÃ n','c. Thá»±c hiá»‡n Ä‘Ãºng quy Ä‘á»‹nh'],
          correctMatches:{'1. Mua pháº§n má»m báº£n quyá»n':'c. Thá»±c hiá»‡n Ä‘Ãºng quy Ä‘á»‹nh','2. Táº£i pháº§n má»m tá»« trang chÃ­nh thá»©c':'b. Äáº£m báº£o an toÃ n','3. Sao chÃ©p pháº§n má»m láº­u':'a. Vi pháº¡m báº£n quyá»n'}
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 15: Äiá»n cÃ¡c tá»« thÃ­ch há»£p vÃ o chá»— trá»‘ng: (báº£n quyá»n, cho phÃ©p, chÃ­nh thá»©c, vi pháº¡m)', 
          sentence:'a) Chá»‰ sá»­ dá»¥ng pháº§n má»m khi Ä‘Æ°á»£c ngÆ°á»i khÃ¡c [BLANK]. b) Sao chÃ©p hoáº·c chia sáº» pháº§n má»m mÃ  khÃ´ng cÃ³ [BLANK] lÃ  hÃ nh vi [BLANK].',
          hints:['cho phÃ©p','báº£n quyá»n','vi pháº¡m'], correctAnswers:['cho phÃ©p','báº£n quyá»n','vi pháº¡m']
        }
      ]
    },
    "BÃ i 7": {
      title: "BÃ i 7: Táº¡o bÃ i trÃ¬nh chiáº¿u",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m thÆ°á»ng dÃ¹ng Ä‘á»ƒ táº¡o bÃ i trÃ¬nh chiáº¿u lÃ :', options:[
          {text:'A. Word', correct:false},
          {text:'B. PowerPoint', correct:true},
          {text:'C. Excel', correct:false},
          {text:'D. Paint', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Má»™t bÃ i trÃ¬nh chiáº¿u gá»“m nhiá»u:', options:[
          {text:'A. Trang tÃ­nh', correct:false},
          {text:'B. Trang váº½', correct:false},
          {text:'C. Trang chiáº¿u', correct:true},
          {text:'D. Táº­p tin', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Chá»n biá»ƒu tÆ°á»£ng pháº§n má»m dÃ¹ng Ä‘á»ƒ táº¡o bÃ i trÃ¬nh chiáº¿u:', options:[
          {text:'A. Word', correct:false},
          {text:'B. Excel', correct:false},
          {text:'C. PowerPoint', correct:true},
          {text:'D. Paint', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Táº­p tin bÃ i trÃ¬nh chiáº¿u cÃ³ pháº§n má»Ÿ rá»™ng lÃ :', options:[
          {text:'.docx', correct:false},
          {text:'.pptx', correct:true},
          {text:'.xlsx', correct:false},
          {text:'.jpg', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Má»—i bÃ i trÃ¬nh chiáº¿u chá»‰ cÃ³ thá»ƒ chá»©a má»™t trang chiáº¿u duy nháº¥t.', statements:[
          {text:'(Ä/S)', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: PowerPoint giÃºp trÃ¬nh bÃ y ná»™i dung báº±ng chá»¯, hÃ¬nh áº£nh vÃ  Ã¢m thanh.', statements:[
          {text:'(Ä/S)', correct:true}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Khi muá»‘n thÃªm trang chiáº¿u má»›i, ta chá»n:', options:[
          {text:'A. Insert â†’ New Slide', correct:false},
          {text:'B. Home â†’ New Slide', correct:true},
          {text:'C. File â†’ New', correct:false},
          {text:'D. View â†’ New Slide', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Äá»ƒ thay Ä‘á»•i bá»‘ cá»¥c trang chiáº¿u, ta chá»n:', options:[
          {text:'A. Design', correct:false},
          {text:'B. Insert', correct:false},
          {text:'C. Layout', correct:true},
          {text:'D. Home', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Trong PowerPoint, Ä‘á»ƒ chÃ¨n hÃ¬nh áº£nh vÃ o trang chiáº¿u, em chá»n:', options:[
          {text:'A. Insert â†’ Picture', correct:true},
          {text:'B. Design â†’ Picture', correct:false},
          {text:'C. View â†’ Picture', correct:false},
          {text:'D. Slide Show â†’ Picture', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi trÃ¬nh chiáº¿u, nháº¥n phÃ­m nÃ o Ä‘á»ƒ chuyá»ƒn sang trang chiáº¿u tiáº¿p theo?', options:[
          {text:'A. Enter', correct:true},
          {text:'B. Esc', correct:false},
          {text:'C. Space', correct:true},
          {text:'D. Backspace', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i cá»™t A vá»›i chá»©c nÄƒng tÆ°Æ¡ng á»©ng á»Ÿ cá»™t B.', 
          columnA:['1. Slide Show','2. Design','3. Insert','4. Transitions'],
          columnB:['a. Táº¡o hiá»‡u á»©ng chuyá»ƒn trang chiáº¿u','b. Thay Ä‘á»•i mÃ u ná»n, kiá»ƒu trÃ¬nh bÃ y','c. ThÃªm hÃ¬nh áº£nh, chá»¯, Ã¢m thanh','d. TrÃ¬nh chiáº¿u bÃ i thuyáº¿t trÃ¬nh'],
          correctMatches:{'1. Slide Show':'d. TrÃ¬nh chiáº¿u bÃ i thuyáº¿t trÃ¬nh','2. Design':'b. Thay Ä‘á»•i mÃ u ná»n, kiá»ƒu trÃ¬nh bÃ y','3. Insert':'c. ThÃªm hÃ¬nh áº£nh, chá»¯, Ã¢m thanh','4. Transitions':'a. Táº¡o hiá»‡u á»©ng chuyá»ƒn trang chiáº¿u'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 12: Khi muá»‘n lÆ°u láº¡i bÃ i trÃ¬nh chiáº¿u, em chá»n ( â€¦ ) â†’ Save.', 
          sentence:'Chá»n [BLANK] â†’ Save Ä‘á»ƒ lÆ°u bÃ i trÃ¬nh chiáº¿u.',
          hints:['File'], correctAnswers:['File']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Äá»ƒ cháº¡y thá»­ bÃ i trÃ¬nh chiáº¿u, em chá»n tab ( â€¦ ), sau Ä‘Ã³ nháº¥n From Beginning.', 
          sentence:'Chá»n tab [BLANK] â†’ From Beginning Ä‘á»ƒ cháº¡y thá»­ bÃ i trÃ¬nh chiáº¿u.',
          hints:['Slide Show'], correctAnswers:['Slide Show']
        },
        { level:3, type:'matching', question:'CÃ¢u 14: Ná»‘i cÃ¡c bÆ°á»›c táº¡o bÃ i trÃ¬nh chiáº¿u Ä‘Æ¡n giáº£n theo trÃ¬nh tá»± há»£p lÃ½.', 
          columnA:['1.','','2.','','3.','','4.','','5.',''],
          columnB:['a. Táº¡o bÃ i trÃ¬nh chiáº¿u má»›i','b. LÆ°u vÃ  trÃ¬nh chiáº¿u bÃ i','c. Má»Ÿ pháº§n má»m PowerPoint','d. Nháº­p tiÃªu Ä‘á», thÃªm cÃ¡c trang chiáº¿u','e. ChÃ¨n hÃ¬nh áº£nh, chá»n mÃ u ná»n vÃ  hiá»‡u á»©ng'],
          correctMatches:{'1.':'c. Má»Ÿ pháº§n má»m PowerPoint','2.':'a. Táº¡o bÃ i trÃ¬nh chiáº¿u má»›i','3.':'d. Nháº­p tiÃªu Ä‘á», thÃªm cÃ¡c trang chiáº¿u','4.':'e. ChÃ¨n hÃ¬nh áº£nh, chá»n mÃ u ná»n vÃ  hiá»‡u á»©ng','5.':'b. LÆ°u vÃ  trÃ¬nh chiáº¿u bÃ i'}
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: Ã tÆ°á»Ÿng bÃ i trÃ¬nh chiáº¿u nÃ o phÃ¹ há»£p Ä‘á»ƒ táº·ng tháº§y cÃ´ hoáº·c báº¡n bÃ¨?', options:[
          {text:'A. â€œLá»i tri Ã¢n tháº§y cÃ´â€ vá»›i hÃ¬nh áº£nh lá»›p há»c vÃ  nháº¡c ná»n nháº¹ nhÃ ng', correct:true},
          {text:'B. â€œBÃ i toÃ¡n hÃ¬nh há»c khÃ³ lá»›p 12â€', correct:false},
          {text:'C. â€œNgÃ y há»™i Ä‘á»c sÃ¡ch cá»§a lá»›p emâ€', correct:true},
          {text:'D. â€œChuyáº¿n dÃ£ ngoáº¡i cá»§a lá»›p 4Aâ€', correct:true}
        ]}
      ]
    },
    "BÃ i 8": {
      title: "BÃ i 8: Äá»‹nh dáº¡ng vÄƒn báº£n trÃªn trang chiáº¿u",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m thÆ°á»ng dÃ¹ng Ä‘á»ƒ Ä‘á»‹nh dáº¡ng vÄƒn báº£n trÃªn trang chiáº¿u lÃ :', options:[
          {text:'A. Word', correct:false},
          {text:'B. PowerPoint', correct:true},
          {text:'C. Excel', correct:false},
          {text:'D. Paint', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Äá»ƒ thay Ä‘á»•i kiá»ƒu/chá»¯ (font), ta chá»n tháº»:', options:[
          {text:'A. Design', correct:false},
          {text:'B. Home', correct:true},
          {text:'C. Icons', correct:false},
          {text:'D. Insert', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Äá»ƒ thay Ä‘á»•i mÃ u chá»¯, em chá»n nÃºt cÃ³ biá»ƒu tÆ°á»£ng:', options:[
          {text:'A. Chá»¯ A cÃ³ váº¡ch mÃ u bÃªn dÆ°á»›i', correct:true},
          {text:'B. B', correct:false},
          {text:'C. I', correct:false},
          {text:'D. U', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Äá»ƒ lÃ m chá»¯ Ä‘áº­m hÆ¡n, em chá»n biá»ƒu tÆ°á»£ng:', options:[
          {text:'A. I', correct:false},
          {text:'B. B', correct:true},
          {text:'C. U', correct:false},
          {text:'D. A', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Em cÃ³ thá»ƒ chá»n nhiá»u dÃ²ng vÄƒn báº£n rá»“i Ä‘á»•i mÃ u chá»¯ cÃ¹ng lÃºc. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Muá»‘n lÃ m chá»¯ nghiÃªng, ta chá»n biá»ƒu tÆ°á»£ng chá»¯ U. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Äá»ƒ gáº¡ch chÃ¢n chá»¯, em chá»n biá»ƒu tÆ°á»£ng:', options:[
          {text:'A. I', correct:false},
          {text:'B. U', correct:true},
          {text:'C. B', correct:false},
          {text:'D. A', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Thay Ä‘á»•i cá»¡ chá»¯ giÃºp vÄƒn báº£n trÃªn trang chiáº¿u:', options:[
          {text:'A. KhÃ³ Ä‘á»c hÆ¡n', correct:false},
          {text:'B. Dá»… nhÃ¬n hÆ¡n', correct:true},
          {text:'C. Máº¥t chá»¯', correct:false},
          {text:'D. KhÃ´ng thay Ä‘á»•i', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Äá»•i mÃ u ná»n cá»§a há»™p vÄƒn báº£n giÃºp:', options:[
          {text:'A. VÄƒn báº£n ná»•i báº­t hÆ¡n', correct:true},
          {text:'B. XÃ³a chá»¯', correct:false},
          {text:'C. Máº¥t ná»n', correct:false},
          {text:'D. KhÃ´ng tÃ¡c dá»¥ng', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi chá»n sai Ä‘á»‹nh dáº¡ng, em cÃ³ thá»ƒ:', options:[
          {text:'A. Nháº¥n Ctrl + Z', correct:true},
          {text:'B. Nháº¥n Delete', correct:false},
          {text:'C. Nháº¥n Enter', correct:false},
          {text:'D. Nháº¥n Shift', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i biá»ƒu tÆ°á»£ng á»Ÿ cá»™t A vá»›i chá»©c nÄƒng tÆ°Æ¡ng á»©ng á»Ÿ cá»™t B.', 
          columnA:['1. B','2. I','3. U','4. A (mÃ u)'],
          columnB:['a. LÃ m nghiÃªng chá»¯','b. Gáº¡ch chÃ¢n chá»¯','c. LÃ m Ä‘áº­m chá»¯','d. Thay Ä‘á»•i mÃ u chá»¯'],
          correctMatches:{'1. B':'c. LÃ m Ä‘áº­m chá»¯','2. I':'a. LÃ m nghiÃªng chá»¯','3. U':'b. Gáº¡ch chÃ¢n chá»¯','4. A (mÃ u)':'d. Thay Ä‘á»•i mÃ u chá»¯'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 12: Äá»ƒ tÄƒng kÃ­ch thÆ°á»›c chá»¯, em chá»n nhÃ³m lá»‡nh ( â€¦ ) trÃªn tháº» Home.', 
          sentence:'Chá»n nhÃ³m [BLANK] trÃªn tháº» Home Ä‘á»ƒ tÄƒng kÃ­ch thÆ°á»›c chá»¯.',
          hints:['Font'], correctAnswers:['Font']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Muá»‘n thay Ä‘á»•i mÃ u chá»¯, em chá»n nÃºt ( â€¦ ) cÃ³ biá»ƒu tÆ°á»£ng chá»¯ A vÃ  váº¡ch mÃ u bÃªn dÆ°á»›i.', 
          sentence:'Chá»n [BLANK] Ä‘á»ƒ Ä‘á»•i mÃ u chá»¯.',
          hints:['Font Color'], correctAnswers:['Font Color']
        },
        { level:3, type:'matching', question:'CÃ¢u 14: Ná»‘i thá»© tá»± cÃ¡c bÆ°á»›c Ä‘á»‹nh dáº¡ng tiÃªu Ä‘á» â€œEm yÃªu trÆ°á»ng emâ€ Ä‘á»ƒ ná»•i báº­t.', 
          columnA:['1.','','2.','','3.','','4.',''],
          columnB:['a. Chá»n dÃ²ng chá»¯ â€œEm yÃªu trÆ°á»ng emâ€','b. VÃ o tháº» Home, Ä‘á»•i kiá»ƒu chá»¯, cá»¡ lá»›n, mÃ u Ä‘á», lÃ m Ä‘áº­m','c. CÄƒn giá»¯a tiÃªu Ä‘á»','d. Kiá»ƒm tra láº¡i káº¿t quáº£'],
          correctMatches:{'1.':'a. Chá»n dÃ²ng chá»¯ â€œEm yÃªu trÆ°á»ng emâ€','2.':'b. VÃ o tháº» Home, Ä‘á»•i kiá»ƒu chá»¯, cá»¡ lá»›n, mÃ u Ä‘á», lÃ m Ä‘áº­m','3.':'c. CÄƒn giá»¯a tiÃªu Ä‘á»','4.':'d. Kiá»ƒm tra láº¡i káº¿t quáº£'}
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: CÃ¡ch nÃ o giÃºp trang trÃ­ vÄƒn báº£n trÃªn trang chiáº¿u sinh Ä‘á»™ng hÆ¡n?', options:[
          {text:'A. DÃ¹ng nhiá»u mÃ u chá»¯ há»£p lÃ½', correct:true},
          {text:'B. Káº¿t há»£p chá»¯ Ä‘áº­m, nghiÃªng, gáº¡ch chÃ¢n phÃ¹ há»£p', correct:true},
          {text:'C. Chá»n phÃ´ng nghá»‡ thuáº­t vÃ  thÃªm hÃ¬nh minh há»a', correct:true},
          {text:'D. DÃ¹ng mÃ u chá»¯ trÃ¹ng vá»›i mÃ u ná»n khiáº¿n khÃ³ Ä‘á»c', correct:false}
        ]}
      ]
    }}, "Lá»›p 5": {
    "BÃ i 1": {
      title: "BÃ i 1: Em cÃ³ thá»ƒ lÃ m gÃ¬ vá»›i mÃ¡y tÃ­nh",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: MÃ¡y tÃ­nh gá»“m nhá»¯ng bá»™ pháº­n chÃ­nh nÃ o?', options:[
          {text:'A. MÃ n hÃ¬nh, bÃ n phÃ­m, chuá»™t', correct:false},
          {text:'B. CPU, mÃ n hÃ¬nh, bÃ n phÃ­m, chuá»™t', correct:true},
          {text:'C. MÃ n hÃ¬nh, mÃ¡y in', correct:false},
          {text:'D. CPU, mÃ¡y in', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Äá»ƒ soáº¡n tháº£o vÄƒn báº£n, ta cáº§n dÃ¹ng pháº§n má»m nÃ o?', options:[
          {text:'A. Paint', correct:false},
          {text:'B. Word', correct:true},
          {text:'C. Excel', correct:false},
          {text:'D. TrÃ¬nh duyá»‡t web', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: PhÃ­m nÃ o dÃ¹ng Ä‘á»ƒ xÃ³a kÃ½ tá»± phÃ­a trÆ°á»›c con trá»?', options:[
          {text:'A. Space', correct:false},
          {text:'B. Backspace', correct:false},
          {text:'C. Delete', correct:true},
          {text:'D. Enter', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Biá»ƒu tÆ°á»£ng nÃ o dÆ°á»›i Ä‘Ã¢y giÃºp em má»Ÿ trÃ² chÆ¡i trÃªn mÃ¡y tÃ­nh?', options:[
          {text:'A. ğŸŒ', correct:false},
          {text:'B. ğŸ®', correct:true},
          {text:'C. ğŸ–¼ï¸', correct:false},
          {text:'D. ğŸ“„', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: MÃ¡y tÃ­nh chá»‰ cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ chÆ¡i trÃ² chÆ¡i. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Khi sá»­ dá»¥ng mÃ¡y tÃ­nh, em nÃªn ngá»“i tháº³ng lÆ°ng, cÃ¡ch mÃ n hÃ¬nh khoáº£ng 50 cm. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Hoáº¡t Ä‘á»™ng nÃ o sau Ä‘Ã¢y khÃ´ng cáº§n sá»­ dá»¥ng mÃ¡y tÃ­nh?', options:[
          {text:'A. Äá»c sÃ¡ch giáº¥y', correct:true},
          {text:'B. Soáº¡n tháº£o vÄƒn báº£n', correct:false},
          {text:'C. Nghe nháº¡c', correct:false},
          {text:'D. Váº½ tranh trÃªn mÃ¡y', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Em dÃ¹ng chuá»™t Ä‘á»ƒ lÃ m gÃ¬?', options:[
          {text:'A. Xem phim', correct:false},
          {text:'B. Äiá»u khiá»ƒn vÃ  chá»n lá»‡nh trÃªn mÃ n hÃ¬nh', correct:true},
          {text:'C. In tÃ i liá»‡u', correct:false},
          {text:'D. GÃµ vÄƒn báº£n', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Khi muá»‘n lÆ°u bÃ i váº½, em chá»n lá»‡nh nÃ o?', options:[
          {text:'A. Save', correct:true},
          {text:'B. Open', correct:false},
          {text:'C. Exit', correct:false},
          {text:'D. Print', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Biá»ƒu tÆ°á»£ng hÃ¬nh thÃ¹ng rÃ¡c (ğŸ—‘ï¸) cÃ³ tÃ¡c dá»¥ng gÃ¬?', options:[
          {text:'A. LÆ°u tá»‡p tin', correct:false},
          {text:'B. XÃ³a tá»‡p tin', correct:true},
          {text:'C. In tÃ i liá»‡u', correct:false},
          {text:'D. Táº¡o thÆ° má»¥c', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i cá»™t A vá»›i cá»™t B sao cho phÃ¹ há»£p.', 
          columnA:['1. Soáº¡n tháº£o vÄƒn báº£n','2. Má»Ÿ trÃ² chÆ¡i','3. Má»Ÿ trÃ¬nh duyá»‡t','4. Váº½ hÃ¬nh'],
          columnB:['a. GÃµ chá»¯','b. Giáº£i trÃ­','c. TÃ¬m kiáº¿m thÃ´ng tin','d. SÃ¡ng táº¡o nghá»‡ thuáº­t'],
          correctMatches:{'1. Soáº¡n tháº£o vÄƒn báº£n':'a. GÃµ chá»¯','2. Má»Ÿ trÃ² chÆ¡i':'b. Giáº£i trÃ­','3. Má»Ÿ trÃ¬nh duyá»‡t':'c. TÃ¬m kiáº¿m thÃ´ng tin','4. Váº½ hÃ¬nh':'d. SÃ¡ng táº¡o nghá»‡ thuáº­t'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 12: Äiá»n tá»« thÃ­ch há»£p (nghe, xem, há»c).', 
          sentence:'Em dÃ¹ng mÃ¡y tÃ­nh Ä‘á»ƒ [BLANK] bÃ i hÃ¡t, [BLANK] phim, vÃ  [BLANK] bÃ i há»c trÃªn máº¡ng.',
          hints:['nghe','xem','há»c'], correctAnswers:['nghe','xem','há»c']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Äiá»n tá»« thÃ­ch há»£p (bÃ¡o cÃ´ giÃ¡o, ngÆ°á»i lá»›n).', 
          sentence:'Khi mÃ¡y tÃ­nh bá»‹ treo, em cáº§n [BLANK] vÃ  nhá» [BLANK] giÃºp Ä‘á»¡.',
          hints:['bÃ¡o cÃ´ giÃ¡o','ngÆ°á»i lá»›n'], correctAnswers:['bÃ¡o cÃ´ giÃ¡o','ngÆ°á»i lá»›n']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 14: MÃ¡y tÃ­nh giÃºp em há»c tá»‘t hÆ¡n báº±ng cÃ¡ch nÃ o?', options:[
          {text:'A. Nghe nháº¡c', correct:false},
          {text:'B. Tra cá»©u bÃ i há»c', correct:true},
          {text:'C. ChÆ¡i game', correct:false},
          {text:'D. Gá»­i thÆ°', correct:false}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: Khi mÃ¡y tÃ­nh gáº·p sá»± cá»‘, em nÃªn lÃ m gÃ¬?', options:[
          {text:'A. Gá»i ngÆ°á»i lá»›n hoáº·c giÃ¡o viÃªn giÃºp Ä‘á»¡', correct:true},
          {text:'B. Tá»± thÃ¡o mÃ¡y ra xem', correct:false},
          {text:'C. Äáº­p bÃ n phÃ­m', correct:false},
          {text:'D. Bá» máº·c mÃ¡y', correct:false}
        ]}
      ]
    },
    "BÃ i 2": {
      title: "BÃ i 2: TÃ¬m kiáº¿m thÃ´ng tin trÃªn websites",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Internet Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?', options:[
          {text:'A. ChÆ¡i trÃ² chÆ¡i offline', correct:false},
          {text:'B. TÃ¬m kiáº¿m vÃ  chia sáº» thÃ´ng tin', correct:true},
          {text:'C. LÆ°u trá»¯ tÃ i liá»‡u cÃ¡ nhÃ¢n', correct:false},
          {text:'D. Váº½ tranh', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: â€œWebsiteâ€ lÃ  gÃ¬?', options:[
          {text:'A. Pháº§n má»m soáº¡n tháº£o vÄƒn báº£n', correct:false},
          {text:'B. Trang thÃ´ng tin trÃªn Internet', correct:true},
          {text:'C. TrÃ² chÆ¡i trá»±c tuyáº¿n', correct:false},
          {text:'D. Thiáº¿t bá»‹ ngoáº¡i vi', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Äá»ƒ truy cáº­p má»™t website, em cáº§n cÃ³:', options:[
          {text:'A. Chuá»™t vÃ  bÃ n phÃ­m', correct:false},
          {text:'B. TrÃ¬nh duyá»‡t web vÃ  káº¿t ná»‘i Internet', correct:true},
          {text:'C. Pháº§n má»m soáº¡n tháº£o', correct:false},
          {text:'D. MÃ¡y in vÃ  giáº¥y', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Biá»ƒu tÆ°á»£ng nÃ o thÆ°á»ng Ä‘áº¡i diá»‡n cho trÃ¬nh duyá»‡t web?', options:[
          {text:'A. ğŸ®', correct:false},
          {text:'B. ğŸŒ', correct:true},
          {text:'C. ğŸ–¨ï¸', correct:false},
          {text:'D. ğŸ“‚', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Khi tÃ¬m kiáº¿m thÃ´ng tin trÃªn Internet, em nÃªn Ä‘á»c ká»¹ vÃ  chá»n nguá»“n Ä‘Ã¡ng tin cáº­y. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Má»i thÃ´ng tin trÃªn Internet Ä‘á»u chÃ­nh xÃ¡c vÃ  cÃ³ thá»ƒ chia sáº» láº¡i mÃ  khÃ´ng cáº§n kiá»ƒm tra. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Äá»ƒ tÃ¬m kiáº¿m thÃ´ng tin nhanh nháº¥t, em nÃªn dÃ¹ng:', options:[
          {text:'A. Pháº§n má»m váº½ tranh', correct:false},
          {text:'B. CÃ´ng cá»¥ tÃ¬m kiáº¿m (nhÆ° Google, Cá»‘c Cá»‘c)', correct:true},
          {text:'C. TrÃ¬nh nghe nháº¡c', correct:false},
          {text:'D. TrÃ² chÆ¡i trá»±c tuyáº¿n', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Tá»« khÃ³a trong tÃ¬m kiáº¿m lÃ  gÃ¬?', options:[
          {text:'A. CÃ¢u há»i dÃ i Ä‘áº§y Ä‘á»§', correct:false},
          {text:'B. Nhá»¯ng tá»« quan trá»ng giÃºp tÃ¬m thÃ´ng tin', correct:true},
          {text:'C. Äá»‹a chá»‰ email', correct:false},
          {text:'D. MÃ£ pháº§n má»m', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Khi muá»‘n tÃ¬m hÃ¬nh áº£nh con mÃ¨o, em nÃªn gÃµ tá»« khÃ³a nÃ o?', options:[
          {text:'A. â€œHÃ¬nh áº£nh con mÃ¨oâ€', correct:true},
          {text:'B. â€œTÃ´i muá»‘n xem áº£nh con mÃ¨oâ€', correct:false},
          {text:'C. â€œTÃ´i yÃªu mÃ¨o láº¯mâ€', correct:false},
          {text:'D. â€œáº¢nh Ä‘áº¹pâ€', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi truy cáº­p má»™t website, pháº§n Ä‘á»‹a chá»‰ náº±m á»Ÿ Ä‘Ã¢u?', options:[
          {text:'A. Thanh cÃ´ng cá»¥', correct:false},
          {text:'B. Thanh Ä‘á»‹a chá»‰ (Address bar)', correct:true},
          {text:'C. Trang chá»§', correct:false},
          {text:'D. Báº£ng Ä‘iá»u khiá»ƒn', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i cá»™t A vá»›i cá»™t B cho Ä‘Ãºng.', 
          columnA:['1. Google','2. Youtube','3. Wikipedia','4. Cá»‘c Cá»‘c'],
          columnB:['a. CÃ´ng cá»¥ tÃ¬m kiáº¿m','b. Xem vÃ  chia sáº» video','c. Tra cá»©u kiáº¿n thá»©c','d. TrÃ¬nh duyá»‡t cá»§a Viá»‡t Nam'],
          correctMatches:{'1. Google':'a. CÃ´ng cá»¥ tÃ¬m kiáº¿m','2. Youtube':'b. Xem vÃ  chia sáº» video','3. Wikipedia':'c. Tra cá»©u kiáº¿n thá»©c','4. Cá»‘c Cá»‘c':'d. TrÃ¬nh duyá»‡t cá»§a Viá»‡t Nam'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i biá»ƒu tÆ°á»£ng vá»›i Ã½ nghÄ©a.', 
          columnA:['1. ğŸ”','2. ğŸŒ','3. â³','4. ğŸ '],
          columnB:['a. TÃ¬m kiáº¿m','b. Truy cáº­p Internet','c. Äang táº£i trang','d. Trang chá»§ Website'],
          correctMatches:{'1. ğŸ”':'a. TÃ¬m kiáº¿m','2. ğŸŒ':'b. Truy cáº­p Internet','3. â³':'c. Äang táº£i trang','4. ğŸ ':'d. Trang chá»§ Website'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Khi muá»‘n tÃ¬m thÃ´ng tin vá» â€œlá»‹ch sá»­ Viá»‡t Namâ€, em gÃµ tá»« khÃ³a â€œ________â€ vÃ o Ã´ tÃ¬m kiáº¿m cá»§a Google.', 
          sentence:'GÃµ tá»« khÃ³a â€œ[BLANK]â€ Ä‘á»ƒ tÃ¬m thÃ´ng tin vá» â€œlá»‹ch sá»­ Viá»‡t Namâ€.',
          hints:['lá»‹ch sá»­ Viá»‡t Nam'], correctAnswers:['lá»‹ch sá»­ Viá»‡t Nam']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: TrÆ°á»›c khi táº£i má»™t hÃ¬nh áº£nh tá»« Internet vá» mÃ¡y tÃ­nh, em cáº§n ________ vÃ  ________ xem ná»™i dung cÃ³ phÃ¹ há»£p khÃ´ng.', 
          sentence:'TrÆ°á»›c khi táº£i hÃ¬nh áº£nh: hÃ£y [BLANK] vÃ  [BLANK] xem ná»™i dung cÃ³ phÃ¹ há»£p.',
          hints:['xin phÃ©p','kiá»ƒm tra'], correctAnswers:['xin phÃ©p','kiá»ƒm tra']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: VÃ­ dá»¥ vá» sá»­ dá»¥ng Internet an toÃ n vÃ  há»¯u Ã­ch trong há»c táº­p lÃ :', options:[
          {text:'A. Táº£i pháº§n má»m láº¡ tá»« trang khÃ´ng rÃµ nguá»“n gá»‘c', correct:false},
          {text:'B. TÃ¬m bÃ i há»c trÃªn má»™t ná»n táº£ng giÃ¡o dá»¥c dÃ nh cho tráº» em', correct:true},
          {text:'C. Chia sáº» thÃ´ng tin chÆ°a kiá»ƒm chá»©ng', correct:false},
          {text:'D. Truy cáº­p trang ngÆ°á»i lá»›n', correct:false}
        ]}
      ]
    },
    "BÃ i 3": {
      title: "BÃ i 3: TÃ¬m kiáº¿m thÃ´ng tin trong giáº£i quyáº¿t váº¥n Ä‘á»",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Khi gáº·p má»™t váº¥n Ä‘á» cáº§n giáº£i quyáº¿t, viá»‡c Ä‘áº§u tiÃªn em nÃªn lÃ m lÃ :', options:[
          {text:'A. TÃ¬m ngay cÃ¢u tráº£ lá»i trÃªn máº¡ng', correct:false},
          {text:'B. XÃ¡c Ä‘á»‹nh rÃµ váº¥n Ä‘á» cáº§n tÃ¬m hiá»ƒu', correct:true},
          {text:'C. Sao chÃ©p thÃ´ng tin tá»« báº¡n bÃ¨', correct:false},
          {text:'D. Há»i ngÆ°á»i lá»›n mÃ  khÃ´ng tÃ¬m hiá»ƒu gÃ¬', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: TÃ¬m kiáº¿m thÃ´ng tin giÃºp em:', options:[
          {text:'A. Giáº£i trÃ­ má»—i ngÃ y', correct:false},
          {text:'B. Nhanh chÃ³ng cÃ³ nhiá»u kiáº¿n thá»©c hÆ¡n', correct:false},
          {text:'C. Giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» há»c táº­p vÃ  Ä‘á»i sá»‘ng', correct:true},
          {text:'D. KhÃ´ng cáº§n suy nghÄ©', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Khi gÃµ tá»« khÃ³a tÃ¬m kiáº¿m, em nÃªn:', options:[
          {text:'A. GÃµ tháº­t dÃ i vÃ  cÃ³ dáº¥u cháº¥m cÃ¢u', correct:false},
          {text:'B. GÃµ cÃ¡c tá»« khÃ³a chÃ­nh liÃªn quan Ä‘áº¿n váº¥n Ä‘á»', correct:true},
          {text:'C. GÃµ cáº£ cÃ¢u há»i', correct:false},
          {text:'D. GÃµ tá»« khÃ´ng liÃªn quan', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Biá»ƒu tÆ°á»£ng nÃ o dÆ°á»›i Ä‘Ã¢y lÃ  cá»§a trÃ¬nh duyá»‡t web?', options:[
          {text:'A. ğŸ–¥ï¸', correct:false},
          {text:'B. ğŸŒ', correct:true},
          {text:'C. ğŸ“„', correct:false},
          {text:'D. ğŸ’¾', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Khi tÃ¬m kiáº¿m thÃ´ng tin, chá»‰ cáº§n chá»n káº¿t quáº£ Ä‘áº§u tiÃªn lÃ  Ä‘á»§.', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Google, Bing, Cá»‘c Cá»‘c lÃ  cÃ¡c cÃ´ng cá»¥ tÃ¬m kiáº¿m phá»• biáº¿n.', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n xÃ¡c Ä‘á»‹nh má»¥c tiÃªu tÃ¬m kiáº¿m trÆ°á»›c khi tra cá»©u?', options:[
          {text:'A. Äá»ƒ khÃ´ng tá»‘n thá»i gian vÃ o ná»™i dung khÃ´ng cáº§n thiáº¿t', correct:true},
          {text:'B. Äá»ƒ gÃµ tá»« khÃ³a ngáº¯n hÆ¡n', correct:false},
          {text:'C. VÃ¬ trang web yÃªu cáº§u', correct:false},
          {text:'D. VÃ¬ khÃ´ng cÃ³ máº¡ng', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi Ä‘á»c thÃ´ng tin trÃªn máº¡ng, em nÃªn:', options:[
          {text:'A. Tin táº¥t cáº£ cÃ¡c ná»™i dung hiá»ƒn thá»‹', correct:false},
          {text:'B. Kiá»ƒm tra nguá»“n thÃ´ng tin vÃ  Ä‘á»‘i chiáº¿u tá»« nhiá»u trang', correct:true},
          {text:'C. Chá»‰ xem hÃ¬nh áº£nh', correct:false},
          {text:'D. Bá» qua ná»™i dung dÃ i', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Tá»« khÃ³a nÃ o phÃ¹ há»£p nháº¥t khi muá»‘n tÃ¬m hiá»ƒu vá» â€œBáº£o vá»‡ mÃ´i trÆ°á»ngâ€?', options:[
          {text:'A. â€œTáº¡i sao pháº£i báº£o vá»‡ mÃ´i trÆ°á»ng á»Ÿ Viá»‡t Namâ€', correct:false},
          {text:'B. â€œMÃ´i trÆ°á»ngâ€', correct:false},
          {text:'C. â€œCÃ¡ch báº£o vá»‡ mÃ´i trÆ°á»ngâ€', correct:true},
          {text:'D. â€œHá»c sinh lÃ m gÃ¬ Ä‘á»ƒ báº£o vá»‡ mÃ´i trÆ°á»ngâ€', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi em muá»‘n tÃ¬m hÃ¬nh áº£nh, em nÃªn chá»n:', options:[
          {text:'A. Má»¥c â€œVideoâ€', correct:false},
          {text:'B. Má»¥c â€œHÃ¬nh áº£nhâ€', correct:true},
          {text:'C. Má»¥c â€œTin tá»©câ€', correct:false},
          {text:'D. Má»¥c â€œTáº¥t cáº£â€', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i cá»™t A vá»›i cá»™t B sao cho Ä‘Ãºng.', 
          columnA:['1. Tá»« khÃ³a','2. TrÃ¬nh duyá»‡t','3. Káº¿t quáº£ tÃ¬m kiáº¿m'],
          columnB:['a. DÃ²ng chá»¯ mÃ´ táº£ ná»™i dung tÃ¬m kiáº¿m','b. Pháº§n má»m dÃ¹ng Ä‘á»ƒ truy cáº­p Internet','c. CÃ¡c trang web hiá»ƒn thá»‹ sau khi tra cá»©u'],
          correctMatches:{'1. Tá»« khÃ³a':'a. DÃ²ng chá»¯ mÃ´ táº£ ná»™i dung tÃ¬m kiáº¿m','2. TrÃ¬nh duyá»‡t':'b. Pháº§n má»m dÃ¹ng Ä‘á»ƒ truy cáº­p Internet','3. Káº¿t quáº£ tÃ¬m kiáº¿m':'c. CÃ¡c trang web hiá»ƒn thá»‹ sau khi tra cá»©u'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i loáº¡i thÃ´ng tin vá»›i cÃ¡ch sá»­ dá»¥ng phÃ¹ há»£p.', 
          columnA:['1. VÄƒn báº£n','2. HÃ¬nh áº£nh','3. Video'],
          columnB:['a. Xem hÆ°á»›ng dáº«n hoáº·c tin tá»©c','b. Quan sÃ¡t minh há»a, vÃ­ dá»¥ trá»±c quan','c. Xem cÃ¡ch thá»±c hiá»‡n hoáº·c thÃ­ nghiá»‡m'],
          correctMatches:{'1. VÄƒn báº£n':'a. Xem hÆ°á»›ng dáº«n hoáº·c tin tá»©c','2. HÃ¬nh áº£nh':'b. Quan sÃ¡t minh há»a, vÃ­ dá»¥ trá»±c quan','3. Video':'c. Xem cÃ¡ch thá»±c hiá»‡n hoáº·c thÃ­ nghiá»‡m'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Khi muá»‘n tÃ¬m thÃ´ng tin chÃ­nh xÃ¡c, em nÃªn sá»­ dá»¥ng (â€¦â€¦â€¦) rÃµ rÃ ng vÃ  ngáº¯n gá»n.', 
          sentence:'Em nÃªn dÃ¹ng [BLANK] rÃµ rÃ ng vÃ  ngáº¯n gá»n khi tÃ¬m kiáº¿m.',
          hints:['tá»« khÃ³a'], correctAnswers:['tá»« khÃ³a']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Náº¿u tháº¥y hai trang web cÃ³ thÃ´ng tin khÃ¡c nhau, em cáº§n (â€¦â€¦â€¦) vÃ  (â€¦â€¦â€¦) Ä‘á»ƒ chá»n thÃ´ng tin Ä‘Ãºng.', 
          sentence:'Khi hai trang web khÃ¡c nhau, hÃ£y [BLANK] vÃ  [BLANK] nguá»“n Ä‘á»ƒ chá»n thÃ´ng tin Ä‘Ãºng.',
          hints:['Ä‘á»‘i chiáº¿u','kiá»ƒm tra'], correctAnswers:['Ä‘á»‘i chiáº¿u','kiá»ƒm tra']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: Chá»n cÃ¡ch lÃ m tá»‘t nháº¥t khi tÃ¬m thÃ´ng tin vá» â€œBiáº¿n Ä‘á»•i khÃ­ háº­uâ€.', options:[
          {text:'A. TÃ¬m vá»›i tá»« khÃ³a â€œBiáº¿n Ä‘á»•i khÃ­ háº­u lÃ  gÃ¬â€ vÃ  chá»n trang cá»§a Bá»™ TÃ i nguyÃªn vÃ  MÃ´i trÆ°á»ng', correct:true},
          {text:'B. Má»Ÿ trang báº¥t ká»³ cÃ³ nhiá»u hÃ¬nh áº£nh', correct:false},
          {text:'C. Chá»‰ há»i báº¡n bÃ¨', correct:false},
          {text:'D. Chá»n káº¿t quáº£ Ä‘áº§u tiÃªn khÃ´ng cáº§n Ä‘á»c', correct:false}
        ]}
      ]
    },
    "BÃ i 4": {
      title: "BÃ i 4: CÃ¢y thÆ° má»¥c",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: ThÆ° má»¥c lÃ  gÃ¬?', options:[
          {text:'A. Má»™t loáº¡i pháº§n má»m trÃªn mÃ¡y tÃ­nh', correct:false},
          {text:'B. NÆ¡i lÆ°u trá»¯ vÃ  sáº¯p xáº¿p cÃ¡c tá»‡p tin, thÆ° má»¥c con', correct:true},
          {text:'C. Má»™t táº­p tin chá»©a hÃ¬nh áº£nh', correct:false},
          {text:'D. Má»™t trÃ¬nh duyá»‡t web', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: CÃ¢y thÆ° má»¥c lÃ  gÃ¬?', options:[
          {text:'A. CÃ¡ch váº½ sÆ¡ Ä‘á»“ cÃ¢y trong Word', correct:false},
          {text:'B. SÆ¡ Ä‘á»“ thá»ƒ hiá»‡n má»‘i quan há»‡ giá»¯a cÃ¡c thÆ° má»¥c vÃ  tá»‡p tin', correct:true},
          {text:'C. Danh sÃ¡ch cÃ¡c pháº§n má»m trÃªn mÃ¡y', correct:false},
          {text:'D. HÃ¬nh áº£nh minh há»a cÃ¢y thá»±c váº­t', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Trong cÃ¢y thÆ° má»¥c, thÆ° má»¥c lá»›n nháº¥t Ä‘Æ°á»£c gá»i lÃ :', options:[
          {text:'A. ThÆ° má»¥c gá»‘c', correct:true},
          {text:'B. ThÆ° má»¥c con', correct:false},
          {text:'C. ThÆ° má»¥c máº¹', correct:false},
          {text:'D. ThÆ° má»¥c chá»©a', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Má»™t thÆ° má»¥c cÃ³ thá»ƒ chá»©a:', options:[
          {text:'A. Chá»‰ má»™t tá»‡p tin', correct:false},
          {text:'B. Nhiá»u tá»‡p tin vÃ  thÆ° má»¥c con', correct:true},
          {text:'C. Chá»‰ thÆ° má»¥c con', correct:false},
          {text:'D. Chá»‰ hÃ¬nh áº£nh', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Trong cÃ¢y thÆ° má»¥c, thÆ° má»¥c máº¹ chá»©a cÃ¡c thÆ° má»¥c con. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Má»—i tá»‡p tin chá»‰ cÃ³ thá»ƒ náº±m trong nhiá»u thÆ° má»¥c khÃ¡c nhau. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: CÃ¢y thÆ° má»¥c giÃºp em:', options:[
          {text:'A. Xem phim vÃ  chÆ¡i game dá»… hÆ¡n', correct:false},
          {text:'B. Sáº¯p xáº¿p, quáº£n lÃ½ dá»¯ liá»‡u khoa há»c', correct:true},
          {text:'C. TÄƒng tá»‘c Ä‘á»™ máº¡ng Internet', correct:false},
          {text:'D. Cháº¡y chÆ°Æ¡ng trÃ¬nh nhanh hÆ¡n', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Trong Ä‘Æ°á»ng dáº«n â€œD:\\HOC TAP\\TIN HOC\\Bai 4.docxâ€, thÆ° má»¥c con lÃ :', options:[
          {text:'A. D:\\', correct:false},
          {text:'B. HOC TAP', correct:false},
          {text:'C. TIN HOC', correct:true},
          {text:'D. Bai 4.docx', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: ThÆ° má»¥c con cá»§a thÆ° má»¥c â€œHinhAnhâ€ cÃ³ thá»ƒ lÃ :', options:[
          {text:'A. HinhAnh.docx', correct:false},
          {text:'B. HinhAnh2', correct:true},
          {text:'C. HinhAnh.jpg', correct:false},
          {text:'D. HinhAnh.txt', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Trong cÃ¢y thÆ° má»¥c, cÃ¡c thÆ° má»¥c con cÃ¹ng cáº¥p thÆ°á»ng Ä‘Æ°á»£c gá»i lÃ :', options:[
          {text:'A. ThÆ° má»¥c cha', correct:false},
          {text:'B. ThÆ° má»¥c anh em', correct:true},
          {text:'C. ThÆ° má»¥c chÃ­nh', correct:false},
          {text:'D. ThÆ° má»¥c gá»‘c', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i khÃ¡i niá»‡m á»Ÿ cá»™t A vá»›i mÃ´ táº£ á»Ÿ cá»™t B.', 
          columnA:['1. ThÆ° má»¥c gá»‘c','2. ThÆ° má»¥c máº¹','3. ThÆ° má»¥c con'],
          columnB:['a. Chá»©a cÃ¡c thÆ° má»¥c con, lÃ  thÆ° má»¥c cao nháº¥t','b. LÃ  thÆ° má»¥c chá»©a cÃ¡c thÆ° má»¥c nhá» hÆ¡n','c. Náº±m trong thÆ° má»¥c máº¹'],
          correctMatches:{'1. ThÆ° má»¥c gá»‘c':'a. Chá»©a cÃ¡c thÆ° má»¥c con, lÃ  thÆ° má»¥c cao nháº¥t','2. ThÆ° má»¥c máº¹':'b. LÃ  thÆ° má»¥c chá»©a cÃ¡c thÆ° má»¥c nhá» hÆ¡n','3. ThÆ° má»¥c con':'c. Náº±m trong thÆ° má»¥c máº¹'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i biá»ƒu tÆ°á»£ng vá»›i Ã½ nghÄ©a tÆ°Æ¡ng á»©ng.', 
          columnA:['1. ğŸ“','2. ğŸ–¼ï¸','3. ğŸ“„'],
          columnB:['a. ThÆ° má»¥c','b. Tá»‡p hÃ¬nh áº£nh','c. Tá»‡p vÄƒn báº£n'],
          correctMatches:{'1. ğŸ“':'a. ThÆ° má»¥c','2. ğŸ–¼ï¸':'b. Tá»‡p hÃ¬nh áº£nh','3. ğŸ“„':'c. Tá»‡p vÄƒn báº£n'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Trong Ä‘Æ°á»ng dáº«n â€œC:\\HocTap\\Toanâ€, â€œC:â€ lÃ  (â€¦â€¦â€¦..), â€œHocTapâ€ lÃ  (â€¦â€¦â€¦..).', 
          sentence:'â€œC:â€ lÃ  [BLANK], â€œHocTapâ€ lÃ  [BLANK].',
          hints:['á»• Ä‘Ä©a','thÆ° má»¥c máº¹'], correctAnswers:['á»• Ä‘Ä©a','thÆ° má»¥c máº¹']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Táº¡o thÆ° má»¥c má»›i: báº¥m chuá»™t pháº£i â†’ chá»n (â€¦â€¦â€¦..) â†’ (â€¦â€¦â€¦..).', 
          sentence:'Chuá»™t pháº£i â†’ [BLANK] â†’ [BLANK] Ä‘á»ƒ táº¡o thÆ° má»¥c má»›i.',
          hints:['New','Folder'], correctAnswers:['New','Folder']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: Chá»n cÃ¡ch sáº¯p xáº¿p thÆ° má»¥c há»c táº­p há»£p lÃ½ nháº¥t.', options:[
          {text:'A. D:\\HocTap\\Toan\\Bai1.docx; D:\\HocTap\\TinHoc\\Bai3.docx; D:\\HocTap\\TiengViet\\Bai2.docx', correct:true},
          {text:'B. D:\\HocTap\\Bai1.docx; D:\\HinhAnh\\Bai2.docx; D:\\Game\\Bai3.docx', correct:false},
          {text:'C. D:\\Bai1.docx; D:\\Bai2.docx; D:\\Bai3.docx', correct:false},
          {text:'D. D:\\HocTap\\Toan.docx; D:\\HocTap\\TinHoc.docx (Ä‘áº·t táº¥t cáº£ bÃ i vÃ o 2 tá»‡p lá»›n)', correct:false}
        ]}
      ]
    },
    "BÃ i 5": {
      title: "BÃ i 5: Báº£n quyá»n ná»™i dung thÃ´ng tin",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: â€œBáº£n quyá»nâ€ lÃ  gÃ¬?', options:[
          {text:'A. Quyá»n sá»­ dá»¥ng mÃ¡y tÃ­nh cÃ¡ nhÃ¢n', correct:false},
          {text:'B. Quyá»n cá»§a ngÆ°á»i sÃ¡ng táº¡o ra ná»™i dung hoáº·c sáº£n pháº©m', correct:true},
          {text:'C. Quyá»n táº£i pháº§n má»m miá»…n phÃ­', correct:false},
          {text:'D. Quyá»n cá»§a ngÆ°á»i xem thÃ´ng tin', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Khi muá»‘n sá»­ dá»¥ng hÃ¬nh áº£nh cá»§a ngÆ°á»i khÃ¡c, em nÃªn lÃ m gÃ¬?', options:[
          {text:'A. Táº£i vá» vÃ  dÃ¹ng luÃ´n', correct:false},
          {text:'B. Há»i Ã½ kiáº¿n vÃ  ghi rÃµ nguá»“n gá»‘c', correct:true},
          {text:'C. Sao chÃ©p mÃ  khÃ´ng cáº§n xin phÃ©p', correct:false},
          {text:'D. Sá»­a láº¡i má»™t chÃºt rá»“i sá»­ dá»¥ng', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: HÃ nh vi nÃ o sau Ä‘Ã¢y lÃ  vi pháº¡m báº£n quyá»n?', options:[
          {text:'A. Tá»± sÃ¡ng táº¡o bÃ i hÃ¡t cá»§a mÃ¬nh', correct:false},
          {text:'B. Táº£i phim cÃ³ báº£n quyá»n tá»« trang láº­u', correct:true},
          {text:'C. Ghi rÃµ nguá»“n khi trÃ­ch dáº«n', correct:false},
          {text:'D. Mua pháº§n má»m báº£n quyá»n', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: KÃ½ hiá»‡u nÃ o thÆ°á»ng thá»ƒ hiá»‡n ná»™i dung cÃ³ báº£n quyá»n?', options:[
          {text:'A. â„¹ï¸', correct:false},
          {text:'B. ğŸ…¿ï¸', correct:false},
          {text:'C. Â©', correct:true},
          {text:'D. â„¢', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: Sá»­ dá»¥ng pháº§n má»m miá»…n phÃ­ thÃ¬ khÃ´ng cáº§n quan tÃ¢m Ä‘áº¿n báº£n quyá»n. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: Khi Ä‘Äƒng áº£nh báº¡n bÃ¨ lÃªn máº¡ng, em cáº§n Ä‘Æ°á»£c sá»± Ä‘á»“ng Ã½ cá»§a há». (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: VÃ¬ sao cáº§n tÃ´n trá»ng báº£n quyá»n ná»™i dung thÃ´ng tin?', options:[
          {text:'A. Äá»ƒ báº£o vá»‡ quyá»n lá»£i ngÆ°á»i sÃ¡ng táº¡o vÃ  khuyáº¿n khÃ­ch sÃ¡ng táº¡o', correct:true},
          {text:'B. Äá»ƒ dÃ¹ng Internet nhanh hÆ¡n', correct:false},
          {text:'C. VÃ¬ luáº­t phÃ¡p báº¯t buá»™c', correct:false},
          {text:'D. Äá»ƒ trÃ¡nh virus mÃ¡y tÃ­nh', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi em chÃ©p má»™t Ä‘oáº¡n vÄƒn trÃªn máº¡ng vÃ o bÃ i lÃ m, em cáº§n:', options:[
          {text:'A. XÃ³a tÃªn tÃ¡c giáº£', correct:false},
          {text:'B. KhÃ´ng cáº§n ghi nguá»“n', correct:false},
          {text:'C. Ghi rÃµ nguá»“n trÃ­ch dáº«n', correct:true},
          {text:'D. Sao chÃ©p toÃ n bá»™ mÃ  khÃ´ng chá»‰nh sá»­a', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Trong cÃ¡c pháº§n má»m sau, pháº§n má»m nÃ o cáº§n mua báº£n quyá»n?', options:[
          {text:'A. Microsoft Word', correct:true},
          {text:'B. Paint', correct:false},
          {text:'C. Notepad', correct:false},
          {text:'D. Calculator', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Khi muá»‘n chia sáº» má»™t bÃ i hÃ¡t lÃªn máº¡ng, em nÃªn:', options:[
          {text:'A. Ghi rÃµ tÃªn ca sÄ© vÃ  nháº¡c sÄ©', correct:true},
          {text:'B. Ghi â€œSÆ°u táº§m trÃªn máº¡ngâ€ lÃ  Ä‘á»§', correct:false},
          {text:'C. DÃ¹ng tÃ i khoáº£n áº©n danh', correct:false},
          {text:'D. KhÃ´ng cáº§n ghi nguá»“n', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i ná»™i dung á»Ÿ cá»™t A vá»›i hÃ nh Ä‘á»™ng phÃ¹ há»£p á»Ÿ cá»™t B.', 
          columnA:['1. Sá»­ dá»¥ng hÃ¬nh áº£nh ngÆ°á»i khÃ¡c','2. Viáº¿t bÃ i sÃ¡ng táº¡o cá»§a riÃªng mÃ¬nh','3. Sao chÃ©p bÃ i viáº¿t trÃªn máº¡ng'],
          columnB:['a. Xin phÃ©p vÃ  ghi nguá»“n','b. TÃ´n trá»ng báº£n quyá»n','c. Cáº§n trÃ­ch dáº«n rÃµ nguá»“n'],
          correctMatches:{'1. Sá»­ dá»¥ng hÃ¬nh áº£nh ngÆ°á»i khÃ¡c':'a. Xin phÃ©p vÃ  ghi nguá»“n','2. Viáº¿t bÃ i sÃ¡ng táº¡o cá»§a riÃªng mÃ¬nh':'b. TÃ´n trá»ng báº£n quyá»n','3. Sao chÃ©p bÃ i viáº¿t trÃªn máº¡ng':'c. Cáº§n trÃ­ch dáº«n rÃµ nguá»“n'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i biá»ƒu tÆ°á»£ng vá»›i Ã½ nghÄ©a Ä‘Ãºng.', 
          columnA:['1. Â©','2. â„¢','3. â„¹ï¸'],
          columnB:['a. Báº£n quyá»n','b. ThÆ°Æ¡ng hiá»‡u','c. ThÃ´ng tin'],
          correctMatches:{'1. Â©':'a. Báº£n quyá»n','2. â„¢':'b. ThÆ°Æ¡ng hiá»‡u','3. â„¹ï¸':'c. ThÃ´ng tin'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Khi muá»‘n sá»­ dá»¥ng ná»™i dung trÃªn máº¡ng, em cáº§n ________ vÃ  ________ nguá»“n rÃµ rÃ ng.', 
          sentence:'Em cáº§n [BLANK] vÃ  [BLANK] nguá»“n rÃµ rÃ ng khi sá»­ dá»¥ng ná»™i dung trÃªn máº¡ng.',
          hints:['xin phÃ©p','ghi'], correctAnswers:['xin phÃ©p','ghi']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Náº¿u tháº¥y báº¡n chia sáº» phim cÃ³ báº£n quyá»n mÃ  khÃ´ng Ä‘Æ°á»£c phÃ©p, em nÃªn ________ hoáº·c ________.', 
          sentence:'Náº¿u tháº¥y báº¡n chia sáº» phim cÃ³ báº£n quyá»n, hÃ£y [BLANK] hoáº·c [BLANK].',
          hints:['nháº¯c báº¡n dá»«ng láº¡i','bÃ¡o vá»›i ngÆ°á»i lá»›n'], correctAnswers:['nháº¯c báº¡n dá»«ng láº¡i','bÃ¡o vá»›i ngÆ°á»i lá»›n']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: VÃ­ dá»¥ nÃ o thá»ƒ hiá»‡n em tÃ´n trá»ng báº£n quyá»n?', options:[
          {text:'A. Ghi rÃµ nguá»“n áº£nh khi lÃ m bÃ i thuyáº¿t trÃ¬nh', correct:true},
          {text:'B. Táº£i pháº§n má»m láº­u Ä‘á»ƒ dÃ¹ng táº¡m', correct:false},
          {text:'C. Chia sáº» bÃ i hÃ¡t báº£n quyá»n mÃ  khÃ´ng ghi nguá»“n', correct:false},
          {text:'D. ÄÄƒng áº£nh báº¡n bÃ¨ mÃ  khÃ´ng xin phÃ©p', correct:false}
        ]}
      ]
    },
    "BÃ i 6": {
      title: "BÃ i 6: Äá»‹nh dáº¡ng kÃ½ tá»± vÃ  bá»‘ trÃ­ hÃ¬nh áº£nh vÄƒn báº£n",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Äá»ƒ in Ä‘áº­m chá»¯ trong vÄƒn báº£n, em chá»n nÃºt lá»‡nh nÃ o?', options:[
          {text:'A. I', correct:false},
          {text:'B. B', correct:true},
          {text:'C. U', correct:false},
          {text:'D. A', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: PhÃ­m táº¯t Ctrl + I dÃ¹ng Ä‘á»ƒ:', options:[
          {text:'A. In Ä‘áº­m chá»¯', correct:false},
          {text:'B. In nghiÃªng chá»¯', correct:true},
          {text:'C. Gáº¡ch chÃ¢n chá»¯', correct:false},
          {text:'D. TÄƒng cá»¡ chá»¯', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Muá»‘n thay Ä‘á»•i cá»¡ chá»¯, em thá»±c hiá»‡n trong nhÃ³m lá»‡nh nÃ o?', options:[
          {text:'A. Paragraph', correct:false},
          {text:'B. Clipboard', correct:false},
          {text:'C. Font', correct:true},
          {text:'D. Insert', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 4: a) NÃºt lá»‡nh B dÃ¹ng Ä‘á»ƒ in nghiÃªng chá»¯.  b) CÃ³ thá»ƒ chá»n nhiá»u kiá»ƒu Ä‘á»‹nh dáº¡ng cÃ¹ng lÃºc cho má»™t Ä‘oáº¡n vÄƒn báº£n. (Ä/S)', statements:[
          {text:'a) NÃºt lá»‡nh B dÃ¹ng Ä‘á»ƒ in nghiÃªng chá»¯.', correct:false},
          {text:'b) CÃ³ thá»ƒ chá»n nhiá»u kiá»ƒu Ä‘á»‹nh dáº¡ng cÃ¹ng lÃºc cho má»™t Ä‘oáº¡n vÄƒn báº£n.', correct:true}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 5: Chá»©c nÄƒng cá»§a nÃºt lá»‡nh U lÃ  gÃ¬?', options:[
          {text:'A. Gáº¡ch chÃ¢n chá»¯', correct:true},
          {text:'B. In Ä‘áº­m chá»¯', correct:false},
          {text:'C. In nghiÃªng chá»¯', correct:false},
          {text:'D. TÃ´ mÃ u chá»¯', correct:false}
        ]},
        { level:1, type:'fill-in-blank', question:'CÃ¢u 6: Khi muá»‘n thay Ä‘á»•i mÃ u chá»¯, ta chá»n nÃºt lá»‡nh cÃ³ biá»ƒu tÆ°á»£ng chá»¯ A vÃ  má»™t ______ á»Ÿ dÆ°á»›i.', 
          sentence:'Chá»n nÃºt A cÃ³ váº¡ch [BLANK] á»Ÿ dÆ°á»›i Ä‘á»ƒ Ä‘á»•i mÃ u chá»¯.',
          hints:['mÃ u sáº¯c'], correctAnswers:['mÃ u sáº¯c']
        },

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Äá»ƒ chÃ¨n hÃ¬nh áº£nh vÃ o vÄƒn báº£n, ta chá»n tháº» lá»‡nh nÃ o trong Word?', options:[
          {text:'A. Home', correct:false},
          {text:'B. Insert', correct:true},
          {text:'C. Layout', correct:false},
          {text:'D. Design', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Sau khi chÃ¨n hÃ¬nh áº£nh, muá»‘n di chuyá»ƒn hÃ¬nh Ä‘áº¿n vá»‹ trÃ­ khÃ¡c, ta cáº§n:', options:[
          {text:'A. Nháº¥n chuá»™t pháº£i â†’ Copy hÃ¬nh', correct:false},
          {text:'B. Nháº¥n chuá»™t trÃ¡i vÃ  kÃ©o hÃ¬nh Ä‘áº¿n chá»— má»›i', correct:true},
          {text:'C. Nháº¥n Enter Ä‘á»ƒ hÃ¬nh tá»± di chuyá»ƒn', correct:false},
          {text:'D. KhÃ´ng thá»ƒ di chuyá»ƒn hÃ¬nh', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 9: Ná»‘i chá»©c nÄƒng á»Ÿ cá»™t A vá»›i nÃºt lá»‡nh tÆ°Æ¡ng á»©ng á»Ÿ cá»™t B.', 
          columnA:['1. In nghiÃªng chá»¯','2. Gáº¡ch chÃ¢n chá»¯','3. In Ä‘áº­m chá»¯'],
          columnB:['a. U','b. B','c. I'],
          correctMatches:{'1. In nghiÃªng chá»¯':'c. I','2. Gáº¡ch chÃ¢n chá»¯':'a. U','3. In Ä‘áº­m chá»¯':'b. B'}
        },
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: Chá»©c nÄƒng Wrap Text dÃ¹ng Ä‘á»ƒ:', options:[
          {text:'A. ChÃ¨n hÃ¬nh áº£nh', correct:false},
          {text:'B. CÄƒn/bá»‘ trÃ­ hÃ¬nh áº£nh so vá»›i vÄƒn báº£n', correct:true},
          {text:'C. TÃ´ mÃ u chá»¯', correct:false},
          {text:'D. Sao chÃ©p hÃ¬nh', correct:false}
        ]},
        { level:2, type:'true-false', question:'CÃ¢u 11: a) HÃ¬nh áº£nh trong vÄƒn báº£n khÃ´ng thá»ƒ phÃ³ng to hoáº·c thu nhá».  b) CÃ³ thá»ƒ bá»‘ trÃ­ hÃ¬nh áº£nh náº±m bÃªn trÃ¡i, pháº£i hoáº·c giá»¯a vÄƒn báº£n. (Ä/S)', statements:[
          {text:'a) HÃ¬nh áº£nh khÃ´ng thá»ƒ phÃ³ng to hoáº·c thu nhá».', correct:false},
          {text:'b) CÃ³ thá»ƒ bá»‘ trÃ­ hÃ¬nh áº£nh trÃ¡i/pháº£i/giá»¯a vÄƒn báº£n.', correct:true}
        ]},
        { level:2, type:'fill-in-blank', question:'CÃ¢u 12: Khi muá»‘n hÃ¬nh áº£nh náº±m giá»¯a vÄƒn báº£n, ta chá»n kiá»ƒu bá»‘ trÃ­ â€¦â€¦ trong cÃ´ng cá»¥ Wrap Text.', 
          sentence:'Chá»n kiá»ƒu [BLANK] trong Wrap Text Ä‘á»ƒ hÃ¬nh á»Ÿ giá»¯a vÄƒn báº£n.',
          hints:['Centered'], correctAnswers:['Centered']
        },

        { level:3, type:'multiple-choice', question:'CÃ¢u 13: Em cÃ³ má»™t bá»©c áº£nh chÃ¨n vÃ o vÄƒn báº£n bá»‹ quÃ¡ to, lÃ m lá»‡ch bá»‘ cá»¥c trang. Em nÃªn lÃ m gÃ¬?', options:[
          {text:'A. XoÃ¡ hÃ¬nh Ä‘i', correct:false},
          {text:'B. KÃ©o cÃ¡c gÃ³c cá»§a hÃ¬nh Ä‘á»ƒ thu nhá» láº¡i', correct:true},
          {text:'C. ChÃ¨n láº¡i áº£nh khÃ¡c', correct:false},
          {text:'D. Äá»•i mÃ u hÃ¬nh', correct:false}
        ]},
        { level:3, type:'matching', question:'CÃ¢u 14: Ná»‘i tÃ¬nh huá»‘ng vá»›i thao tÃ¡c phÃ¹ há»£p.', 
          columnA:['1. Muá»‘n lÃ m ná»•i báº­t tiÃªu Ä‘á»','2. Muá»‘n vÄƒn báº£n bao quanh hÃ¬nh','3. Muá»‘n hÃ¬nh áº£nh náº±m giá»¯a Ä‘oáº¡n'],
          columnB:['a. Chá»n Wrap Text â†’ Square','b. Chá»n nÃºt B trong nhÃ³m Font','c. CÄƒn giá»¯a (Align Center)'],
          correctMatches:{'1. Muá»‘n lÃ m ná»•i báº­t tiÃªu Ä‘á»':'b. Chá»n nÃºt B trong nhÃ³m Font','2. Muá»‘n vÄƒn báº£n bao quanh hÃ¬nh':'a. Chá»n Wrap Text â†’ Square','3. Muá»‘n hÃ¬nh áº£nh náº±m giá»¯a Ä‘oáº¡n':'c. CÄƒn giá»¯a (Align Center)'}
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 15: HoÃ n thÃ nh hÆ°á»›ng dáº«n: Insert â†’ â€¦â€¦ â†’ This Device â†’ chá»n áº£nh â†’ Insert.', 
          sentence:'Insert â†’ [BLANK] â†’ This Device â†’ chá»n áº£nh â†’ Insert.',
          hints:['Picture'], correctAnswers:['Picture']
        }
      ]
    },
    "BÃ i 7": {
      title: "BÃ i 7: Thá»±c hÃ nh soáº¡n tháº£o vÄƒn báº£n",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m nÃ o dÃ¹ng Ä‘á»ƒ soáº¡n tháº£o vÄƒn báº£n?', options:[
          {text:'A. Paint', correct:false},
          {text:'B. Word', correct:true},
          {text:'C. Excel', correct:false},
          {text:'D. PowerPoint', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Äá»ƒ gÃµ chá»¯ hoa nhanh, em nháº¥n phÃ­m nÃ o cÃ¹ng lÃºc vá»›i chá»¯?', options:[
          {text:'A. Tab', correct:false},
          {text:'B. Shift', correct:true},
          {text:'C. Ctrl', correct:false},
          {text:'D. Alt', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: PhÃ­m Enter cÃ³ tÃ¡c dá»¥ng:', options:[
          {text:'A. Táº¡o dÃ²ng má»›i', correct:true},
          {text:'B. XÃ³a kÃ½ tá»±', correct:false},
          {text:'C. CÄƒn lá»', correct:false},
          {text:'D. LÆ°u vÄƒn báº£n', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: Äá»ƒ lÆ°u vÄƒn báº£n, em chá»n:', options:[
          {text:'A. File â†’ Save', correct:true},
          {text:'B. File â†’ New', correct:false},
          {text:'C. File â†’ Open', correct:false},
          {text:'D. File â†’ Print', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: NÃªn Ä‘áº·t tÃªn tá»‡p cÃ³ dáº¥u tiáº¿ng Viá»‡t cho dá»… Ä‘á»c. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 6: CÃ³ thá»ƒ dÃ¹ng chuá»™t Ä‘á»ƒ bÃ´i Ä‘en (chá»n) má»™t Ä‘oáº¡n vÄƒn báº£n. (Ä/S)', statements:[
          {text:'(ÄÃºng/Sai)', correct:true}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: Khi muá»‘n sá»­a lá»—i chÃ­nh táº£, em cÃ³ thá»ƒ:', options:[
          {text:'A. Nháº¥n Delete Ä‘á»ƒ xÃ³a kÃ½ tá»± sai', correct:true},
          {text:'B. DÃ¹ng cÃ´ng cá»¥ váº½ hÃ¬nh', correct:false},
          {text:'C. ChÃ¨n áº£nh', correct:false},
          {text:'D. Táº¡o thÆ° má»¥c má»›i', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Khi sai chÃ­nh táº£, thÆ°á»ng xuáº¥t hiá»‡n gáº¡ch chÃ¢n mÃ u gÃ¬ dÆ°á»›i chá»¯?', options:[
          {text:'A. Äá»', correct:true},
          {text:'B. Xanh', correct:false},
          {text:'C. VÃ ng', correct:false},
          {text:'D. XÃ¡m', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Chá»n toÃ n bá»™ vÄƒn báº£n lÃ  tá»• há»£p:', options:[
          {text:'A. Ctrl + X', correct:false},
          {text:'B. Ctrl + C', correct:false},
          {text:'C. Ctrl + A', correct:true},
          {text:'D. Ctrl + V', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 10: In Ä‘áº­m Ä‘oáº¡n vÄƒn báº£n báº±ng tá»• há»£p:', options:[
          {text:'A. Ctrl + U', correct:false},
          {text:'B. Ctrl + I', correct:false},
          {text:'C. Ctrl + B', correct:true},
          {text:'D. Ctrl + D', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 11: Ná»‘i thao tÃ¡c vá»›i chá»©c nÄƒng tÆ°Æ¡ng á»©ng.', 
          columnA:['1. Ctrl + S','2. Ctrl + C','3. Ctrl + V','4. Ctrl + X'],
          columnB:['a. LÆ°u vÄƒn báº£n','b. Sao chÃ©p Ä‘oáº¡n chá»n','c. DÃ¡n ná»™i dung Ä‘Ã£ sao chÃ©p','d. Cáº¯t Ä‘oáº¡n vÄƒn báº£n'],
          correctMatches:{'1. Ctrl + S':'a. LÆ°u vÄƒn báº£n','2. Ctrl + C':'b. Sao chÃ©p Ä‘oáº¡n chá»n','3. Ctrl + V':'c. DÃ¡n ná»™i dung Ä‘Ã£ sao chÃ©p','4. Ctrl + X':'d. Cáº¯t Ä‘oáº¡n vÄƒn báº£n'}
        },
        { level:2, type:'matching', question:'CÃ¢u 12: Ná»‘i biá»ƒu tÆ°á»£ng vá»›i Ã½ nghÄ©a trong Word.', 
          columnA:['1. B','2. I','3. U'],
          columnB:['a. In nghiÃªng chá»¯','b. Gáº¡ch chÃ¢n chá»¯','c. In Ä‘áº­m chá»¯'],
          correctMatches:{'1. B':'c. In Ä‘áº­m chá»¯','2. I':'a. In nghiÃªng chá»¯','3. U':'b. Gáº¡ch chÃ¢n chá»¯'}
        },

        { level:3, type:'fill-in-blank', question:'CÃ¢u 13: Äá»ƒ gÃµ tiáº¿ng Viá»‡t cÃ³ dáº¥u, em báº­t pháº§n má»m ( â€¦ ) vÃ  chá»n kiá»ƒu gÃµ ( â€¦ ).', 
          sentence:'Báº­t [BLANK] vÃ  chá»n [BLANK] Ä‘á»ƒ gÃµ tiáº¿ng Viá»‡t cÃ³ dáº¥u.',
          hints:['Unikey','Telex'], correctAnswers:['Unikey','Telex']
        },
        { level:3, type:'fill-in-blank', question:'CÃ¢u 14: Khi hoÃ n thÃ nh vÄƒn báº£n, em nÃªn ( â€¦ ) Ä‘á»ƒ lÆ°u láº¡i vÃ  ( â€¦ ) Ä‘á»ƒ ná»™p bÃ i.', 
          sentence:'Nháº¥n [BLANK] Ä‘á»ƒ lÆ°u bÃ i vÃ  [BLANK] Ä‘á»ƒ ná»™p cho giÃ¡o viÃªn.',
          hints:['Ctrl + S','gá»­i qua thÆ° hoáº·c USB'], correctAnswers:['Ctrl + S','gá»­i qua thÆ° hoáº·c USB']
        },
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: VÃ­ dá»¥ nÃ o sau Ä‘Ã¢y thá»ƒ hiá»‡n viá»‡c em sá»­ dá»¥ng ká»¹ nÄƒng soáº¡n tháº£o vÄƒn báº£n trong há»c táº­p?', options:[
          {text:'A. Viáº¿t báº£n bÃ¡o cÃ¡o vÃ  chÃ¨n hÃ¬nh áº£nh minh há»a', correct:true},
          {text:'B. ChÆ¡i trÃ² chÆ¡i trÃªn mÃ¡y tÃ­nh', correct:false},
          {text:'C. Váº½ tranh trÃªn giáº¥y', correct:false},
          {text:'D. Xem video giáº£i trÃ­', correct:false}
        ]}
      ]
    },
    "BÃ i 8": {
      title: "BÃ i 8: LÃ m quen vá»›i pháº§n má»m Ä‘á»“ há»a",
      questions: [
        { level:1, type:'multiple-choice', question:'CÃ¢u 1: Pháº§n má»m Ä‘á»“ há»a lÃ  gÃ¬?', options:[
          {text:'A. Pháº§n má»m Ä‘á»ƒ nghe nháº¡c.', correct:false},
          {text:'B. Pháº§n má»m Ä‘á»ƒ váº½, thiáº¿t káº¿ hÃ¬nh áº£nh.', correct:true},
          {text:'C. Pháº§n má»m Ä‘á»ƒ gÃµ vÄƒn báº£n.', correct:false},
          {text:'D. Pháº§n má»m Ä‘á»ƒ chÆ¡i game.', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 2: Pháº§n má»m Ä‘á»“ há»a thÆ°á»ng dÃ¹ng Ä‘á»ƒ:', options:[
          {text:'A. Soáº¡n tháº£o vÄƒn báº£n.', correct:false},
          {text:'B. Táº¡o vÃ  chá»‰nh sá»­a hÃ¬nh áº£nh.', correct:true},
          {text:'C. Gá»­i email.', correct:false},
          {text:'D. LÆ°u trá»¯ dá»¯ liá»‡u.', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 3: Trong cÃ¡c pháº§n má»m sau, Ä‘Ã¢u lÃ  pháº§n má»m Ä‘á»“ há»a?', options:[
          {text:'A. Paint', correct:true},
          {text:'B. Word', correct:false},
          {text:'C. Excel', correct:false},
          {text:'D. PowerPoint', correct:false}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 4: CÃ´ng cá»¥ bÃºt chÃ¬ (Pencil) trong pháº§n má»m Ä‘á»“ há»a dÃ¹ng Ä‘á»ƒ:', options:[
          {text:'A. TÃ´ mÃ u vÃ¹ng chá»n', correct:false},
          {text:'B. Viáº¿t chá»¯', correct:false},
          {text:'C. Váº½ Ä‘Æ°á»ng nÃ©t tá»± do', correct:true},
          {text:'D. XÃ³a hÃ¬nh', correct:false}
        ]},
        { level:1, type:'true-false', question:'CÃ¢u 5: a) Pháº§n má»m Ä‘á»“ há»a chá»‰ dÃ¹ng Ä‘á»ƒ xem áº£nh.  b) Ta cÃ³ thá»ƒ táº¡o hÃ¬nh váº½ má»›i trong pháº§n má»m Ä‘á»“ há»a. (Ä/S)', statements:[
          {text:'a) Pháº§n má»m Ä‘á»“ há»a chá»‰ dÃ¹ng Ä‘á»ƒ xem áº£nh.', correct:false},
          {text:'b) Ta cÃ³ thá»ƒ táº¡o hÃ¬nh váº½ má»›i trong pháº§n má»m Ä‘á»“ há»a.', correct:true}
        ]},
        { level:1, type:'multiple-choice', question:'CÃ¢u 6: Äá»ƒ má»Ÿ pháº§n má»m Paint, em chá»n:', options:[
          {text:'A. Start â†’ Accessories â†’ Paint', correct:true},
          {text:'B. Start â†’ Documents', correct:false},
          {text:'C. Start â†’ Settings', correct:false},
          {text:'D. Start â†’ Music', correct:false}
        ]},

        { level:2, type:'multiple-choice', question:'CÃ¢u 7: CÃ´ng cá»¥ Fill with color (thÃ¹ng sÆ¡n) cÃ³ chá»©c nÄƒng:', options:[
          {text:'A. TÃ´ mÃ u cho vÃ¹ng Ä‘Æ°á»£c chá»n.', correct:true},
          {text:'B. XÃ³a hÃ¬nh váº½.', correct:false},
          {text:'C. Di chuyá»ƒn hÃ¬nh.', correct:false},
          {text:'D. Viáº¿t chá»¯.', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 8: Muá»‘n váº½ má»™t hÃ¬nh trÃ²n Ä‘á»u trong Paint, ta pháº£i:', options:[
          {text:'A. Giá»¯ phÃ­m Shift khi kÃ©o chuá»™t vá»›i cÃ´ng cá»¥ elip.', correct:true},
          {text:'B. Giá»¯ phÃ­m Ctrl khi kÃ©o chuá»™t.', correct:false},
          {text:'C. Giá»¯ phÃ­m Alt khi kÃ©o chuá»™t.', correct:false},
          {text:'D. Chá»‰ cáº§n nháº¥p chuá»™t má»™t láº§n.', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 9: Biá»ƒu tÆ°á»£ng chá»¯ A trong Paint dÃ¹ng Ä‘á»ƒ:', options:[
          {text:'A. Viáº¿t chá»¯ lÃªn hÃ¬nh.', correct:true},
          {text:'B. Váº½ Ä‘Æ°á»ng tháº³ng.', correct:false},
          {text:'C. TÃ´ mÃ u.', correct:false},
          {text:'D. PhÃ³ng to hÃ¬nh.', correct:false}
        ]},
        { level:2, type:'matching', question:'CÃ¢u 10: Ná»‘i cÃ´ng cá»¥ vá»›i chá»©c nÄƒng tÆ°Æ¡ng á»©ng.', 
          columnA:['1. Eraser','2. Pencil','3. Fill color'],
          columnB:['a. TÃ´ mÃ u','b. XÃ³a nÃ©t váº½','c. Váº½ tá»± do'],
          correctMatches:{'1. Eraser':'b. XÃ³a nÃ©t váº½','2. Pencil':'c. Váº½ tá»± do','3. Fill color':'a. TÃ´ mÃ u'}
        },
        { level:2, type:'true-false', question:'CÃ¢u 11: a) Ta cÃ³ thá»ƒ lÆ°u hÃ¬nh váº½ thÃ nh tá»‡p áº£nh.  b) Khi váº½ sai, khÃ´ng thá»ƒ quay láº¡i bÆ°á»›c trÆ°á»›c. (Ä/S)', statements:[
          {text:'a) Ta cÃ³ thá»ƒ lÆ°u hÃ¬nh váº½ thÃ nh tá»‡p áº£nh.', correct:true},
          {text:'b) Khi váº½ sai, khÃ´ng thá»ƒ quay láº¡i bÆ°á»›c trÆ°á»›c.', correct:false}
        ]},
        { level:2, type:'multiple-choice', question:'CÃ¢u 12: Äá»ƒ lÆ°u hÃ¬nh váº½ trong pháº§n má»m Ä‘á»“ há»a, ta chá»n:', options:[
          {text:'A. File â†’ Save', correct:true},
          {text:'B. Home â†’ Copy', correct:false},
          {text:'C. Edit â†’ Paste', correct:false},
          {text:'D. File â†’ Print', correct:false}
        ]},

        { level:3, type:'multiple-choice', question:'CÃ¢u 13: Khi muá»‘n tÃ´ mÃ u hÃ¬nh váº½, em chá»n cÃ´ng cá»¥ nÃ o?', options:[
          {text:'A. BÃºt chÃ¬', correct:false},
          {text:'B. ThÃ¹ng sÆ¡n', correct:true},
          {text:'C. Táº©y', correct:false}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 14: Äá»ƒ viáº¿t chá»¯ vÃ o hÃ¬nh váº½, em chá»n cÃ´ng cá»¥ cÃ³ biá»ƒu tÆ°á»£ng chá»¯ nÃ o?', options:[
          {text:'A. A', correct:true},
          {text:'B. T', correct:false},
          {text:'C. BÃºt', correct:false}
        ]},
        { level:3, type:'multiple-choice', question:'CÃ¢u 15: Khi váº½ má»™t táº¥m thiá»‡p chÃºc má»«ng trong pháº§n má»m Ä‘á»“ há»a, em nÃªn:', options:[
          {text:'A. DÃ¹ng cÃ´ng cá»¥ váº½ hÃ¬nh Ä‘á»ƒ táº¡o khung.', correct:false},
          {text:'B. DÃ¹ng cÃ´ng cá»¥ chá»¯ Ä‘á»ƒ viáº¿t lá»i chÃºc.', correct:false},
          {text:'C. DÃ¹ng cÃ´ng cá»¥ mÃ u Ä‘á»ƒ tÃ´ cho Ä‘áº¹p.', correct:false},
          {text:'D. Thá»±c hiá»‡n táº¥t cáº£ cÃ¡c thao tÃ¡c trÃªn.', correct:true}
        ]}
      ]
    }
  }
};

// ====== Helper cáº¥p Ä‘á»™ ======
function getLevelLabel(level){
  if(level===1) return 'Má»¨C 1: NHáº¬N BIáº¾T ğŸ¯';
  if(level===2) return 'Má»¨C 2: THÃ”NG HIá»‚U ğŸ’¡';
  return 'Má»¨C 3: Váº¬N Dá»¤NG ğŸš€';
}

// ====== Biáº¿n tráº¡ng thÃ¡i ======
let currentLessonKey=null, currentLessonQuestions=[], currentQuizIndex=0, lessonCorrectAnswers=0;
let lessonStopwatchInterval=null, lessonStartTime=0, currentQuestionData={};

// ===== Scoring (Phiáº¿u bÃ i táº­p) â€“ thÃªm má»›i =====
// CÃ¡c biáº¿n runId vÃ  quizId sáº½ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ theo dÃµi lÆ°á»£t lÃ m bÃ i vÃ  gá»­i Ä‘iá»ƒm lÃªn server
let lessonRunId = null;
let lessonQuizId = null;

/**
 * Trá»™n ngáº«u nhiÃªn má»™t máº£ng báº±ng thuáº­t toÃ¡n Durstenfeld.
 * HÃ m nÃ y tráº£ vá» máº£ng Ä‘Ã£ Ä‘Æ°á»£c xÃ¡o trá»™n, Ä‘á»“ng thá»i khÃ´ng lÃ m thay Ä‘á»•i máº£ng gá»‘c.
 * @param {Array} arr - máº£ng cáº§n xÃ¡o trá»™n
 * @returns {Array} - máº£ng sau khi xÃ¡o trá»™n
 */
function p2Shuffle(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

/**
 * Gá»i API start_run náº¿u ngÆ°á»i dÃ¹ng Ä‘Ã£ Ä‘Äƒng nháº­p vÃ  Ä‘Ã£ cÃ³ quiz_id.
 * Tráº£ vá» run_id náº¿u thÃ nh cÃ´ng hoáº·c null náº¿u tháº¥t báº¡i.
 */
async function p2StartRunIfPossible(){
  try{
    const me = getAuth() || {};
    if(!me.token || !lessonQuizId) return null;
    const r = await apiPost('start_run', { token: me.token, quiz_id: lessonQuizId, ua: 'web' });
    return (r && r.ok) ? r.run_id : null;
  }catch(e){
    return null;
  }
}

/**
 * Gá»­i káº¿t quáº£ lÃ m bÃ i (submit_run) lÃªn server náº¿u cÃ³ Ä‘á»§ thÃ´ng tin.
 * correct: sá»‘ cÃ¢u Ä‘Ãºng, total: tá»•ng cÃ¢u há»i, maxScore: Ä‘iá»ƒm tá»‘i Ä‘a (máº·c Ä‘á»‹nh 5 Ä‘iá»ƒm má»—i cÃ¢u).
 * Tráº£ vá» pháº£n há»“i tá»« mÃ¡y chá»§ hoáº·c null náº¿u khÃ´ng gá»­i Ä‘Æ°á»£c.
 */
async function p2SubmitRunIfPossible({correct, total, maxScore}){
  try{
    const me = getAuth() || {};
    if(!me.token || !lessonRunId || !lessonQuizId) return null;
    const r = await apiPost('submit_run', {
      token: me.token,
      run_id: lessonRunId,
      quiz_id: lessonQuizId,
      correct: correct,
      q_count: total,
      max_score: maxScore || (total * 5), // giá»¯ thang giá»‘ng â€œsaoâ€ cÅ©: 5 Ä‘iá»ƒm / cÃ¢u Ä‘Ãºng
      difficulty: 'normal'
    });
    return r;
  }catch(e){
    return null;
  }
}

// ====== Pháº§n tá»­ ======
const qText = document.getElementById('question-text');
const topicEl = document.getElementById('quiz-topic');
const levelEl = document.getElementById('quiz-level');
const progressEl = document.getElementById('quiz-progress');
const feedbackEl = document.getElementById('feedback-message');
const nextBtn = document.getElementById('next-question-btn');
const speakBtn = document.getElementById('speak-button');
const answerArea = ()=>document.getElementById('quiz-answer-area');
if(speakBtn) speakBtn.addEventListener('click', ()=>speakText(qText.innerText));
if(qText) qText.addEventListener('mouseenter', ()=>speakText(qText.innerText));

// ====== Update trang ======
function updatePageContent(pageId){
  switch(pageId){
    case 'page-video':
      document.getElementById('video-page-title').innerText = 'ğŸ¥ Video BÃ i Há»c - '+currentGrade;
      loadVideoContent();
      break;
    case 'page-quiz':
      document.getElementById('quiz-page-title').innerText = 'ğŸ§  Phiáº¿u BÃ i Táº­p - '+currentGrade;
      document.getElementById('quiz-card').classList.add('hidden');
      document.getElementById('quiz-lesson-selection').classList.remove('hidden');
      clearInterval(lessonStopwatchInterval);
      loadLessonList();
      break;
    case 'page-results':
      document.getElementById('results-page-title').innerText = 'ğŸ“ˆ Káº¿t Quáº£ - '+currentGrade;
      renderResultsPage();
      break;
    case 'page-game':
      document.getElementById('game-page-title').innerText = 'ğŸ¯ Äua Xe Kiáº¿n Thá»©c - '+currentGrade;
      resetGame();
      break;
  }
}

// ====== Lesson list ======
function loadLessonList(){
  const box = document.getElementById('quiz-lesson-selection'); if(!box) return;
  box.innerHTML = '<h2 class="text-2xl font-bold text-center text-blue-800 mb-6">Em hÃ£y chá»n bÃ i há»c:</h2>';
  const lessons = quizData[currentGrade]||{};
  const keys = Object.keys(lessons);
  if(!keys.length){ box.innerHTML += '<p class="text-center text-gray-700">ChÆ°a cÃ³ bÃ i cho lá»›p nÃ y.</p>'; return; }
  keys.forEach(k=>{
    const btn = document.createElement('button');
    btn.className='btn-hover w-full p-6 bg-white rounded-2xl shadow-lg text-left';
    const count = (lessons[k].questions||[]).length;
    btn.innerHTML='<h3 class="text-xl font-bold text-blue-700">'+(lessons[k].title||k)+'</h3><p class="text-gray-600">'+count+' cÃ¢u há»i</p>';
    btn.addEventListener('click', ()=>startLesson(k));
    box.appendChild(btn);
  });
}

async function startLesson(lessonKey){
  // Äáº·t khÃ³a bÃ i hiá»‡n táº¡i
  currentLessonKey = lessonKey;
  // Giá»¯ nguyÃªn pháº§n gom cÃ¢u há»i cho bÃ i há»c
  currentLessonQuestions = (quizData[currentGrade][lessonKey] || {questions:[]}).questions;
  // Äáº·t láº¡i chá»‰ sá»‘ vÃ  sá»‘ cÃ¢u Ä‘Ãºng
  currentQuizIndex = 0;
  lessonCorrectAnswers = 0;

  // áº¨n danh sÃ¡ch bÃ i vÃ  hiá»ƒn thá»‹ tháº» cÃ¢u há»i
  document.getElementById('quiz-lesson-selection').classList.add('hidden');
  document.getElementById('quiz-card').classList.remove('hidden');

  // Khá»Ÿi Ä‘á»™ng Ä‘á»“ng há»“ báº¥m giá» nhÆ° cÅ©
  lessonStartTime = Date.now();
  // startStopwatch cÃ³ thá»ƒ bá» qua tham sá»‘ nhÆ°ng truyá»n 0 Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch
  startStopwatch(0);

  // GÃ¡n quiz_id chuáº©n hÃ³a dá»±a trÃªn lá»›p hiá»‡n táº¡i vÃ  khÃ³a bÃ i
  try{
    const me = getAuth() || {};
    // TrÃ­ch xuáº¥t sá»‘ lá»›p tá»« thuá»™c tÃ­nh grade (vÃ­ dá»¥ 'Lá»›p 3' â†’ '3').
    let g = 'NA';
    if(me && me.grade){
      // Chuyá»ƒn giÃ¡ trá»‹ lá»›p thÃ nh chuá»—i vÃ  loáº¡i bá» kÃ½ tá»± khÃ´ng pháº£i sá»‘
      const digits = String(me.grade).match(/\d+/);
      if(digits && digits[0]){
        g = digits[0];
      }
    }
    lessonQuizId = `quiz:${g}:${String(lessonKey || 'unknown')}`;
  }catch(_){
    lessonQuizId = `quiz:NA:${String(lessonKey || 'unknown')}`;
  }

  // Khá»Ÿi táº¡o run trÃªn server (náº¿u cÃ³ token)
  lessonRunId = await p2StartRunIfPossible();

  // Hiá»ƒn thá»‹ cÃ¢u há»i Ä‘áº§u tiÃªn
  loadNewQuizQuestion();
}

// ====== Stopwatch ======
function formatTime(ms){
  const sec = Math.floor(ms/1000);
  const m = Math.floor(sec/60), s = sec%60;
  return String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');
}
function startStopwatch(){
  clearInterval(lessonStopwatchInterval);
  const d = document.getElementById('quiz-stopwatch'); if(!d) return;
  lessonStartTime = Date.now(); d.innerText='00:00';
  lessonStopwatchInterval = setInterval(()=>{ d.innerText = formatTime(Date.now()-lessonStartTime); }, 1000);
}

// ====== RENDER ======
function clearQA(){
  feedbackEl.className='hidden mt-6 text-xl font-medium p-4 rounded-xl';
  feedbackEl.innerText='';
  nextBtn.classList.add('hidden');
  answerArea().innerHTML='';
}

function renderMultipleChoice(q){
  const wrap=document.createElement('div'); wrap.className='grid grid-cols-1 md:grid-cols-2 gap-4';
  q.options.forEach(opt=>{
    const btn=document.createElement('button');
    btn.className='btn-answer text-left text-lg p-5 bg-white rounded-2xl shadow border-2 border-transparent hover:border-blue-500 transition transform active:scale-95';
    btn.innerText=opt.text;
    btn.addEventListener('click',()=>{ btn.classList.add('ring','ring-blue-400'); handleResult(!!opt.correct, btn); });
    wrap.appendChild(btn);
  });
  answerArea().appendChild(wrap);
}

function svgIcon(kind){
  if(kind==='mouse') return '<svg viewBox="0 0 120 120" class="w-full h-28 mx-auto"><rect x="40" y="15" width="40" height="90" rx="20" fill="#ddd" stroke="#666"/><line x1="60" y1="15" x2="60" y2="55" stroke="#666" stroke-width="2"/></svg>';
  if(kind==='monitor') return '<svg viewBox="0 0 160 120" class="w-full h-28 mx-auto"><rect x="10" y="10" width="140" height="85" rx="6" fill="#1f2937"/><rect x="16" y="16" width="128" height="73" fill="#93c5fd"/><rect x="60" y="95" width="40" height="10" fill="#6b7280"/></svg>';
  if(kind==='keyboard') return '<svg viewBox="0 0 160 80" class="w-full h-28 mx-auto"><rect x="10" y="10" width="140" height="60" rx="6" fill="#e5e7eb" stroke="#9ca3af"/><g fill="#9ca3af"><rect x="15" y="15" width="14" height="14" rx="2"/><rect x="33" y="15" width="14" height="14" rx="2"/><rect x="51" y="15" width="14" height="14" rx="2"/><rect x="69" y="15" width="14" height="14" rx="2"/><rect x="87" y="15" width="14" height="14" rx="2"/><rect x="105" y="15" width="14" height="14" rx="2"/><rect x="123" y="15" width="14" height="14" rx="2"/><rect x="15" y="33" width="14" height="14" rx="2"/><rect x="33" y="33" width="14" height="14" rx="2"/><rect x="51" y="33" width="14" height="14" rx="2"/><rect x="69" y="33" width="14" height="14" rx="2"/><rect x="87" y="33" width="14" height="14" rx="2"/><rect x="105" y="33" width="14" height="14" rx="2"/><rect x="123" y="33" width="14" height="14" rx="2"/><rect x="15" y="51" width="14" height="14" rx="2"/><rect x="33" y="51" width="14" height="14" rx="2"/><rect x="51" y="51" width="14" height="14" rx="2"/><rect x="69" y="51" width="14" height="14" rx="2"/><rect x="87" y="51" width="14" height="14" rx="2"/><rect x="105" y="51" width="14" height="14" rx="2"/><rect x="123" y="51" width="14" height="14" rx="2"/></g></svg>';
  if(kind==='printer') return '<svg viewBox="0 0 160 120" class="w-full h-28 mx-auto"><rect x="30" y="40" width="100" height="50" rx="6" fill="#9ca3af"/><rect x="40" y="20" width="80" height="30" rx="4" fill="#d1d5db"/><rect x="50" y="65" width="60" height="20" fill="#111827"/><rect x="55" y="85" width="50" height="15" fill="#e5e7eb"/></svg>';
  if(kind==='traffic_red') return '<svg viewBox="0 0 80 160" class="w-16 h-32 mx-auto"><rect x="20" y="10" width="40" height="120" rx="10" fill="#111827"/><circle cx="40" cy="35" r="15" fill="#ef4444"/><circle cx="40" cy="75" r="15" fill="#4b5563"/><circle cx="40" cy="115" r="15" fill="#4b5563"/></svg>';
  if(kind==='sun') return '<svg viewBox="0 0 120 120" class="w-20 h-20 mx-auto"><circle cx="60" cy="60" r="20" fill="#fbbf24"/><g stroke="#f59e0b" stroke-width="4"><line x1="60" y1="5" x2="60" y2="20"/><line x1="60" y1="100" x2="60" y2="115"/><line x1="5" y1="60" x2="20" y2="60"/><line x1="100" y1="60" x2="115" y2="60"/><line x1="25" y1="25" x2="35" y2="35"/><line x1="85" y1="85" x2="95" y2="95"/><line x1="25" y1="95" x2="35" y2="85"/><line x1="85" y1="35" x2="95" y2="25"/></g></svg>';
  if(kind==='rain') return '<svg viewBox="0 0 120 120" class="w-20 h-20 mx-auto"><ellipse cx="60" cy="40" rx="30" ry="18" fill="#9ca3af"/><g stroke="#60a5fa" stroke-width="4"><line x1="30" y1="60" x2="25" y2="85"/><line x1="40" y1="60" x2="35" y2="85"/><line x1="50" y1="60" x2="45" y2="85"/><line x1="70" y1="60" x2="65" y2="85"/><line x1="80" y1="60" x2="75" y2="85"/><line x1="90" y1="60" x2="85" y2="85"/></g></svg>';
  if(kind==='cold') return '<svg viewBox="0 0 120 120" class="w-20 h-20 mx-auto"><g stroke="#60a5fa" stroke-width="5"><line x1="60" y1="20" x2="60" y2="100"/><line x1="60" y1="60" x2="95" y2="35"/><line x1="60" y1="60" x2="25" y2="35"/><line x1="60" y1="60" x2="95" y2="85"/><line x1="60" y1="60" x2="25" y2="85"/></g></svg>';
  
  if(kind==='child_pc') return '<svg viewBox="0 0 160 120" class="w-28 h-28 mx-auto"><rect x="20" y="20" width="120" height="70" rx="8" fill="#93c5fd"/><rect x="40" y="35" width="80" height="40" rx="4" fill="#fff"/><circle cx="60" cy="60" r="8" fill="#60a5fa"/><rect x="65" y="85" width="30" height="8" rx="2" fill="#6b7280"/><rect x="55" y="95" width="50" height="6" rx="3" fill="#9ca3af"/></svg>';
  if(kind==='posture_ok') return '<svg viewBox="0 0 160 120" class="w-28 h-28 mx-auto"><rect x="10" y="70" width="90" height="30" rx="6" fill="#d1d5db"/><rect x="100" y="50" width="40" height="40" rx="6" fill="#374151"/><circle cx="45" cy="40" r="10" fill="#f59e0b"/><path d="M35 55 Q45 50 55 55 L55 75" stroke="#111827" stroke-width="6" fill="none" stroke-linecap="round"/><path d="M55 62 L85 62" stroke="#111827" stroke-width="6" stroke-linecap="round"/></svg>';
  if(kind==='power_off') return '<svg viewBox="0 0 120 120" class="w-20 h-20 mx-auto"><circle cx="60" cy="60" r="45" fill="#111827"/><path d="M60 25 L60 60" stroke="#ef4444" stroke-width="10" stroke-linecap="round"/><path d="M35 40 A30 30 0 1 0 85 40" stroke="#ef4444" stroke-width="10" fill="none" stroke-linecap="round"/></svg>';
  if(kind==='safety_electric') return '<svg viewBox="0 0 120 120" class="w-20 h-20 mx-auto"><polygon points="60,10 110,110 10,110" fill="#fde68a" stroke="#f59e0b" stroke-width="4"/><path d="M60 35 L50 65 H70 L60 95" stroke="#b45309" stroke-width="6" fill="none" stroke-linecap="round"/></svg>';
  if(kind==='calculator') return '<svg viewBox="0 0 120 140" class="w-20 h-20 mx-auto"><rect x="20" y="10" width="80" height="120" rx="10" fill="#9ca3af"/><rect x="30" y="20" width="60" height="20" rx="4" fill="#374151"/><g fill="#e5e7eb"><rect x="30" y="50" width="20" height="20" rx="4"/><rect x="50" y="50" width="20" height="20" rx="4"/><rect x="70" y="50" width="20" height="20" rx="4"/><rect x="30" y="70" width="20" height="20" rx="4"/><rect x="50" y="70" width="20" height="20" rx="4"/><rect x="70" y="70" width="20" height="20" rx="4"/><rect x="30" y="90" width="20" height="20" rx="4"/><rect x="50" y="90" width="20" height="20" rx="4"/><rect x="70" y="90" width="20" height="20" rx="4"/></g></svg>';
  if(kind==='magnifier') return '<svg viewBox="0 0 140 140" class="w-20 h-20 mx-auto"><circle cx="60" cy="60" r="35" fill="#93c5fd" stroke="#1f2937" stroke-width="6"/><rect x="85" y="85" width="40" height="12" rx="6" transform="rotate(45 85 85)" fill="#1f2937"/></svg>';
  if(kind==='chart') return '<svg viewBox="0 0 160 120" class="w-20 h-20 mx-auto"><rect x="20" y="20" width="120" height="80" rx="6" fill="#e5e7eb" stroke="#9ca3af"/><rect x="35" y="70" width="20" height="20" fill="#60a5fa"/><rect x="65" y="55" width="20" height="35" fill="#34d399"/><rect x="95" y="40" width="20" height="50" fill="#f59e0b"/></svg>';

  return '';
}

function renderImageChoice(q){
  const wrap=document.createElement('div'); wrap.className='grid grid-cols-2 gap-4';
  q.options.forEach(opt=>{
    const btn=document.createElement('button');
    btn.className='btn-answer text-left text-lg p-3 bg-white rounded-2xl shadow border-2 border-transparent hover:border-blue-500 transition transform active:scale-95';
    let icon='';
    if(typeof opt.image==='string' && opt.image.indexOf('svg:')===0){ icon = svgIcon(opt.image.split(':')[1]); }
    btn.innerHTML = icon + '<p class="font-medium mt-2">'+opt.text+'</p>';
    btn.addEventListener('click',()=>{ btn.classList.add('ring','ring-blue-400'); handleResult(!!opt.correct, btn); });
    wrap.appendChild(btn);
  });
  answerArea().appendChild(wrap);
}

function renderTrueFalse(q){
  const wrap=document.createElement('div'); wrap.className='space-y-3';
  (q.statements||[]).forEach(st=>{
    const row=document.createElement('div'); row.className='flex items-center justify-between bg-white rounded-xl shadow p-3 gap-3';
    const txt=document.createElement('div'); txt.className='text-lg font-medium text-gray-800 pr-3'; txt.innerText=st.text;
    const btnWrap=document.createElement('div'); btnWrap.className='flex gap-2';
    const bT=document.createElement('button'); bT.className='btn-answer px-4 py-2 rounded-xl bg-green-500 text-white text-lg font-bold'; bT.innerText='ÄÃºng';
    const bF=document.createElement('button'); bF.className='btn-answer px-4 py-2 rounded-xl bg-red-500 text-white text-lg font-bold'; bF.innerText='Sai';
    bT.addEventListener('click',(e)=>{ 
      // NgÄƒn cháº·n chá»n láº¡i sau khi Ä‘Ã£ chá»n
      row.dataset.selected = 'true';
      bT.classList.remove('bg-green-500', 'text-white');
      bT.classList.add('bg-green-600', 'ring-2', 'ring-green-400', 'text-white');
      bF.classList.remove('bg-red-600', 'ring-2', 'ring-red-400');
      bF.classList.add('bg-red-500', 'text-white');
      try{ txt.classList.add('font-bold','text-gray-900'); row.classList.add('row-selected'); }catch(_e){}
      if(e && e.clientX!=null){ try{ window.__setPermanentTick(row, e.clientX, e.clientY); }catch(_e){} } 
      try{ row.classList.add('row-glow'); setTimeout(function(){ row.classList.remove('row-glow'); }, 1000); }catch(_e){}
      handleInlineRowResult(st.correct===true, row); 
    });
    bF.addEventListener('click',(e)=>{ 
      // NgÄƒn cháº·n chá»n láº¡i sau khi Ä‘Ã£ chá»n
      row.dataset.selected = 'true';
      bF.classList.remove('bg-red-500', 'text-white');
      bF.classList.add('bg-red-600', 'ring-2', 'ring-red-400', 'text-white');
      bT.classList.remove('bg-green-600', 'ring-2', 'ring-green-400');
      bT.classList.add('bg-green-500', 'text-white');
      try{ txt.classList.add('font-bold','text-gray-900'); row.classList.add('row-selected'); }catch(_e){}
      if(e && e.clientX!=null){ try{ window.__setPermanentTick(row, e.clientX, e.clientY); }catch(_e){} } 
      try{ row.classList.add('row-glow'); setTimeout(function(){ row.classList.remove('row-glow'); }, 1000); }catch(_e){}
      handleInlineRowResult(st.correct===false, row); 
    });
    btnWrap.appendChild(bT); btnWrap.appendChild(bF); row.appendChild(txt); row.appendChild(btnWrap); wrap.appendChild(row);
  });
  const check=document.createElement('button'); check.className='btn-hover mt-4 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg'; check.innerText='Kiá»ƒm tra Ä‘Ã¡p Ã¡n';
  check.addEventListener('click',()=>{
    const rows=[...wrap.querySelectorAll('.checked-row')];
    const total=(q.statements||[]).length;
    const correct=rows.filter(r=>r.dataset.rowCorrect==='true').length;
    const ok=(correct===total)&&(rows.length===total);
    handleResult(ok, check);
  });
  wrap.appendChild(check); answerArea().appendChild(wrap);
}

function renderMatching(q){
  const container=document.createElement('div'); container.className='relative bg-white rounded-2xl shadow p-4 md:p-6';
  const grid=document.createElement('div'); grid.className='grid grid-cols-2 gap-12 md:gap-16'; // tÄƒng khoáº£ng cÃ¡ch
  const colA=document.createElement('div'); const colB=document.createElement('div');
  colA.innerHTML='<div class="font-bold text-blue-700 mb-2">Cá»™t A</div>'; colB.innerHTML='<div class="font-bold text-blue-700 mb-2">Cá»™t B</div>';
  const listA=document.createElement('div'); listA.className='space-y-4';
  const listB=document.createElement('div'); listB.className='space-y-4';
  (q.columnA||[]).forEach(txt=>{ const it=document.createElement('button'); it.className='btn-answer w-full text-left p-3 bg-sky-50 hover:bg-sky-100 rounded-xl border border-sky-200'; it.innerText=txt; it.dataset.key=txt; listA.appendChild(it); });
  (q.columnB||[]).forEach(txt=>{ const it=document.createElement('button'); it.className='btn-answer w-full text-left p-3 bg-rose-50 hover:bg-rose-100 rounded-xl border border-rose-200'; it.innerText=txt; it.dataset.key=txt; listB.appendChild(it); });
  colA.appendChild(listA); colB.appendChild(listB); grid.appendChild(colA); grid.appendChild(colB); container.appendChild(grid);

  const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
  svg.setAttribute('class','absolute inset-0 pointer-events-none'); container.appendChild(svg);

  let selectedA=null, selectedB=null; const links=[];
  function getCenterRight(el){ const r=el.getBoundingClientRect(), p=container.getBoundingClientRect(); return {x:r.left-p.left+r.width, y:r.top-p.top+r.height/2}; }
  function getCenterLeft(el){ const r=el.getBoundingClientRect(), p=container.getBoundingClientRect(); return {x:r.left-p.left, y:r.top-p.top+r.height/2}; }
  function redraw(){
    while(svg.firstChild) svg.removeChild(svg.firstChild);
    links.forEach(link=>{
      const aEl=[...listA.children].find(n=>n.dataset.key===link.aKey);
      const bEl=[...listB.children].find(n=>n.dataset.key===link.bKey);
      if(!aEl||!bEl) return;
      const p1=getCenterRight(aEl), p2=getCenterLeft(bEl);
      const path=document.createElementNS('http://www.w3.org/2000/svg','path');
      const d='M '+p1.x+' '+p1.y+' C '+(p1.x+60)+' '+p1.y+', '+(p2.x-60)+' '+p2.y+', '+p2.x+' '+p2.y;
      path.setAttribute('d', d); path.setAttribute('fill','none'); path.setAttribute('stroke','#60a5fa'); path.setAttribute('stroke-width','4'); path.setAttribute('stroke-linecap','round');
      svg.appendChild(path);
    });
  }
  window.addEventListener('resize',()=>{ if(!document.getElementById('page-quiz').classList.contains('hidden')) redraw(); });

  listA.querySelectorAll('button').forEach(btn=> btn.addEventListener('click', ()=>{
    // XÃ³a liÃªn káº¿t cÅ© náº¿u cÃ³
	    const existingLinkIndex = links.findIndex(l => l.aKey === btn.dataset.key);
	    if (existingLinkIndex !== -1) {
	        links.splice(existingLinkIndex, 1);
	    }
	    
	    // Náº¿u Ä‘ang chá»n A nÃ y, thÃ¬ bá» chá»n
	    if(selectedA === btn.dataset.key){
	        selectedA = null;
	        btn.classList.remove('ring','ring-4','ring-blue-400', 'bg-sky-200');
	        redraw();
	        return;
	    }
	
	    selectedA=btn.dataset.key; 
	    listA.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400', 'bg-sky-200')); 
	    btn.classList.add('ring','ring-4','ring-blue-400', 'bg-sky-200');
	    
	    // Náº¿u Ä‘Ã£ cÃ³ B Ä‘Æ°á»£c chá»n, thá»±c hiá»‡n ná»‘i ngay
	    if(selectedB){
	      // XÃ³a ná»‘i cÅ© cá»§a B
	      const oldLinkIndex = links.findIndex(l => l.bKey === selectedB);
	      if (oldLinkIndex !== -1) {
	          links.splice(oldLinkIndex, 1);
	      }
	      
	      links.push({aKey:selectedA, bKey:selectedB});
	      selectedA=null; selectedB=null; 
	      listA.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400', 'bg-sky-200')); 
	      listB.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-red-400', 'bg-rose-200')); 
	      redraw();
	    }
  }));
  
  listB.querySelectorAll('button').forEach(btn=> btn.addEventListener('click', ()=>{
    // XÃ³a liÃªn káº¿t cÅ© náº¿u cÃ³
	    const existingLinkIndex = links.findIndex(l => l.bKey === btn.dataset.key);
	    if (existingLinkIndex !== -1) {
	        links.splice(existingLinkIndex, 1);
	    }
	    
	    // Náº¿u Ä‘ang chá»n B nÃ y, thÃ¬ bá» chá»n
	    if(selectedB === btn.dataset.key){
	        selectedB = null;
	        btn.classList.remove('ring','ring-4','ring-red-400', 'bg-rose-200');
	        redraw();
	        return;
	    }
	    
	    selectedB=btn.dataset.key;
	    listB.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-red-400', 'bg-rose-200')); 
	    btn.classList.add('ring','ring-4','ring-red-400', 'bg-rose-200');
	    
	    // Náº¿u Ä‘Ã£ cÃ³ A Ä‘Æ°á»£c chá»n, thá»±c hiá»‡n ná»‘i ngay
	    if(selectedA){
	      // XÃ³a ná»‘i cÅ© cá»§a A
	      const oldLinkIndex = links.findIndex(l => l.aKey === selectedA);
	      if (oldLinkIndex !== -1) {
	          links.splice(oldLinkIndex, 1);
	      }
	      
	      links.push({aKey:selectedA, bKey:selectedB});
	      selectedA=null; selectedB=null; 
	      listA.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400', 'bg-sky-200')); 
	      listB.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-red-400', 'bg-rose-200')); 
	      redraw();
	    }
  }));
  
  // ThÃªm nÃºt xÃ³a ná»‘i
  const clearBtn = document.createElement('button');
  clearBtn.className='btn-hover mt-4 w-full p-2 bg-gray-300 text-gray-800 rounded-xl font-bold text-sm'; 
  clearBtn.innerText='XÃ³a táº¥t cáº£ cÃ¡c ná»‘i';
  clearBtn.addEventListener('click', ()=>{
    links.length = 0; // XÃ³a táº¥t cáº£ cÃ¡c ná»‘i
    selectedA=null; selectedB=null;
    listA.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400', 'bg-sky-200')); 
	    listB.querySelectorAll('button').forEach(b=>b.classList.remove('ring','ring-4','ring-red-400', 'bg-rose-200')); 
	    redraw();
  });
  container.appendChild(clearBtn);

  const check=document.createElement('button'); check.className='btn-hover mt-6 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg'; check.innerText='Kiá»ƒm tra Ä‘Ã¡p Ã¡n';
  check.addEventListener('click', ()=>{
    const ok = Object.keys(q.correctMatches||{}).every(k=>{
      const t=q.correctMatches[k]; const found=links.find(l=>l.aKey===k && l.bKey===t);
      return !!found;
    });
    handleResult(ok, check);
  });
  container.appendChild(check);
  answerArea().appendChild(container);
  setTimeout(redraw,60);
}

function renderFillInBlank(q){
  const wrap=document.createElement('div'); wrap.className='space-y-4';
  const sent=document.createElement('div'); sent.className='text-lg bg-white rounded-2xl shadow p-4 leading-relaxed';
  const parts=q.sentence.split('[BLANK]'); const inputs=[];
  parts.forEach((p,i)=>{
    sent.appendChild(document.createTextNode(p));
    if(i<parts.length-1){ const inp=document.createElement('input'); inp.type='text'; inp.className='mx-2 px-3 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400'; inputs.push(inp); sent.appendChild(inp); }
  });
  wrap.appendChild(sent);
  if(q.hints && q.hints.length){
    const hint=document.createElement('div'); hint.className='flex flex-wrap gap-2';
    q.hints.forEach(h=>{ const tag=document.createElement('button'); tag.className='btn-hover px-3 py-1.5 rounded-full bg-amber-100 text-amber-800 border border-amber-200'; tag.innerText=h; tag.addEventListener('click',()=>{ const t=inputs.find(i=>!i.value); if(t){ t.value=h; t.focus(); } }); hint.appendChild(tag); });
    wrap.appendChild(hint);
  }
  const check=document.createElement('button'); check.className='btn-hover mt-2 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg'; check.innerText='Kiá»ƒm tra Ä‘Ã¡p Ã¡n';
  check.onclick=()=>{
    const filled=inputs.map(i=>i.value.trim().toLowerCase());
    const correct=(q.correctAnswers||[]).map(s=>s.trim().toLowerCase());
    const ok = filled.length===correct.length && filled.every((v,i)=> v===correct[i]);
    handleResult(ok, check);
  };
  wrap.appendChild(check);
  answerArea().appendChild(wrap);
}

function renderFillInBlankChoice(q){
  const wrap=document.createElement('div'); wrap.className='space-y-4';
  const choice=document.createElement('div'); choice.className='flex justify-center gap-4 mb-4';
  (q.options||[]).forEach(text=>{
    const b=document.createElement('button'); b.className='btn-answer text-lg p-3 px-6 bg-white rounded-xl shadow border-2 border-transparent hover:border-blue-500';
    b.innerText=text; b.dataset.choice=text;
    b.addEventListener('click',()=>{ choice.querySelectorAll('button').forEach(x=>x.classList.remove('bg-blue-500','text-white','ring','ring-blue-400')); b.classList.add('bg-blue-500','text-white','ring','ring-blue-400'); });
    choice.appendChild(b);
  });
  wrap.appendChild(choice);

  const sent=document.createElement('div'); sent.className='text-lg bg-white rounded-2xl shadow p-4 leading-relaxed';
  const parts=q.sentence.split('[BLANK]'); const inputs=[];
  parts.forEach((p,i)=>{
    sent.appendChild(document.createTextNode(p));
    if(i<parts.length-1){ const inp=document.createElement('input'); inp.type='text'; inp.className='mx-2 px-3 py-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400'; inputs.push(inp); sent.appendChild(inp); }
  });
  wrap.appendChild(sent);

  const check=document.createElement('button'); check.className='btn-hover mt-2 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg'; check.innerText='Kiá»ƒm tra Ä‘Ã¡p Ã¡n';
  check.onclick=()=>{
    const sel=choice.querySelector('.bg-blue-500'); const choiceOk = !!sel && sel.dataset.choice===q.correctChoice;
    const filled=inputs.map(i=>i.value.trim().toLowerCase());
    const correct=(q.correctAnswers||[]).map(s=>s.trim().toLowerCase());
    const fillOk = filled.length===correct.length && filled.every((v,i)=> v===correct[i]);
    handleResult(choiceOk && fillOk, check);
  };
  wrap.appendChild(check);
  answerArea().appendChild(wrap);
}

function renderMatchingImage(q){
  const transformed={...q, columnA:(q.columnA||[]).map(it=>it.text)};
  renderMatching(transformed);
  // gáº¯n svg cá»™t A
  const colA = document.querySelector('#quiz-answer-area .space-y-4');
  if(colA){
    (q.columnA||[]).forEach((item,idx)=>{
      const btn = colA.children[idx];
      if(btn && item.image && item.image.indexOf('svg:')===0){
        const holder=document.createElement('div'); holder.innerHTML = svgIcon(item.image.split(':')[1]);
        btn.prepend(holder.firstChild);
      }
    });
  }
}

// ====== Náº¡p cÃ¢u há»i ======
// ThÃªm hÃ m speakText Ä‘á»ƒ xá»­ lÃ½ TTS
function speakText(text){
  if(!text) return;
  // Sá»­ dá»¥ng API TTS cá»§a trÃ¬nh duyá»‡t
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'vi-VN';
  speechSynthesis.cancel(); // Há»§y bá» báº¥t ká»³ lá»i nÃ³i nÃ o Ä‘ang diá»…n ra
  speechSynthesis.speak(utterance);
}
if(nextBtn) nextBtn.addEventListener('click', ()=>{
  const list=currentLessonQuestions;
  if(currentQuizIndex>=list.length-1){ showLessonSummary(); } else { currentQuizIndex++; loadNewQuizQuestion(); }
});

function loadNewQuizQuestion(){
  // XÃ³a cÃ¡c lá»±a chá»n ÄÃºng/Sai Ä‘Ã£ chá»n trÆ°á»›c Ä‘Ã³
  document.querySelectorAll('.checked-row').forEach(row => {
    row.classList.remove('checked-row', 'bg-green-50', 'bg-red-50');
    row.removeAttribute('data-row-correct');
    row.removeAttribute('data-selected');
    row.querySelectorAll('.btn-answer').forEach(btn => {
      btn.classList.remove('bg-green-600', 'ring-2', 'ring-green-400', 'bg-red-600', 'ring-2', 'ring-red-400');
      // Äáº·t láº¡i mÃ u máº·c Ä‘á»‹nh cho nÃºt ÄÃºng/Sai
      if(btn.innerText === 'ÄÃºng') {
        btn.classList.add('bg-green-500', 'text-white');
      } else if (btn.innerText === 'Sai') {
        btn.classList.add('bg-red-500', 'text-white');
      }
    });
  });
  const list=currentLessonQuestions;
  if(!list || !list.length){
    topicEl.innerText = currentLessonKey || '';
    qText.innerText = 'ChÆ°a cÃ³ dá»¯ liá»‡u.';
    answerArea().innerHTML = '';
    return;
  }
  if(currentQuizIndex>=list.length) currentQuizIndex=0;
  currentQuestionData = list[currentQuizIndex];
  // Náº¿u cÃ¢u há»i cÃ³ máº£ng options, xÃ¡o trá»™n Ä‘á»ƒ trÃ¡nh thuá»™c vá»‹ trÃ­ Ä‘Ã¡p Ã¡n
  if (Array.isArray(currentQuestionData.options)) {
    // Táº¡o báº£n sao trÆ°á»›c khi shuffle Ä‘á»ƒ khÃ´ng phÃ¡ dá»¯ liá»‡u gá»‘c
    currentQuestionData.options = p2Shuffle([...currentQuestionData.options]);
  }
  topicEl.innerText = (quizData[currentGrade][currentLessonKey]||{}).title || currentLessonKey;
  levelEl.innerText = getLevelLabel(currentQuestionData.level||1);
  qText.innerText = currentQuestionData.question || '';
  const progress = Math.round(((currentQuizIndex+1)/list.length)*100); progressEl.style.width = progress + '%';
  clearQA();

  if(currentQuestionData.type==='image-question' && typeof currentQuestionData.image==='string' && currentQuestionData.image.indexOf('svg:')===0){
    const box=document.createElement('div'); box.className='my-2 flex justify-center'; box.innerHTML = svgIcon(currentQuestionData.image.split(':')[1]);
    answerArea().appendChild(box);
  }

  switch(currentQuestionData.type){
    case 'multiple-choice':
    case 'image-question': renderMultipleChoice(currentQuestionData); break;
    case 'image-choice': renderImageChoice(currentQuestionData); break;
    case 'true-false': renderTrueFalse(currentQuestionData); break;
    case 'matching': renderMatching(currentQuestionData); break;
    case 'matching-image': renderMatchingImage(currentQuestionData); break;
    case 'fill-in-blank': renderFillInBlank(currentQuestionData); break;
    case 'fill-in-blank-choice': renderFillInBlankChoice(currentQuestionData); break;
    default: answerArea().innerHTML = '<div class="text-gray-600">(ChÆ°a há»— trá»£ loáº¡i cÃ¢u há»i nÃ y)</div>';
  }
  speakText(currentQuestionData.question||'');
}

// ====== Káº¿t quáº£ ======
function showCorrectEffect(){
  const overlay=document.getElementById('correct-overlay'); if(!overlay) return;
  overlay.classList.remove('hidden');
  playCorrect();
  setTimeout(()=>overlay.classList.add('hidden'), 1200);
}
function showIncorrectEffect(){
  playIncorrect();
  const card=document.getElementById('quiz-card'); if(card){ card.classList.add('shake'); setTimeout(()=>card.classList.remove('shake'), 500); }
}
function handleResult(isCorrect, triggerBtn){
  document.querySelectorAll('#quiz-answer-area button').forEach(b=>b.disabled=true);
  if(triggerBtn){ triggerBtn.classList.add(isCorrect?'bg-green-500':'bg-red-500','text-white'); }
  if(isCorrect){
    lessonCorrectAnswers++;
    showCorrectEffect();
    feedbackEl.innerText='ChÃ­nh xÃ¡c! ğŸ¥³';
    feedbackEl.className='mt-6 text-xl font-medium p-4 rounded-xl bg-green-100 text-green-800';
  } else {
    showIncorrectEffect();
    feedbackEl.innerText='Sai rá»“i! ğŸ˜¥';
    feedbackEl.className='mt-6 text-xl font-medium p-4 rounded-xl bg-red-100 text-red-800';
  }
  const list=currentLessonQuestions;
  nextBtn.innerText = (currentQuizIndex>=list.length-1) ? 'HOÃ€N THÃ€NH BÃ€I ğŸ' : 'CÃ¢u tiáº¿p theo â”';
  feedbackEl.classList.remove('hidden'); nextBtn.classList.remove('hidden');
}
function handleInlineRowResult(ok, rowEl){
  rowEl.classList.add('checked-row'); rowEl.dataset.rowCorrect = ok?'true':'false';
  rowEl.classList.toggle('bg-green-50', ok);
  rowEl.classList.toggle('bg-red-50', !ok);
}
async function showLessonSummary(){
  try{
    // Dá»«ng Ä‘á»“ng há»“ báº¥m giá»
    clearInterval(lessonStopwatchInterval);
    const total = currentLessonQuestions.length || 0;
    const correct = lessonCorrectAnswers || 0;

    // Disable the next/submit button to prevent double submissions
    try{
      if(typeof nextBtn !== 'undefined' && nextBtn){ nextBtn.disabled = true; }
    }catch(_){}

    // 1) Gá»­i submit_run náº¿u cÃ³ run_id + token
    let awarded = 0, serverMsg = '';
    try{
      const r = await p2SubmitRunIfPossible({
        correct: correct,
        total: total,
        maxScore: total * 5 // cÃ¹ng thang â€œsaoâ€ cÅ©: 5 Ä‘iá»ƒm / cÃ¢u Ä‘Ãºng
      });
      if(r && r.ok){
        // scoring API: gather awarded points, final score and accuracy
        awarded = Number(r.awarded_points || 0);
        const finalScore = (r.score && typeof r.score.score_final !== 'undefined') ? r.score.score_final : 0;
        const accPct = total > 0 ? Math.round((correct / total) * 100) : 0;
        serverMsg = '';
        serverMsg += 'Äiá»ƒm cá»™ng: ' + awarded + '\n';
        serverMsg += 'Äiá»ƒm sá»‘: ' + finalScore + '\n';
        serverMsg += 'Äá»™ chÃ­nh xÃ¡c: ' + accPct + '%\n';
        if(r.policy && typeof r.policy.remaining_today !== 'undefined'){
          serverMsg += 'CÃ²n láº¡i hÃ´m nay: ' + r.policy.remaining_today;
        }
      }else if(r){
        // show error or reject reason from server clearly
        const err = r.error || r.reject || 'Lá»—i khÃ´ng xÃ¡c Ä‘á»‹nh';
        serverMsg = 'KhÃ´ng cá»™ng Ä‘iá»ƒm: ' + err;
      }
    }catch(_){
      /* offline hoáº·c chÆ°a Ä‘Äƒng nháº­p */
    }

    // 2) Váº«n cáº­p nháº­t â€œKáº¿t quáº£ há»c táº­pâ€ cá»¥c bá»™ Ä‘á»ƒ UI cÅ© cháº¡y bÃ¬nh thÆ°á»ng
    try{
      const me = getAuth() || {};
      const g  = me.grade || 'NA';
      const s  = (window.userScores && window.userScores[g]) || null;
      if (s){
        // Giá»¯ logic sao cÅ© (náº¿u báº¡n váº«n muá»‘n hiá»ƒn thá»‹ sao trong pháº§n Káº¿t quáº£ há»c táº­p cÅ©)
        const stars = Math.round((correct / Math.max(1, total)) * 3);
        s.totalStars = (s.totalStars || 0) + stars;
        s.completedCount = (s.completedCount || 0) + 1;
        s.correctAnswers = (s.correctAnswers || 0) + correct;
        s.totalAnswers   = (s.totalAnswers || 0) + total;
        window.saveScores && window.saveScores();
      }
    }catch(_){}

    // 3) Hiá»ƒn thá»‹ popup tá»•ng káº¿t nhÆ° cÅ©, chá»‰ bá»• sung dÃ²ng Ä‘iá»ƒm server (náº¿u cÃ³)
    // Sá»­ dá»¥ng khung popup máº·c Ä‘á»‹nh (#summary-popup) vÃ  pháº§n ná»™i dung (#summary-popup-content)
    const popup = document.getElementById('summary-popup');
    const popupContent = document.getElementById('summary-popup-content');
    if(popupContent){
      // Táº¡o chuá»—i tÃ³m táº¯t vá»›i káº¿t quáº£ vÃ  thÃ´ng Ä‘iá»‡p server (náº¿u cÃ³)
      // Sá»­ dá»¥ng xuá»‘ng dÃ²ng Ä‘á»ƒ giá»¯ Ä‘á»‹nh dáº¡ng trong tháº» <p> cÃ³ whitespace-pre-line
      let content = '';
      content += 'HOÃ€N THÃ€NH BÃ€I! ğŸ¥³\n';
      content += 'ÄÃºng: ' + correct + '/' + total + '\n';
      if(serverMsg){
        content += serverMsg;
      }
      popupContent.innerText = content;
    }
    if(popup) popup.classList.remove('hidden');

    // áº¨n pháº£n há»“i vÃ  nÃºt cÃ¢u tiáº¿p theo Ä‘á»ƒ trÃ¡nh nháº¥n thÃªm
    if(feedbackEl) feedbackEl.classList.add('hidden');
    if(nextBtn) nextBtn.classList.add('hidden');
  }catch(e){
    // fallback cÅ© náº¿u cÃ³ lá»—i: hiá»ƒn thá»‹ popup tiÃªu chuáº©n
    const popup = document.getElementById('summary-popup');
    if(popup) popup.classList.remove('hidden');
  }finally{
    // reset run
    lessonRunId = null;
    lessonQuizId = null;
  }
}

// ====== GAME (an toÃ n) ======
const playerBear=document.getElementById('player-bear');
const playerRabbit=document.getElementById('player-rabbit');
const gameQuestionText=document.getElementById('game-question-text');
const gameOptions=document.querySelectorAll('.game-option');
const gameFeedback=document.getElementById('game-feedback');
let raceTrackWidth=300, bearPosition=0, rabbitPosition=0, gameStep=0;
function updateRaceTrackWidth(){ const t=document.getElementById('race-track'); if(t){ raceTrackWidth = t.offsetWidth - 60; } }
function resetGame(){
  updateRaceTrackWidth(); gameStep = raceTrackWidth / 5;
  bearPosition=0; rabbitPosition=0;
  if(playerBear) playerBear.style.transform='translateX(0px)';
  if(playerRabbit) playerRabbit.style.transform='translateX(0px)';
  loadNewGameQuestion();
}
window.addEventListener('resize', ()=>{
  const pg = document.getElementById('page-game');
  if(pg && !pg.classList.contains('hidden')){
    updateRaceTrackWidth(); gameStep=raceTrackWidth/5;
    if(playerBear) playerBear.style.transform='translateX('+bearPosition+'px)';
    if(playerRabbit) playerRabbit.style.transform='translateX('+rabbitPosition+'px)';
  }
});
gameOptions.forEach(btn=> btn.addEventListener('click', ()=>handleGameAnswer(btn)));
function handleGameAnswer(btn){
  const isCorrect = btn.dataset.correct==='true';
  gameOptions.forEach(b=>b.disabled=true);
  if(isCorrect){
    playCorrect(); btn.classList.add('bg-green-500','text-white');
    gameFeedback.innerText='ÄÃºng rá»“i! Gáº¥u tiáº¿n lÃªn! ğŸ»'; gameFeedback.className='mt-6 text-xl font-medium p-4 rounded-xl bg-green-100 text-green-800';
    bearPosition += gameStep; if(playerBear) playerBear.style.transform='translateX('+Math.min(bearPosition, raceTrackWidth)+'px)';
  } else {
    playIncorrect(); btn.classList.add('bg-red-500','text-white');
    gameFeedback.innerText='Sai rá»“i! Thá» cháº¡y máº¥t! ğŸ°'; gameFeedback.className='mt-6 text-xl font-medium p-4 rounded-xl bg-red-100 text-red-800';
    rabbitPosition += gameStep; if(playerRabbit) playerRabbit.style.transform='translateX('+Math.min(rabbitPosition, raceTrackWidth)+'px)';
  }
  gameFeedback.classList.remove('hidden');
  if(bearPosition>=raceTrackWidth){
    gameFeedback.innerText='Gáº¥u tháº¯ng rá»“i! Hoan hÃ´! ğŸ¥³'; gameFeedback.className='mt-6 text-xl font-medium p-4 rounded-xl bg-blue-100 text-blue-800';
  } else if(rabbitPosition>=raceTrackWidth){
    gameFeedback.innerText='Thá» tháº¯ng máº¥t rá»“i! Cá»‘ lÃªn láº§n sau! ğŸ˜¥'; gameFeedback.className='mt-6 text-xl font-medium p-4 rounded-xl bg-yellow-100 text-yellow-800';
  } else {
    setTimeout(loadNewGameQuestion, 1600);
  }
}
function loadNewGameQuestion(){
  if(!gameOptions.length) return;
  gameFeedback.classList.add('hidden');
  gameOptions.forEach((b)=>{
    b.disabled=false;
    b.className='game-option btn-hover text-left text-lg p-5 bg-white rounded-2xl shadow border-2 border-transparent hover:border-blue-500';
  });
  if(gameQuestionText) gameQuestionText.innerText='CÃ¢u 2: ÄÃ¢u lÃ  má»™t thiáº¿t bá»‹ LÆ¯U TRá»®?';
  const trueOpt = document.querySelector('.game-option[data-correct="true"]');
  if(trueOpt) trueOpt.dataset.correct='false';
  const opts = document.querySelectorAll('.game-option');
  if(opts[2]) opts[2].dataset.correct='true';
}


// === v2.5.7-stable wrappers ===
try{
  if (typeof updatePageContent === 'function'){
    const __u = updatePageContent;
    window.updatePageContent = function(){ return safeCall(__u, ...arguments); };
  }
}catch(e){ if(window.__gauPanic) __gauPanic(e); }
try{
  if (typeof startLesson === 'function'){
    const __s = startLesson;
    window.startLesson = function(){ return safeCall(__s, ...arguments); };
  }
}catch(e){ if(window.__gauPanic) __gauPanic(e); }
try{
  if (typeof showPage === 'function'){
    const __p = showPage;
    window.showPage = function(){ return safeCall(__p, ...arguments); };
  }
}catch(e){ if(window.__gauPanic) __gauPanic(e); }</script>
<script>

/* ===============================
   v2.5.3 â€” Vietnamese-only TTS override
   =============================== */
(function(){
  // Graceful stop helper (kept global for modules)
  window.stopSpeak = function(){
    try{ speechSynthesis && speechSynthesis.cancel(); }catch(e){}
    var a = document.getElementById('tts-audio');
    if(a){ try{ a.pause(); a.currentTime = 0; }catch(e){} }
  };

  // Load voices reliably
  function getVoicesAsync(){
    return new Promise(function(resolve){
      try{
        var voices = window.speechSynthesis ? speechSynthesis.getVoices() : [];
        if(voices && voices.length){ return resolve(voices); }
        var tries = 0;
        var iv = setInterval(function(){
          tries += 1;
          try{
            voices = speechSynthesis.getVoices();
            if(voices && voices.length){
              clearInterval(iv);
              return resolve(voices);
            }
          }catch(e){}
          if(tries >= 15){ // ~1.5s
            clearInterval(iv);
            return resolve([]);
          }
        }, 100);
      }catch(e){
        resolve([]);
      }
    });
  }

  // Hoisted function declaration to override any previous definitions cleanly
  // (Later-in-file function declarations take precedence in most browsers.)
  window.speakText = function(text){
    try{
      if(!text || !String(text).trim()){
        window.stopSpeak();
        return;
      }

      var hasSpeech = (typeof window.speechSynthesis !== 'undefined');
      if(hasSpeech){
        // Try Web Speech API with Vietnamese voice first
        getVoicesAsync().then(function(voices){
          var used = false;
          try{
            var viVoices = (voices||[]).filter(function(v){
              return v && v.lang && v.lang.toLowerCase().indexOf('vi') === 0;
            });
            if(viVoices.length){
              var u = new SpeechSynthesisUtterance(String(text));
              u.lang  = viVoices[0].lang || 'vi-VN';
              u.voice = viVoices[0];
              u.rate  = 1.0;
              u.pitch = 1.0;
              try{ speechSynthesis.cancel(); }catch(e){}
              speechSynthesis.speak(u);
              used = true;
            }
          }catch(e){ /* fallback below */ }

          if(!used){
            // Fallback: Google TTS Vietnamese
            try{
              var a = document.getElementById('tts-audio');
              if(!a) return;
              var shortText = String(text).slice(0, 200);
              var url = 'https://translate.google.com/translate_tts?ie=UTF-8&q='
                        + encodeURIComponent(shortText)
                        + '&tl=vi-VN&client=tw-ob';
              a.src = url;
              a.play().then(function(){
                setTimeout(function(){ try{ a.pause(); a.currentTime = 0; }catch(e){} }, 8000);
              }).catch(function(){});
            }catch(e){}
          }
        });
        return;
      }

      // No Web Speech â†’ Play fallback immediately
      try{
        var a = document.getElementById('tts-audio');
        if(!a) return;
        var shortText = String(text).slice(0, 200);
        var url = 'https://translate.google.com/translate_tts?ie=UTF-8&q='
                  + encodeURIComponent(shortText)
                  + '&tl=vi-VN&client=tw-ob';
        a.src = url;
        a.play().then(function(){
          setTimeout(function(){ try{ a.pause(); a.currentTime = 0; }catch(e){} }, 8000);
        }).catch(function(){});
      }catch(e){}
    }catch(e){
      // As a last resort, just stop silently
      window.stopSpeak();
    }
  };
})();

</script>

    <!-- BXH mini game logic: gá»i API Ä‘iá»ƒm vÃ  báº£ng xáº¿p háº¡ng -->
    <script>
    // BXH mini game - fetch leaderboard & report score
    (function(){
      const MINI_API = 'https://script.google.com/macros/s/AKfycbzYZb5RbMEFSoEiOW1W90nP605kzraxmD3Ut1_tO_IKVBgD5TdMNHdh0EwAUHRJLI1pXQ/exec';
      function getAuthToken(){
        return localStorage.getItem('token') || localStorage.getItem('auth_token') || localStorage.getItem('gcht_token') || '';
      }
      async function fetchMiniBXH(){
        const tbody = document.getElementById('mini-bxh-body');
        const errEl = document.getElementById('mini-bxh-err');
        // Reset top3 display
        ['1','2','3'].forEach(i => {
          const nm = document.getElementById('mini-top'+i+'-name');
          const cl = document.getElementById('mini-top'+i+'-class');
          const pt = document.getElementById('mini-top'+i+'-points');
          if(nm) nm.textContent = 'â€”';
          if(cl) cl.textContent = 'â€”';
          if(pt) pt.textContent = '0 Ä‘iá»ƒm';
        });
        if(tbody){
          tbody.innerHTML = '<tr><td colspan="4" class="px-2 py-2 text-center text-gray-500">Äang táº£i dá»¯ liá»‡u...</td></tr>';
        }
        if(errEl){
          errEl.classList.add('hidden');
          errEl.textContent = '';
        }
        const token = getAuthToken() || '';
        try {
          const payload = { action: 'leaderboard', scope: 'daily', limit: 50 };
          if (token) payload.token = token;
          const res = await fetch(MINI_API, {
            method: 'POST',
            headers: { 'Content-Type': 'text/plain;charset=UTF-8' },
            body: JSON.stringify(payload)
          });
          const data = await res.json();
          if(!data.ok){
            if(errEl){ errEl.classList.remove('hidden'); errEl.textContent = data.error || 'Lá»—i táº£i BXH.'; }
            return;
          }
          const rows = data.rows || [];
          // Fill top3
          rows.slice(0,3).forEach((r, idx) => {
            const i = idx + 1;
            const nm = document.getElementById('mini-top'+i+'-name');
            const cl = document.getElementById('mini-top'+i+'-class');
            const pt = document.getElementById('mini-top'+i+'-points');
            if(nm) nm.textContent = r.name || 'â€”';
            if(cl) cl.textContent = r['class'] || r.grade || '';
            if(pt) pt.textContent = (r.points || 0) + ' Ä‘iá»ƒm';
          });
          // Build table rows
          if(tbody){
            let html = '';
            let pos = 1;
            rows.forEach(r => {
              let label = pos;
              if(pos === 1) label = 'ğŸ¥‡'; else if(pos === 2) label = 'ğŸ¥ˆ'; else if(pos === 3) label = 'ğŸ¥‰';
              const trClass = pos <= 3 ? 'bg-yellow-50' : '';
              html += `<tr class="${trClass} divide-x divide-gray-200"><td class="px-2 py-1">${label}</td><td class="px-2 py-1">${r.name||''}</td><td class="px-2 py-1">${r['class']||r.grade||''}</td><td class="px-2 py-1 font-bold">${r.points||0}</td></tr>`;
              pos++;
            });
            tbody.innerHTML = html;
          }
        } catch(ex){
          if(errEl){ errEl.classList.remove('hidden'); errEl.textContent = 'Lá»—i káº¿t ná»‘i.'; }
        }
      }
      async function miniStartRun(gameId){
        const token = getAuthToken();
        if(!token) return null;
        try {
          const res = await fetch(MINI_API, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'start_run', token: token, game_id: gameId })
          });
          const data = await res.json();
          return (data && data.ok) ? data.run_id : null;
        } catch(ex){ return null; }
      }
      async function miniSubmitScore(runId, gameId, rawPoints){
        const token = getAuthToken();
        if(!token) return;
        try {
          await fetch(MINI_API, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action: 'submit_score', token: token, run_id: runId, game_id: gameId, raw_points: rawPoints })
          });
          // Refresh BXH soon after submit
          if(window.fetchMiniBXH) setTimeout(window.fetchMiniBXH, 800);
        } catch(ex){}
      }
      // Global export
      window.fetchMiniBXH = fetchMiniBXH;
      window.miniStartRun = miniStartRun;
      window.miniSubmitScore = miniSubmitScore;
      // Bind refresh button
      document.addEventListener('DOMContentLoaded', function(){
        const btn = document.getElementById('mini-bxh-refresh');
        if(btn) btn.addEventListener('click', function(){ fetchMiniBXH(); });
      });
      // Override showPage to refresh BXH on page load
      const prevShowPage = window.showPage;
      window.showPage = function(id){
        if(prevShowPage) prevShowPage(id);
        if(id === 'page-game'){
          setTimeout(fetchMiniBXH, 300);
        }
      };
    })();
    </script>

    <!-- BEGIN: user-results (local-only stats) -->
    <style data-module="user-results">
      /* Styles scoped to the results page. */
      #page-results #user-results-container {
        margin-top: 1.5rem;
      }
      #page-results table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
      }
      #page-results th,
      #page-results td {
        padding: 0.5rem 0.75rem;
        text-align: left;
        border-bottom: 1px solid #e5e7eb; /* gray-200 */
      }
      #page-results thead th {
        background-color: #f9fafb; /* gray-50 */
        font-weight: 600;
        color: #374151; /* gray-700 */
      }
      #page-results tbody tr:nth-child(odd) {
        background-color: #fdfdfd; /* subtle alternating rows */
      }
    </style>
    <script data-module="user-results">
      (function(){
        'use strict';
        // Utility: get current userId. Uses gov_id if available, otherwise falls back to lowercased name+grade.
        function getUserId(){
          var auth = null;
          try { auth = (typeof getAuth === 'function') ? getAuth() : null; } catch(_){ auth = null; }
          if(auth && auth.gov_id){ return String(auth.gov_id); }
          var name = (auth && auth.name) ? String(auth.name) : 'anonymous';
          var grade= (auth && auth.grade)? String(auth.grade) : '';
          return (name + ':' + grade).toLowerCase();
        }
        // Load stats for current user from localStorage
        function loadStats(){
          var uid = getUserId();
          var key = 'gchth:stats:' + uid;
          try {
            var raw = localStorage.getItem(key);
            if(raw){ return JSON.parse(raw); }
          }catch(e){ /* ignore */ }
          // default structure
          return { runs: [], agg: { correct: 0, total: 0, count: 0 }, bestTotal: 0, daily: {} };
        }
        // Save stats to localStorage
        function saveStats(stats){
          var uid = getUserId();
          var key = 'gchth:stats:' + uid;
          try {
            localStorage.setItem(key, JSON.stringify(stats));
          }catch(e){ /* ignore */ }
        }
        // Record a new run; detail: {quizId, score, correct, total, timeMs}
        function recordRun(detail){
          if(!detail){ return; }
          var stats = loadStats();
          var now = Date.now();
          var ymd = new Date(now).toISOString().slice(0,10);
          var run = {
            ts: now,
            ymd: ymd,
            quizId: String(detail.quizId || 'unknown'),
            score: Number(detail.score || 0),
            correct: Number(detail.correct || 0),
            total: Number(detail.total || 0),
            timeMs: Number(detail.timeMs || 0)
          };
          // Append run; cap length to 300
          stats.runs.push(run);
          if(stats.runs.length > 300){ stats.runs = stats.runs.slice(stats.runs.length - 300); }
          // Update aggregate
          stats.agg.correct += run.correct;
          stats.agg.total   += run.total;
          stats.agg.count   += 1;
          // Update best total (best single run score)
          if(run.score > (stats.bestTotal || 0)){ stats.bestTotal = run.score; }
          // Update daily stats
          stats.daily = stats.daily || {};
          if(!stats.daily[ymd]){ stats.daily[ymd] = { points: 0, runs: 0 }; }
          stats.daily[ymd].points += run.score;
          stats.daily[ymd].runs   += 1;
          // Save updated
          saveStats(stats);
          // Dispatch update event
          document.dispatchEvent(new CustomEvent('results:stats:updated', { detail: { stats: stats } }));
        }
        // Format duration in mm:ss
        function formatDuration(ms){
          var sec = Math.floor(ms/1000);
          var m = Math.floor(sec/60);
          var s = sec % 60;
          return String(m).padStart(2,'0') + ':' + String(s).padStart(2,'0');
        }
        // Render results UI: update KPI and tables
        function renderResultsUI(){
          var page = document.getElementById('page-results');
          if(!page){ return; }
          // Lazy init of containers
          ensureContainers();
          var stats = loadStats();
          // Compute today
          var today = new Date();
          var ymd = today.toISOString().slice(0,10);
          var todayStats = (stats.daily && stats.daily[ymd]) || { points: 0, runs: 0 };
          // Update KPIs
          var bar = document.getElementById('rs-progress-bar');
          var barTxt = document.getElementById('rs-progress-text');
          var bestEl = document.getElementById('rs-best-points');
          var compEl = document.getElementById('rs-completed');
          var accEl = document.getElementById('rs-accuracy');
          var todayPoints = todayStats.points || 0;
          if(bar){ bar.style.width = (todayPoints > 0 ? '100%' : '0%'); }
          if(barTxt){ barTxt.textContent = todayPoints + ' Ä‘iá»ƒm'; }
          if(bestEl){ bestEl.textContent = stats.bestTotal || 0; }
          if(compEl){ compEl.textContent = stats.agg.count || 0; }
          var accPct = (stats.agg.total > 0) ? Math.round((stats.agg.correct / stats.agg.total) * 100) : 0;
          if(accEl){ accEl.textContent = accPct + '%'; }
          // Render history table (max 20 rows)
          var histBody = document.querySelector('#history-table tbody');
          if(histBody){
            histBody.innerHTML = '';
            var runs = Array.isArray(stats.runs) ? stats.runs.slice() : [];
            runs.sort(function(a,b){ return b.ts - a.ts; });
            runs.slice(0,20).forEach(function(r){
              var tr = document.createElement('tr');
              var dt = new Date(r.ts);
              var dateStr = dt.toLocaleDateString('vi-VN', { day:'2-digit', month:'2-digit', year:'numeric' }) + ' ' + dt.toLocaleTimeString('vi-VN', { hour:'2-digit', minute:'2-digit' });
              tr.innerHTML = '<td>'+dateStr+'</td>'+
                             '<td>'+r.quizId+'</td>'+
                             '<td>'+r.score+'</td>'+
                             '<td>'+r.correct+' / '+r.total+'</td>'+
                             '<td>'+formatDuration(r.timeMs)+'</td>';
              histBody.appendChild(tr);
            });
          }
          // Render per-quiz table
          var perBody = document.querySelector('#perquiz-table tbody');
          if(perBody){
            perBody.innerHTML = '';
            var per = {};
            (stats.runs || []).forEach(function(r){
              var id = r.quizId;
              if(!per[id]){ per[id] = { best: r.score, runs: 1, latest: r.score }; }
              else {
                per[id].runs++;
                if(r.score > per[id].best){ per[id].best = r.score; }
                per[id].latest = r.score;
              }
            });
            var rows = Object.keys(per).map(function(k){ return { id: k, best: per[k].best, runs: per[k].runs, latest: per[k].latest }; });
            rows.sort(function(a,b){ return b.runs - a.runs; });
            rows.forEach(function(r){
              var tr = document.createElement('tr');
              tr.innerHTML = '<td>'+r.id+'</td>'+
                             '<td>'+r.best+'</td>'+
                             '<td>'+r.runs+'</td>'+
                             '<td>'+r.latest+'</td>';
              perBody.appendChild(tr);
            });
          }
        }
        // Ensure containers for history and per-quiz tables exist inside page-results
        function ensureContainers(){
          var page = document.getElementById('page-results');
          if(!page){ return; }
          var container = document.getElementById('user-results-container');
          if(container){ return; }
          container = document.createElement('div');
          container.id = 'user-results-container';
          // Use responsive layout: two columns on medium screens and one on small
          container.className = 'grid grid-cols-1 md:grid-cols-2 gap-6';
          // History section
          var histDiv = document.createElement('div');
          histDiv.innerHTML = '<h3 class="text-lg font-bold text-blue-700 mb-2">Lá»‹ch sá»­ gáº§n Ä‘Ã¢y</h3>' +
                              '<div class="overflow-x-auto"><table id="history-table"><thead><tr><th>Thá»i gian</th><th>BÃ i</th><th>Äiá»ƒm</th><th>ÄÃºng/Tá»•ng</th><th>Thá»i gian</th></tr></thead><tbody></tbody></table></div>';
          container.appendChild(histDiv);
          // Per-quiz section
          var perDiv = document.createElement('div');
          perDiv.innerHTML = '<h3 class="text-lg font-bold text-blue-700 mb-2">Theo bÃ i</h3>' +
                             '<div class="overflow-x-auto"><table id="perquiz-table"><thead><tr><th>BÃ i</th><th>Äiá»ƒm cao nháº¥t</th><th>LÆ°á»£t</th><th>Äiá»ƒm gáº§n nháº¥t</th></tr></thead><tbody></tbody></table></div>';
          container.appendChild(perDiv);
          page.appendChild(container);
        }
        // Listen for quiz result saved events to record stats
        document.addEventListener('quiz:result:saved', function(e){
          try {
            recordRun(e.detail || {});
          } catch(_){ /* ignore */ }
        });
        // Listen for stats update to re-render UI
        document.addEventListener('results:stats:updated', function(){ renderResultsUI(); });
        // Render on DOMContentLoaded when results page is visible
        if(document.readyState === 'loading'){
          document.addEventListener('DOMContentLoaded', function(){
            // override renderResultsPage to use local stats only
            try {
              var orig = window.renderResultsPage;
              window.renderResultsPage = function(){ renderResultsUI(); };
            }catch(_){}
            renderResultsUI();
          });
        } else {
          try {
            var orig = window.renderResultsPage;
            window.renderResultsPage = function(){ renderResultsUI(); };
          }catch(_){}
          renderResultsUI();
        }
        // Monkey-patch showLessonSummary to dispatch quiz:result:saved
        (function(){
          try {
            var origFn = window.showLessonSummary;
            if(typeof origFn === 'function' && !origFn.__patched_for_user_results){
              var patched = async function(){
                var res = await origFn.apply(this, arguments);
                try {
                  var quizId = (typeof lessonQuizId !== 'undefined') ? lessonQuizId : 'unknown';
                  var correct = (typeof lessonCorrectAnswers !== 'undefined') ? lessonCorrectAnswers : 0;
                  var total = (Array.isArray(currentLessonQuestions) ? currentLessonQuestions.length : 0);
                  var timeMs = 0;
                  try {
                    if(typeof lessonStartTime !== 'undefined'){ timeMs = Date.now() - lessonStartTime; }
                  } catch(_e){}
                  // Compute score: assume 5 points per correct answer (matching server logic)
                  var score = correct * 5;
                  var detail = { quizId: quizId, score: score, correct: correct, total: total, timeMs: timeMs };
                  document.dispatchEvent(new CustomEvent('quiz:result:saved', { detail: detail }));
                } catch(_err){}
                return res;
              };
              patched.__patched_for_user_results = true;
              window.showLessonSummary = patched;
            }
          }catch(e){ /* ignore patch errors */ }
        })();
      })();
    </script>
    <!-- END: user-results -->
<!-- Removed legacy leaderboard script to prevent duplicate definitions -->
<script>

/* === v2.5.3: helper to spawn green âœ“ tick at click position === */
(function(){
  window.__spawnGreenTick = function(containerEl, clientX, clientY){
    try{
      if(!containerEl) return;
      var rect = containerEl.getBoundingClientRect();
      var x = clientX - rect.left;
      var y = clientY - rect.top;
      var tick = document.createElement('div');
      tick.className = 'click-tick';
      tick.textContent = 'âœ“';
      tick.style.left = x + 'px';
      tick.style.top = y + 'px';
      tick.style.position = 'absolute';
      tick.style.zIndex = 30;
      // containerEl must be positioned; ensure relative without breaking layout
      var prevPos = getComputedStyle(containerEl).position;
      var restore = false;
      if(prevPos === 'static' || !prevPos){
        containerEl.style.position = 'relative';
        restore = true;
      }
      containerEl.appendChild(tick);
      setTimeout(function(){
        try{ tick.remove(); if(restore){ containerEl.style.position = ''; } }catch(e){}
      }, 900);
    }catch(e){}
  };
})();

</script>
<script>

/* v2.5.3c: persistent tick setter */
(function(){
  window.__setPermanentTick = function(containerEl, clientX, clientY){
    try{
      if(!containerEl) return;
      // remove any old permanent tick
      var old = containerEl.querySelector('.click-tick-fixed');
      if(old){ try{ old.remove(); }catch(e){} }
      var rect = containerEl.getBoundingClientRect();
      var x = clientX - rect.left;
      var y = clientY - rect.top;
      var tick = document.createElement('div');
      tick.className = 'click-tick-fixed';
      tick.textContent = 'âœ“';
      tick.style.left = x + 'px';
      tick.style.top = y + 'px';
      tick.style.position = 'absolute';
      tick.style.zIndex = 30;
      // ensure relative positioning
      var prevPos = getComputedStyle(containerEl).position;
      if(prevPos === 'static' || !prevPos){
        containerEl.dataset.tempRel = '1';
        containerEl.style.position = 'relative';
      }
      containerEl.appendChild(tick);
    }catch(e){}
  };
})();

</script>
<script>

/* === v2.5.4: override renderMatching with animated connector lines === */
(function(){
  function _centerRight(el, container){
    const r=el.getBoundingClientRect(), p=container.getBoundingClientRect();
    return {x:r.left-p.left+r.width, y:r.top-p.top+r.height/2};
  }
  function _centerLeft(el, container){
    const r=el.getBoundingClientRect(), p=container.getBoundingClientRect();
    return {x:r.left-p.left, y:r.top-p.top+r.height/2};
  }

  window.renderMatching = function(q){
    const container=document.createElement('div'); container.className='relative bg-white rounded-2xl shadow p-4 md:p-6';
    const grid=document.createElement('div'); grid.className='grid grid-cols-2 gap-12 md:gap-16';
    const colA=document.createElement('div'); const colB=document.createElement('div');
    colA.innerHTML='<div class="font-bold text-blue-700 mb-2">Cá»™t A</div>'; 
    colB.innerHTML='<div class="font-bold text-blue-700 mb-2">Cá»™t B</div>';
    const listA=document.createElement('div'); listA.className='space-y-4';
    const listB=document.createElement('div'); listB.className='space-y-4';

    (q.columnA||[]).forEach(txt=>{
      const it=document.createElement('button');
      it.className='btn-answer w-full text-left p-3 bg-sky-50 hover:bg-sky-100 rounded-xl border border-sky-200';
      it.innerText=(typeof txt==='string')?txt:(txt.text||''); 
      it.dataset.key=(typeof txt==='string')?txt:(txt.text||'');
      listA.appendChild(it);
    });
    (q.columnB||[]).forEach(txt=>{
      const it=document.createElement('button');
      it.className='btn-answer w-full text-left p-3 bg-rose-50 hover:bg-rose-100 rounded-xl border border-rose-200';
      it.innerText=txt; it.dataset.key=txt; listB.appendChild(it);
    });

    colA.appendChild(listA); colB.appendChild(listB); grid.appendChild(colA); grid.appendChild(colB); container.appendChild(grid);

    // SVG overlay for connector lines & dots
    const svg=document.createElementNS('http://www.w3.org/2000/svg','svg');
    svg.setAttribute('class','absolute inset-0 pointer-events-none'); 
    svg.setAttribute('width','100%'); svg.setAttribute('height','100%');
    container.appendChild(svg);

    // State
    let selectedA=null, selectedB=null;
    const links=[]; // {aKey,bKey,new:true?}

    function redraw(){
      while(svg.firstChild) svg.removeChild(svg.firstChild);
      links.forEach(link=>{
        const aEl=[...listA.children].find(n=>n.dataset.key===link.aKey);
        const bEl=[...listB.children].find(n=>n.dataset.key===link.bKey);
        if(!aEl||!bEl) return;
        const p1=_centerRight(aEl, container), p2=_centerLeft(bEl, container);

        // path
        const path=document.createElementNS('http://www.w3.org/2000/svg','path');
        const d='M '+p1.x+' '+p1.y+' C '+(p1.x+60)+' '+p1.y+', '+(p2.x-60)+' '+p2.y+', '+p2.x+' '+p2.y;
        path.setAttribute('d', d); 
        path.setAttribute('fill','none'); 
        path.setAttribute('class','match-line'+(link.new?' match-line-new':''));
        svg.appendChild(path);

        // dots
        const c1=document.createElementNS('http://www.w3.org/2000/svg','circle');
        c1.setAttribute('cx', p1.x); c1.setAttribute('cy', p1.y); c1.setAttribute('r','6'); c1.setAttribute('class','match-dot');
        const c2=document.createElementNS('http://www.w3.org/2000/svg','circle');
        c2.setAttribute('cx', p2.x); c2.setAttribute('cy', p2.y); c2.setAttribute('r','6'); c2.setAttribute('class','match-dot');
        svg.appendChild(c1); svg.appendChild(c2);

        link.new=false;
      });
    }

    function chooseA(key, btn){
      // remove previous mapping of A (if any)
      const idx=links.findIndex(l=>l.aKey===key);
      if(idx!==-1) links.splice(idx,1);
      if(selectedA===key){
        selectedA=null; btn.classList.remove('ring','ring-4','ring-blue-400','bg-sky-200'); redraw(); return;
      }
      selectedA=key;
      [...listA.children].forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400','bg-sky-200'));
      btn.classList.add('ring','ring-4','ring-blue-400','bg-sky-200');
      if(selectedB){
        // remove mapping of this B
        const idb=links.findIndex(l=>l.bKey===selectedB);
        if(idb!==-1) links.splice(idb,1);
        links.push({aKey:selectedA,bKey:selectedB,new:true});
        selectedA=null; selectedB=null;
        [...listA.children].forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400','bg-sky-200'));
        [...listB.children].forEach(b=>b.classList.remove('ring','ring-4','ring-red-400','bg-rose-200'));
        redraw();
      }
    }
    function chooseB(key, btn){
      // remove previous mapping of B (if any)
      const idx=links.findIndex(l=>l.bKey===key);
      if(idx!==-1) links.splice(idx,1);
      if(selectedB===key){
        selectedB=null; btn.classList.remove('ring','ring-4','ring-red-400','bg-rose-200'); redraw(); return;
      }
      selectedB=key;
      [...listB.children].forEach(b=>b.classList.remove('ring','ring-4','ring-red-400','bg-rose-200'));
      btn.classList.add('ring','ring-4','ring-red-400','bg-rose-200');
      if(selectedA){
        const ida=links.findIndex(l=>l.aKey===selectedA);
        if(ida!==-1) links.splice(ida,1);
        links.push({aKey:selectedA,bKey:selectedB,new:true});
        selectedA=null; selectedB=null;
        [...listA.children].forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400','bg-sky-200'));
        [...listB.children].forEach(b=>b.classList.remove('ring','ring-4','ring-red-400','bg-rose-200'));
        redraw();
      }
    }

    // Bind events
    [...listA.children].forEach(btn=> btn.addEventListener('click', ()=>chooseA(btn.dataset.key, btn)));
    [...listB.children].forEach(btn=> btn.addEventListener('click', ()=>chooseB(btn.dataset.key, btn)));

    // Clear & Check
    const clearBtn=document.createElement('button');
    clearBtn.className='btn-hover mt-4 w-full p-2 bg-gray-300 text-gray-800 rounded-xl font-bold text-sm';
    clearBtn.innerText='XÃ³a táº¥t cáº£ cÃ¡c ná»‘i';
    clearBtn.addEventListener('click', ()=>{
      links.length=0; selectedA=null; selectedB=null; 
      [...listA.children].forEach(b=>b.classList.remove('ring','ring-4','ring-blue-400','bg-sky-200'));
      [...listB.children].forEach(b=>b.classList.remove('ring','ring-4','ring-red-400','bg-rose-200'));
      redraw();
    });
    container.appendChild(clearBtn);

    const check=document.createElement('button');
    check.className='btn-hover mt-6 w-full p-4 bg-blue-600 text-white rounded-xl font-bold text-lg';
    check.innerText='Kiá»ƒm tra Ä‘Ã¡p Ã¡n';
    check.addEventListener('click', ()=>{
      const ok = Object.keys(q.correctMatches||{}).every(k=>{
        const t=q.correctMatches[k]; const found=links.find(l=>l.aKey===k && l.bKey===t);
        return !!found;
      });
      handleResult(ok, check);
    });
    container.appendChild(check);

    answerArea().appendChild(container);
    setTimeout(redraw, 60);
    window.addEventListener('resize', ()=>{
      if(!document.getElementById('page-quiz').classList.contains('hidden')) redraw();
    });
  };
})();

</script>
<!-- v2.5.7-stable: runtime error overlay -->
<div class="hidden fixed inset-0 z-[9999] flex items-center justify-center bg-black/50" id="app-error">
<div class="bg-white rounded-2xl p-6 w-96 text-center">
<div class="text-2xl font-bold text-red-600 mb-2">ÄÃ£ xáº£y ra lá»—i</div>
<div class="msg text-gray-700 break-words text-sm">ÄÃ£ cÃ³ lá»—i trong quÃ¡ trÃ¬nh cháº¡y. Báº¡n hÃ£y báº¥m "Táº£i láº¡i trang".</div>
<button class="mt-4 px-4 py-2 rounded-xl bg-blue-600 text-white" onclick="location.reload()">Táº£i láº¡i trang</button>
</div>
</div>
<script>
window.MINIGAME_CFG = {
  "version": "1.0",
  "generated_at": "2025-11-01 16:47:36.631485+07:00",
  "scoring": {
    "per_correct": 10,
    "per_wrong": -2,
    "time_bonus_per_sec_left": 0.2,
    "streak_bonus": [
      0,
      0,
      2,
      4,
      6,
      8
    ],
    "three_star_threshold": 85,
    "two_star_threshold": 70,
    "one_star_threshold": 50,
    "combo_window_sec": 6,
    "lives": 3
  },
  "game_types": {
    "flash_tap": "Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng trong thá»i gian giá»›i háº¡n.",
    "line_match": "Ná»‘i cáº·p Ä‘Ãºng báº±ng kÃ©o tháº£ dÃ¢y.",
    "drag_sort": "KÃ©o tháº£ sáº¯p xáº¿p Ä‘Ãºng thá»© tá»± cÃ¡c bÆ°á»›c.",
    "folder_maze": "Äi theo Ä‘Æ°á»ng dáº«n Ä‘Ãºng Ä‘á»ƒ má»Ÿ tá»‡p.",
    "typing_sprint": "GÃµ phÃ­m/tá»• há»£p phÃ­m hoáº·c tá»« khoÃ¡ Ä‘Ãºng.",
    "ui_place": "Äáº·t nhÃ£n vÃ o Ä‘Ãºng vá»‹ trÃ­ nÃºt/biá»ƒu tÆ°á»£ng trÃªn giao diá»‡n.",
    "keyword_racer": "Chá»n tá»« khoÃ¡ tá»‘t nháº¥t Ä‘á»ƒ 'tÄƒng tá»‘c' xe.",
    "copyright_guard": "Chá»n hÃ nh Ä‘á»™ng Ä‘Ãºng vá» báº£n quyá»n/an toÃ n."
  },
  "games": {
    "lop3": [
      {
        "id": "l3_flash_tap_hardware_software",
        "type": "flash_tap",
        "topic": "Pháº§n cá»©ng vs. pháº§n má»m",
        "time_limit_sec": 60,
        "questions": [
          {
            "q": "Chuá»™t mÃ¡y tÃ­nh lÃ  pháº§nâ€¦",
            "options": [
              {
                "text": "cá»©ng",
                "correct": true
              },
              {
                "text": "má»m",
                "correct": false
              }
            ]
          },
          {
            "q": "Word lÃ  pháº§nâ€¦",
            "options": [
              {
                "text": "má»m",
                "correct": true
              },
              {
                "text": "cá»©ng",
                "correct": false
              }
            ]
          },
          {
            "q": "MÃ n hÃ¬nh thuá»™c:",
            "options": [
              {
                "text": "Pháº§n cá»©ng",
                "correct": true
              },
              {
                "text": "Pháº§n má»m",
                "correct": false
              }
            ]
          },
          {
            "q": "Paint dÃ¹ng Ä‘á»ƒ:",
            "options": [
              {
                "text": "Váº½ hÃ¬nh",
                "correct": true
              },
              {
                "text": "Nghe nháº¡c",
                "correct": false
              }
            ]
          },
          {
            "q": "TrÃ¬nh duyá»‡t web dÃ¹ng Ä‘á»ƒ:",
            "options": [
              {
                "text": "Truy cáº­p trang web",
                "correct": true
              },
              {
                "text": "In giáº¥y",
                "correct": false
              }
            ]
          }
        ]
      },
      {
        "id": "l3_typing_sprint_basics",
        "type": "typing_sprint",
        "topic": "GÃµ phÃ­m Ä‘Ãºng cÃ¡ch",
        "time_limit_sec": 70,
        "questions": [
          {
            "prompt": "GÃµ tá»• há»£p Ä‘á»ƒ viáº¿t hoa nhanh: giá»¯ â€¦ + chá»¯",
            "expected": "Shift"
          },
          {
            "prompt": "GÃµ tá»« khoÃ¡: 'hoc tin hoc'",
            "expected": "hoc tin hoc"
          },
          {
            "prompt": "PhÃ­m táº¡o dÃ²ng má»›i",
            "expected": "Enter"
          },
          {
            "prompt": "XoÃ¡ bÃªn trÃ¡i con trá» (tÃªn phÃ­m)",
            "expected": "Backspace"
          }
        ]
      },
      {
        "id": "l3_keyword_racer_safe_search",
        "type": "keyword_racer",
        "topic": "Tá»« khoÃ¡ & an toÃ n Internet",
        "time_limit_sec": 75,
        "questions": [
          {
            "q": "Muá»‘n tÃ¬m hÃ¬nh áº£nh con mÃ¨o, tá»« khoÃ¡ tá»‘t nháº¥t lÃ ?",
            "options": [
              {
                "text": "HÃ¬nh áº£nh con mÃ¨o",
                "correct": true
              },
              {
                "text": "TÃ´i yÃªu mÃ¨o láº¯m",
                "correct": false
              },
              {
                "text": "áº¢nh Ä‘áº¹p",
                "correct": false
              }
            ]
          },
          {
            "q": "Tháº¥y trang khÃ´ng phÃ¹ há»£p vá»›i lá»©a tuá»•i, em nÃªn:",
            "options": [
              {
                "text": "ÄÃ³ng trang vÃ  bÃ¡o ngÆ°á»i lá»›n",
                "correct": true
              },
              {
                "text": "Tiáº¿p tá»¥c xem",
                "correct": false
              },
              {
                "text": "Chia sáº» cho báº¡n",
                "correct": false
              }
            ]
          },
          {
            "q": "Biá»ƒu tÆ°á»£ng trÃ¬nh duyá»‡t web:",
            "options": [
              {
                "text": "ğŸŒ",
                "correct": true
              },
              {
                "text": "ğŸ®",
                "correct": false
              },
              {
                "text": "ğŸ“",
                "correct": false
              }
            ]
          }
        ]
      }
    ],
    "lop4": [
      {
        "id": "l4_folder_maze_paths",
        "type": "folder_maze",
        "topic": "CÃ¢y thÆ° má»¥c & thao tÃ¡c tá»‡p",
        "time_limit_sec": 90,
        "questions": [
          {
            "start": "This PC",
            "target": "D:/HocTap/TinHoc/Bai4.docx",
            "choices": [
              "C:/",
              "D:/",
              "HocTap",
              "TinHoc",
              "Bai4.docx"
            ],
            "correct_path": [
              "D:/",
              "HocTap",
              "TinHoc",
              "Bai4.docx"
            ]
          },
          {
            "start": "This PC",
            "target": "D:/Lop4A/Nhom1/Anh/hoahong.jpg",
            "choices": [
              "C:/",
              "D:/",
              "Lop4A",
              "Nhom1",
              "Anh",
              "hoahong.jpg"
            ],
            "correct_path": [
              "D:/",
              "Lop4A",
              "Nhom1",
              "Anh",
              "hoahong.jpg"
            ]
          }
        ]
      },
      {
        "id": "l4_drag_sort_ppt_flow",
        "type": "drag_sort",
        "topic": "TrÃ¬nh chiáº¿u: quy trÃ¬nh táº¡o file",
        "time_limit_sec": 80,
        "sequence_title": "Sáº¯p xáº¿p quy trÃ¬nh Ä‘Ãºng",
        "items": [
          "Insert â†’ Pictures",
          "Chá»n áº£nh",
          "Save As Ä‘áº·t tÃªn",
          "Má»Ÿ PowerPoint",
          "ThÃªm tiÃªu Ä‘á» trang chiáº¿u"
        ],
        "correct_order": [
          "Má»Ÿ PowerPoint",
          "ThÃªm tiÃªu Ä‘á» trang chiáº¿u",
          "Insert â†’ Pictures",
          "Chá»n áº£nh",
          "Save As Ä‘áº·t tÃªn"
        ]
      },
      {
        "id": "l4_line_match_web_info",
        "type": "line_match",
        "topic": "ThÃ´ng tin trÃªn trang web",
        "time_limit_sec": 70,
        "pairs": {
          "VÄƒn báº£n": "Chá»¯ viáº¿t trÃªn trang",
          "HÃ¬nh áº£nh": "áº¢nh minh hoáº¡",
          "Ã‚m thanh": "File nghe Ä‘Æ°á»£c",
          "SiÃªu liÃªn káº¿t": "NhÃ¡y Ä‘á»ƒ chuyá»ƒn trang"
        }
      }
    ],
    "lop5": [
      {
        "id": "l5_ui_place_word_ribbon",
        "type": "ui_place",
        "topic": "Word: B/I/U & Wrap Text",
        "time_limit_sec": 90,
        "background_hint": "áº¢nh thanh Ribbon (Home/Insert)",
        "targets": [
          "B (Bold)",
          "I (Italic)",
          "U (Underline)",
          "Insert â†’ Pictures",
          "Wrap Text â†’ Square"
        ],
        "items": [
          "LÃ m Ä‘áº­m tiÃªu Ä‘á»",
          "LÃ m nghiÃªng chá»¯",
          "Gáº¡ch chÃ¢n",
          "ChÃ¨n áº£nh tá»« mÃ¡y",
          "VÄƒn báº£n bao quanh hÃ¬nh"
        ],
        "correct_map": {
          "LÃ m Ä‘áº­m tiÃªu Ä‘á»": "B (Bold)",
          "LÃ m nghiÃªng chá»¯": "I (Italic)",
          "Gáº¡ch chÃ¢n": "U (Underline)",
          "ChÃ¨n áº£nh tá»« mÃ¡y": "Insert â†’ Pictures",
          "VÄƒn báº£n bao quanh hÃ¬nh": "Wrap Text â†’ Square"
        }
      },
      {
        "id": "l5_copyright_guard",
        "type": "copyright_guard",
        "topic": "Báº£n quyá»n & trÃ­ch dáº«n",
        "time_limit_sec": 80,
        "questions": [
          {
            "q": "Muá»‘n dÃ¹ng áº£nh trÃªn máº¡ng cho bÃ i thuyáº¿t trÃ¬nh, em nÃªn:",
            "options": [
              {
                "text": "Xin phÃ©p & ghi nguá»“n",
                "correct": true
              },
              {
                "text": "Táº£i vá» dÃ¹ng luÃ´n",
                "correct": false
              },
              {
                "text": "Sá»­a mÃ u lÃ  dÃ¹ng Ä‘Æ°á»£c",
                "correct": false
              }
            ]
          },
          {
            "q": "KÃ­ hiá»‡u báº£n quyá»n thÆ°á»ng gáº·p:",
            "options": [
              {
                "text": "Â©",
                "correct": true
              },
              {
                "text": "â„¢",
                "correct": false
              },
              {
                "text": "â„¹ï¸",
                "correct": false
              }
            ]
          },
          {
            "q": "Báº¡n chia sáº» phim cÃ³ báº£n quyá»n, em nÃªn:",
            "options": [
              {
                "text": "Nháº¯c báº¡n dá»«ng & bÃ¡o ngÆ°á»i lá»›n",
                "correct": true
              },
              {
                "text": "Chia sáº» tiáº¿p",
                "correct": false
              },
              {
                "text": "Lá» Ä‘i",
                "correct": false
              }
            ]
          }
        ]
      },
      {
        "id": "l5_keyword_racer_advanced",
        "type": "keyword_racer",
        "topic": "Tá»« khoÃ¡ nÃ¢ng cao",
        "time_limit_sec": 75,
        "questions": [
          {
            "q": "TÃ¬m cÃ¡ch báº£o vá»‡ mÃ´i trÆ°á»ng: chá»n tá»« khoÃ¡ tá»‘t nháº¥t",
            "options": [
              {
                "text": "CÃ¡ch báº£o vá»‡ mÃ´i trÆ°á»ng",
                "correct": true
              },
              {
                "text": "MÃ´i trÆ°á»ng",
                "correct": false
              },
              {
                "text": "TÃ´i yÃªu mÃ´i trÆ°á»ng",
                "correct": false
              }
            ]
          },
          {
            "q": "Muá»‘n tÃ¬m áº£nh: nÃªn vÃ o tháº» nÃ o cá»§a cÃ´ng cá»¥ tÃ¬m kiáº¿m?",
            "options": [
              {
                "text": "HÃ¬nh áº£nh (Images)",
                "correct": true
              },
              {
                "text": "Video",
                "correct": false
              },
              {
                "text": "Tin tá»©c",
                "correct": false
              }
            ]
          }
        ]
      }
    ]
  }
};

(function(){
  const cfg = window.MINIGAME_CFG || {};
  const scoring = cfg.scoring || { per_correct:10, per_wrong:-2, time_bonus_per_sec_left:0.2, streak_bonus:[0,0,2,4,6,8], three_star_threshold:85, two_star_threshold:70, one_star_threshold:50, combo_window_sec:6, lives:3 };

  const state = {
    grade: 'Lá»›p 3',
    current: null,
    qIndex: 0,
    score: 0,
    lives: scoring.lives,
    streak: 0,
    timer: null,
    timeLeft: null,
    correctCount: 0,
    totalCount: 0
  };

  const $ = sel => document.querySelector(sel);
  const el = id => document.getElementById(id);
  function setRaceVisible(v){ el('race-wrap').classList.toggle('hidden', !v); }
  function resetRace(){ ['player-bear','player-rabbit'].forEach(id=>{ const n=el(id); if(n) n.style.transform='translateX(0px)'; }); }
  function moveBear(px){ const n=el('player-bear'); if(n) n.style.transform = `translateX(${px}px)`; }
  function moveRabbit(px){ const n=el('player-rabbit'); if(n) n.style.transform = `translateX(${px}px)`; }
  function updateHUD(){
    el('game-score').innerText = state.score;
    el('game-lives').innerText = state.lives;
    el('game-timer').innerText = state.timeLeft !== null ? state.timeLeft + 's' : '--';
  }
  function addScore(baseBonus=0){
    const streakBonus = scoring.streak_bonus[Math.min(state.streak, scoring.streak_bonus.length-1)] || 0;
    state.score += scoring.per_correct + baseBonus + streakBonus;
    state.streak = Math.min(state.streak+1, scoring.streak_bonus.length-1);
  }
  function addWrong(){
    state.score += scoring.per_wrong;
    state.lives -= 1;
    state.streak = 0;
  }
  function starsFromScore(){
    const s = Math.max(0, Math.round(state.score));
    if (s >= scoring.three_star_threshold) return 3;
    if (s >= scoring.two_star_threshold) return 2;
    if (s >= scoring.one_star_threshold) return 1;
    return 0;
  }
  function endGame(){
    try {
      const s = window.userScores && window.userScores[state.grade];
      if (s) {
        const st = starsFromScore();
        s.totalStars = (s.totalStars||0) + st;
        s.completedCount = (s.completedCount||0) + 1;
        s.correctAnswers = (s.correctAnswers||0) + state.correctCount;
        s.totalAnswers = (s.totalAnswers||0) + state.totalCount;
        window.saveScores && window.saveScores();
      }
    }catch(e){}

    const st = starsFromScore();
    const rawPts = Math.max(0, Math.round(state.score));
    const msg = [
      `Äiá»ƒm: ${rawPts}`,
      `Sao: ${'â­'.repeat(st) || '0'}`,
      `ÄÃºng/ Tá»•ng: ${state.correctCount} / ${state.totalCount}`
    ].join('\n');
    el('game-summary-text').innerText = msg;
    el('game-summary').classList.remove('hidden');
    // Gá»­i Ä‘iá»ƒm mini game lÃªn server Ä‘á»ƒ cáº­p nháº­t BXH
    try {
      const gameId = (state.current && (state.current.id || state.current.game_id || state.current.type)) || '';
      // Náº¿u Ä‘Ã£ khai bÃ¡o hÃ m miniStartRun/miniSubmitScore thÃ¬ dÃ¹ng Ä‘á»ƒ lÆ°u Ä‘iá»ƒm
      if (window.miniStartRun && window.miniSubmitScore) {
        window.miniStartRun(gameId).then(function(runId){
          if (runId) {
            window.miniSubmitScore(runId, gameId, rawPts);
          }
        });
      }
    } catch(e){}
  }

  function startTimer(sec){
    state.timeLeft = sec;
    updateHUD();
    if (state.timer) clearInterval(state.timer);
    state.timer = setInterval(()=>{
      state.timeLeft -= 1;
      if (state.timeLeft <= 0) {
        clearInterval(state.timer); state.timer=null;
        addWrong();
        updateHUD();
        nextQuestion();
      } else updateHUD();
    }, 1000);
  }
  function stopTimer(){ if(state.timer){ clearInterval(state.timer); state.timer=null; }}

  function renderFlashTap(q){
    setRaceVisible(true);
    const stage = el('game-stage'); stage.innerHTML='';
    const wrap = document.createElement('div'); wrap.className='grid grid-cols-1 md:grid-cols-2 gap-4';
    (q.options||[]).forEach(opt=>{
      const btn = document.createElement('button');
      btn.className='game-option btn-hover text-left text-lg p-5 bg-white rounded-2xl shadow border-2 border-transparent hover:border-blue-500';
      btn.textContent = opt.text || opt;
      btn.addEventListener('click', ()=>{
        state.totalCount += 1;
        if (opt.correct) {
          state.correctCount += 1;
          addScore(Math.floor((state.timeLeft||0)*scoring.time_bonus_per_sec_left));
          moveBear((state.qIndex+1)*40);
          showFeedback(true);
        } else {
          addWrong();
          moveRabbit((state.qIndex+1)*40);
          showFeedback(false);
        }
        updateHUD(); el('game-next').classList.remove('hidden'); disableAll(wrap);
      });
      wrap.appendChild(btn);
    });
    stage.appendChild(wrap);
  }

  function renderKeywordRacer(q){
    setRaceVisible(false);
    const stage = el('game-stage'); stage.innerHTML='';
    const wrap = document.createElement('div'); wrap.className='grid grid-cols-1 md:grid-cols-2 gap-4';
    (q.options||[]).forEach(opt=>{
      const btn = document.createElement('button');
      btn.className='btn-hover text-left text-lg p-5 bg-white rounded-2xl shadow border border-gray-200 hover:border-blue-500';
      btn.textContent = opt.text || opt;
      btn.addEventListener('click', ()=>{
        state.totalCount += 1;
        if (opt.correct) { state.correctCount += 1; addScore(); showFeedback(true); }
        else { addWrong(); showFeedback(false); }
        updateHUD(); el('game-next').classList.remove('hidden'); disableAll(wrap);
      });
      wrap.appendChild(btn);
    });
    stage.appendChild(wrap);
  }

  function renderTypingSprint(q){
    setRaceVisible(false);
    const stage = el('game-stage'); stage.innerHTML='';
    const input = document.createElement('input');
    input.className='w-full p-4 rounded-xl border';
    input.placeholder='Nháº­p cÃ¢u tráº£ lá»i...';
    const btn = document.createElement('button');
    btn.className='mt-3 w-full p-3 rounded-xl bg-blue-600 text-white font-bold';
    btn.textContent='Kiá»ƒm tra';
    btn.addEventListener('click', ()=>{
      const lower = s => (s||'').toString().trim().toLowerCase();
      const val = lower(input.value);
      state.totalCount += 1;
      let ok = false;
      if (Array.isArray(q.expected)) ok = q.expected.some(x=>lower(x)===val);
      else ok = lower(q.expected)===val;
      if (ok) { state.correctCount += 1; addScore(); showFeedback(true); }
      else { addWrong(); showFeedback(false); }
      updateHUD(); el('game-next').classList.remove('hidden'); input.disabled=true; btn.disabled=true;
    });
    stage.appendChild(input); stage.appendChild(btn);
  }

  function renderLineMatch(q){
    setRaceVisible(false);
    const stage = el('game-stage'); stage.innerHTML='';
    const left = document.createElement('div'); const right = document.createElement('div');
    left.className='space-y-2'; right.className='space-y-2';
    const wrap = document.createElement('div'); wrap.className='grid grid-cols-2 gap-6';
    const aItems = Object.keys(q.pairs || {});
    const bItems = aItems.map(k => q.pairs[k]);
    for (let i = bItems.length-1; i>0; i--) { const j = Math.floor(Math.random()*(i+1)); [bItems[i],bItems[j]]=[bItems[j],bItems[i]]; }
    let selectedA = null; let matched = 0;
    const makeBtn = (txt) => { const b=document.createElement('button'); b.className='w-full text-left p-3 rounded-xl border bg-white hover:border-blue-500'; b.textContent=txt; return b; };
    const aBtns = aItems.map(k=>{ const b=makeBtn(k); b.dataset.key=k; b.addEventListener('click',()=>{ aBtns.forEach(x=>x.classList.remove('row-selected')); b.classList.add('row-selected'); selectedA = k; }); return b; });
    const bBtns = bItems.map(txt=>{ const b=makeBtn(txt); b.addEventListener('click',()=>{
      if(!selectedA) return;
      const correct = (q.pairs[selectedA]===txt);
      state.totalCount += 1;
      if(correct){ state.correctCount+=1; addScore(); b.classList.add('row-glow'); b.disabled=true; const ab=aBtns.find(x=>x.dataset.key===selectedA); if(ab) ab.disabled=true; matched++; showFeedback(true, 'ÄÃ£ ná»‘i Ä‘Ãºng 1 cáº·p'); }
      else { addWrong(); showFeedback(false, 'ChÆ°a Ä‘Ãºng, thá»­ láº¡i cáº·p khÃ¡c'); }
      updateHUD(); if(matched===aItems.length) el('game-next').classList.remove('hidden');
    }); return b; });
    aBtns.forEach(b=>left.appendChild(b)); bBtns.forEach(b=>right.appendChild(b));
    wrap.appendChild(left); wrap.appendChild(right); stage.appendChild(wrap);
  }

  function renderDragSort(game){
    setRaceVisible(false);
    const stage = el('game-stage'); stage.innerHTML='';
    const list = document.createElement('ul'); list.className='space-y-2';
    (game.items||[]).forEach((txt,i)=>{
      const li = document.createElement('li');
      li.className='p-3 rounded-xl border bg-white flex items-center justify-between gap-2';
      li.draggable=true;
      li.dataset.idx=i;
      const span=document.createElement('span'); span.textContent=txt;
      li.appendChild(span);
      list.appendChild(li);
    });
    let dragEl=null;
    list.addEventListener('dragstart', e=>{ dragEl=e.target; e.dataTransfer.effectAllowed='move'; });
    list.addEventListener('dragover', e=>{ e.preventDefault(); const t=e.target.closest('li'); if(!t||t===dragEl) return; const rect=t.getBoundingClientRect(); const next=(e.clientY-rect.top)/(rect.height) > 0.5; list.insertBefore(dragEl, next?t.nextSibling:t); });
    list.addEventListener('drop', e=>{ e.preventDefault(); });
    const btn = document.createElement('button');
    btn.className='mt-3 w-full p-3 rounded-xl bg-blue-600 text-white font-bold';
    btn.textContent='Ná»™p thá»© tá»±';
    btn.addEventListener('click', ()=>{
      const cur = Array.from(list.querySelectorAll('li')).map(li=>li.querySelector('span').textContent);
      const ok = JSON.stringify(cur) === JSON.stringify(game.correct_order||[]);
      state.totalCount += 1;
      if (ok) { state.correctCount+=1; addScore(); showFeedback(true); }
      else { addWrong(); showFeedback(false); }
      updateHUD(); el('game-next').classList.remove('hidden'); btn.disabled=true;
    });
    stage.appendChild(list); stage.appendChild(btn);
  }

  function renderFolderMaze(q){
    setRaceVisible(false);
    const stage = el('game-stage'); stage.innerHTML='';
    const path = document.createElement('div'); path.className='text-sm text-gray-600 mb-2';
    path.textContent='ÄÃ­ch: '+(q.target||'');
    const wrap = document.createElement('div'); wrap.className='flex flex-wrap gap-2';
    let progress = [];
    (q.choices||[]).forEach(ch=>{
      const b=document.createElement('button'); b.className='px-3 py-2 rounded-lg border bg-white hover:border-blue-500'; b.textContent=ch;
      b.addEventListener('click',()=>{
        progress.push(ch);
        const ok = JSON.stringify(progress)===JSON.stringify((q.correct_path||[]).slice(0,progress.length));
        if(!ok){
          addWrong(); showFeedback(false,'Sai nhÃ¡nh, quay láº¡i Ä‘áº§u!'); progress=[];
        } else {
          showFeedback(true,'ÄÃºng bÆ°á»›c');
          if(progress.length===(q.correct_path||[]).length){
            state.totalCount += 1; state.correctCount += 1; addScore(); el('game-next').classList.remove('hidden');
          }
        }
        updateHUD();
      });
      wrap.appendChild(b);
    });
    stage.appendChild(path); stage.appendChild(wrap);
  }

  function renderCopyrightGuard(q){ return renderKeywordRacer(q); }
  function disableAll(container){ container.querySelectorAll('button').forEach(b=>b.disabled=true); }
  function showFeedback(isCorrect, msg){
    const box = el('game-feedback');
    box.classList.remove('hidden');
    box.textContent = msg || (isCorrect ? 'ChÃ­nh xÃ¡c! ğŸ‰' : 'ChÆ°a Ä‘Ãºng, cá»‘ lÃªn!');
    box.className = 'mt-4 text-lg font-medium p-4 rounded-xl ' + (isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800');
  }

  function renderQuestion(){
    if(!state.current) return;
    const game = state.current;
    if (!game._flatQ) {
      if (Array.isArray(game.questions)) game._flatQ = game.questions;
      else if (game.type==='drag_sort') game._flatQ = [game];
      else if (game.type==='line_match') game._flatQ = [{ question: game.sequence_title || 'Ná»‘i Ä‘Ãºng', pairs: game.pairs }];
      else if (game.type==='folder_maze') game._flatQ = [game];
      else game._flatQ = [];
    }
    if (state.qIndex >= (game._flatQ||[]).length) { stopTimer(); return endGame(); }
    const q = game._flatQ[state.qIndex];
    el('game-question-text').textContent = q.q || q.question || game.sequence_title || game.topic || 'CÃ¢u há»i';
    el('game-feedback').classList.add('hidden');
    el('game-next').classList.add('hidden');
    stopTimer();
    if (game.time_limit_sec) startTimer(game.time_limit_sec);

    const t = game.type;
    if (t==='flash_tap') renderFlashTap(q);
    else if (t==='keyword_racer') renderKeywordRacer(q);
    else if (t==='typing_sprint') renderTypingSprint(q);
    else if (t==='line_match') renderLineMatch(q);
    else if (t==='drag_sort') renderDragSort(game);
    else if (t==='folder_maze') renderFolderMaze(q);
    else if (t==='ui_place') renderKeywordRacer(q);
    else if (t==='copyright_guard') renderCopyrightGuard(q);
    else renderKeywordRacer(q);
  }

  function nextQuestion(){ state.qIndex += 1; renderQuestion(); }

  function renderGameList(){
    const label = el('game-grade-label');
    if (label) label.textContent = state.grade;
    const list = el('game-list'); list.innerHTML='';
    const group = (state.grade==='Lá»›p 3') ? cfg.games.lop3 : (state.grade==='Lá»›p 4') ? cfg.games.lop4 : cfg.games.lop5;
    if (!group || !group.length){
      list.innerHTML = '<div class="col-span-full text-center text-gray-600">ChÆ°a cÃ³ game. Vui lÃ²ng thÃªm vÃ o cáº¥u hÃ¬nh.</div>';
      return;
    }
    group.forEach(g=>{
      const card = document.createElement('button');
      card.className='btn-hover text-left p-4 rounded-2xl bg-white border shadow hover:border-blue-500';
      card.innerHTML = `<div class="font-bold text-lg mb-1">${g.topic || 'Mini game'}</div>
                        <div class="text-sm text-gray-600">Loáº¡i: <b>${g.type}</b> â€¢ Giá»›i háº¡n: ${g.time_limit_sec||'â€”'}s</div>`;
      card.addEventListener('click', ()=> startGame(g));
      list.appendChild(card);
    });
    el('game-play').classList.add('hidden');
    el('game-list').classList.remove('hidden');
  }

  function startGame(g){
    // Hijack the legacy startGame: if our smartbear init is available, use it instead of legacy logic
    if (window && typeof window.hatbotSmartbearInit === 'function') {
      try {
        // Hide game list and show play area similar to original startGame
        const listEl = el('game-list');
        const playEl = el('game-play');
        if(listEl) listEl.classList.add('hidden');
        if(playEl) playEl.classList.remove('hidden');
      } catch(_){ }
      window.hatbotSmartbearInit();
      return;
    }
    state.current = JSON.parse(JSON.stringify(g));
    state.qIndex = 0; state.score = 0; state.lives = scoring.lives; state.streak = 0;
    state.correctCount = 0; state.totalCount = 0; resetRace(); updateHUD();
    el('game-list').classList.add('hidden'); el('game-play').classList.remove('hidden');
    setRaceVisible(g.type==='flash_tap');
    renderQuestion();
  }

  window.addEventListener('DOMContentLoaded', ()=>{
    try{ if(window.currentGrade) state.grade = window.currentGrade; }catch(e){}
    document.querySelectorAll('.game-grade-btn').forEach(b=>b.addEventListener('click', ()=>{ state.grade = b.dataset.grade; renderGameList(); }));
    const backBtn = el('game-back-list'); if(backBtn) backBtn.addEventListener('click', ()=>{ stopTimer(); renderGameList(); });
    const nextBtn = el('game-next'); if(nextBtn) nextBtn.addEventListener('click', nextQuestion);
    const closeSum = el('game-summary-close'); if(closeSum) closeSum.addEventListener('click', ()=>{ el('game-summary').classList.add('hidden'); renderGameList(); });
  });

  const _showPage = window.showPage;
  window.showPage = function(id){ _showPage && _showPage(id); if (id==='page-game') renderGameList(); };
})();
</script>
<!-- ===== Chatbot toggle & panel (added by ChatGPT) ===== -->
<button class="kids-font rounded-full shadow-xl p-0 border-0" id="gau-chat-toggle" title="Chat vá»›i Gáº¥u Con">
<img alt="Gáº¥u Chat" src="data/images/chatbot.png" style="width:64px;height:64px;border-radius:50%;border:3px solid white;box-shadow:0 8px 24px rgba(2,6,23,.18)"/ class="chatbot-attention">
</button>
<section class="kids-font" id="gau-chat-panel">
<div id="gau-chat-header">
<div id="gau-chat-title">
<span style="font-size:22px">ğŸ»</span>
<div>
<div>Gáº¥u Con Chatbot</div>
<div class="gau-tip">Tráº£ lá»i kiáº¿n thá»©c Tin há»c lá»›p 3â€“5 (cÃ³ SGK/RAG)</div>
</div>
</div>
<div class="flex items-center gap-2">
<label class="gau-tip">Lá»›p:</label>
<select class="gau-select" id="gau-grade">
<option value="auto">Tá»± nháº­n diá»‡n</option>
<option value="current">Theo lá»›p Ä‘ang chá»n</option>
<option value="3">Lá»›p 3</option>
<option value="4">Lá»›p 4</option>
<option value="5">Lá»›p 5</option>
</select>
<button aria-label="ÄÃ³ng" id="gau-chat-close">âœ–</button>
</div>
</div>
<div id="gau-chat-stream"></div>
<div id="gau-chat-inputbar">
<input id="gau-input" placeholder="GÃµ cÃ¢u há»i, vÃ­ dá»¥: â€œTrong Word, nÃºt B dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?â€"/>
<button id="gau-send">Gá»¬I</button>
</div>
</section>
<script>
// ====== Gáº¥u Con Chatbot - Frontend (v2.7) ======
(function(){
  // Updated to latest Apps Script deployment URL for all features
  const WEBAPP_URL='https://script.google.com/macros/s/AKfycbyNcfoWBHaKcvvZr7L2i3u62_AhZmC53w-wS1PaW3SULV3-iUMP6kKH-4I7AGjOawO1/exec';

  const $ = (sel)=>document.querySelector(sel);
  const panel = $('#gau-chat-panel');
  const toggleBtn = $('#gau-chat-toggle');
  const closeBtn = $('#gau-chat-close');
  const stream = $('#gau-chat-stream');
  const input = $('#gau-input');
  const sendBtn = $('#gau-send');
  const gradeSel = $('#gau-grade');

  // open/close
  function openPanel(){ panel.style.display='block'; setTimeout(()=>input.focus(), 50); }
  function closePanel(){ panel.style.display='none'; }
  toggleBtn.addEventListener('click', ()=>{
    if (panel.style.display === 'block') {
      // if input has value -> send, else close/open
      if((input.value||'').trim().length>0) submitQuestion();
      else closePanel();
    } else {
      openPanel();
    }
  });
  closeBtn.addEventListener('click', closePanel);

  function scrollBottom(){ stream.scrollTop = stream.scrollHeight; }

  function addMsg(role, text, meta){
    const wrap = document.createElement('div');
    wrap.className = 'gau-msg ' + (role==='me' ? 'me' : 'ai');
    const bubble = document.createElement('div');
    bubble.className = 'gau-bubble ' + (role==='me' ? 'me-bubble' : 'ai-bubble');
    bubble.textContent = text;
    wrap.appendChild(bubble);
    if (meta && role!=='me'){
      const metaEl = document.createElement('div');
      metaEl.className = 'gau-meta';
      metaEl.textContent = meta;
      bubble.appendChild(document.createElement('br'));
      bubble.appendChild(metaEl);
    }
    stream.appendChild(wrap);
    scrollBottom();
  }

  let typingEl = null;
  function showTyping(){
    typingEl = document.createElement('div');
    typingEl.className = 'gau-msg ai typing';
    const b = document.createElement('div');
    b.className = 'gau-bubble ai-bubble';
    b.textContent = 'Gáº¥u Ä‘ang suy nghÄ©...';
    typingEl.appendChild(b);
    stream.appendChild(typingEl);
    scrollBottom();
  }
  function hideTyping(){
    if (typingEl) { typingEl.remove(); typingEl=null; }
  }

  function currentGradeNumber(){
    try {
      const gText = (window.currentGrade || 'Lá»›p 3') + '';
      if (gText.includes('3')) return '3';
      if (gText.includes('4')) return '4';
      if (gText.includes('5')) return '5';
    } catch(e){}
    return '3';
  }

  async function submitQuestion(){
    const q = (input.value || '').trim();
    if (!q) return;
    addMsg('me', q);
    input.value='';
    showTyping();

    // choose grade
    let gradeParam = undefined;
    const sel = gradeSel.value;
    if (sel === '3' || sel==='4' || sel==='5') gradeParam = sel;
    else if (sel === 'current') gradeParam = currentGradeNumber(); // map from UI's current grade
    // else auto: undefined

    const payload = gradeParam ? { question: q, grade: gradeParam } : { question: q };

    try {
      const res = await fetch(WEBAPP_URL, {
        method: 'POST',
        mode: 'cors',
      credentials: 'omit',
      headers: { 'Content-Type': 'text/plain;charset=UTF-8' },
        body: JSON.stringify(payload)
      });
      hideTyping();
      if (!res.ok) {
        addMsg('ai', 'Lá»—i gá»i Web App ('+res.status+'). Vui lÃ²ng thá»­ láº¡i.');
        return;
      }
      const data = await res.json();
      const ans = (data && data.answer) ? data.answer : 'Gáº¥u chÆ°a cÃ³ cÃ¢u tráº£ lá»i.';

      // citations rendering
      let citeTxt = '';
      try {
        const mode = data.mode || '';
        const cites = Array.isArray(data.citations) ? data.citations : [];
        if (mode && mode.startsWith('SGK') && cites.length) {
          const short = cites.slice(0,2).map(c=>`L${c.grade} â€¢ ${c.lesson||'BÃ i ?'} â€¢ tr.${c.page||'?'}`).join(' | ');
          citeTxt = 'Nguá»“n: ' + short;
        }
      } catch(e){}

      addMsg('ai', ans, citeTxt);
      // optional: speak
      try { if (window.speakText) speakText(ans); } catch(_){}
    } catch (err){
      hideTyping();
      addMsg('ai', 'Lá»—i káº¿t ná»‘i: ' + (err && err.message ? err.message : String(err)));
    }
  }

  sendBtn.addEventListener('click', submitQuestion);
  input.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter') submitQuestion();
  });

  // expose minimal API for existing code (if any old calls)
  window.askGau = submitQuestion; // backward compatibility
  window.__askGau = submitQuestion;
})();
</script>
<!-- === Auth Modal (v2.7.3) === -->
<div class="fixed inset-0 bg-black/40 hidden items-center justify-center z-[70]" id="auth-modal">
<div class="bg-white w-full max-w-md rounded-2xl p-6 shadow-2xl">
<div class="flex items-center justify-between mb-3">
<h3 class="text-xl font-extrabold text-blue-700">ÄÄƒng Nháº­p / ÄÄƒng KÃ½</h3>
<button class="text-2xl leading-none text-gray-500 hover:text-gray-700" id="auth-close">Ã—</button>
</div>
<div class="hidden mb-3 text-sm p-3 rounded-md" id="auth-alert"></div>
<div class="flex gap-2 mb-4">
<button class="flex-1 py-2 rounded-xl bg-blue-100 font-bold" id="tab-login">ÄÄƒng nháº­p</button>
<button class="flex-1 py-2 rounded-xl bg-gray-100" id="tab-register">ÄÄƒng kÃ½</button>
</div>
<form class="space-y-3" id="form-login">
<input autocomplete="username" class="w-full border rounded-xl p-3" name="gov_id" placeholder="MÃ£ Äá»‹nh Danh Bá»™ GD&ÄT" required=""/>
<input autocomplete="current-password" class="w-full border rounded-xl p-3" name="pin" placeholder="PIN" required="" type="password"/>
<div class="text-xs text-gray-500">Hoáº·c vÃ o cháº¿ Ä‘á»™ giÃ¡o viÃªn: Ä‘iá»n máº­t kháº©u bÃªn dÆ°á»›i.</div>
<input class="w-full border rounded-xl p-3" name="teacher_pass" placeholder="Máº­t kháº©u giÃ¡o viÃªn (tuá»³ chá»n - 122025)" type="password"/>
<button class="w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 font-bold" type="submit">ÄÄƒng nháº­p</button>
</form>
<form class="space-y-3 hidden" id="form-register">
<div class="text-xs text-amber-700 bg-amber-50 border border-amber-200 rounded-lg p-2">Chá»‰ há»c sinh cÃ³ <b>MÃ£ Äá»‹nh Danh Bá»™ GD&ÄT</b> Ä‘Ã£ Ä‘Æ°á»£c nhÃ  trÆ°á»ng náº¡p sáºµn má»›i Ä‘Äƒng kÃ½ Ä‘Æ°á»£c. Sau khi Ä‘Äƒng kÃ½ thÃ nh cÃ´ng, há»‡ thá»‘ng sáº½ tá»± cáº¥p <b>gov_id</b> cho báº¡n.</div>
<input class="w-full border rounded-xl p-3" name="name" placeholder="TÃªn há»c sinh" required=""/>
<div class="grid grid-cols-2 gap-3">
<input class="border rounded-xl p-3" name="grade" placeholder="Khá»‘i (3/4/5)" required=""/>
<input class="border rounded-xl p-3" name="class" placeholder="Lá»›p (vd: 5A)" required=""/>
</div>
<input class="w-full border rounded-xl p-3" name="gov_id" placeholder="MÃ£ Äá»‹nh Danh Bá»™ GD&ÄT (báº¯t buá»™c, Ä‘Ã£ Ä‘Æ°á»£c cáº¥p)" required=""/>
<input class="w-full border rounded-xl p-3" name="pin" placeholder="Táº¡o PIN (â‰¥4 kÃ½ tá»±)" required="" type="password"/>
<button class="w-full bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl p-3 font-bold" type="submit">Táº¡o tÃ i khoáº£n</button>
</form>
</div>
</div>
<script>
(function(){
// Updated API URL to the latest GAS deployment
const AUTH_API = "https://script.google.com/macros/s/AKfycbyBZC7beL0eb386iH7oXdLoT2GfcUqIghP0e-zVhIhRTSwsb1qKdk3_q7jRHZmkrdB5/exec";
  const $ = (sel) => document.querySelector(sel);
  const modal = $("#auth-modal");
  const btnOpen = $("#auth-open-btn");
  const btnClose = $("#auth-close");
  const formLogin = $("#form-login");
  const formRegister = $("#form-register");
  const tabLogin = $("#tab-login");
  const tabRegister = $("#tab-register");
  const alertBox = $("#auth-alert");

  function openModal(){
    if (!modal) return;
    modal.classList.remove("hidden");
    modal.classList.add("flex");
    showLogin();
    showAlert(""); // clear
  }
  function closeModal(){
    if (!modal) return;
    modal.classList.add("hidden");
    modal.classList.remove("flex");
  }
  function showAlert(msg, type){
    if (!alertBox) return;
    if (!msg){
      alertBox.classList.add("hidden");
      alertBox.textContent = "";
      return;
    }
    alertBox.classList.remove("hidden");
    alertBox.textContent = msg;
    alertBox.className = "mb-3 text-sm p-3 rounded-md " + (type==="ok" ? "bg-green-100 text-green-700" : "bg-red-100 text-red-700");
  }
  function showLogin(){
    tabLogin.classList.add("bg-blue-100","font-bold");
    tabRegister.classList.remove("bg-blue-100","font-bold");
    formLogin.classList.remove("hidden");
    formRegister.classList.add("hidden");
  }
  function showRegister(){
    tabRegister.classList.add("bg-blue-100","font-bold");
    tabLogin.classList.remove("bg-blue-100","font-bold");
    formRegister.classList.remove("hidden");
    formLogin.classList.add("hidden");
  }

  if (btnOpen) btnOpen.addEventListener("click", openModal);
  if (btnClose) btnClose.addEventListener("click", closeModal);
  if (modal) modal.addEventListener("click", (e)=>{ if(e.target===modal) closeModal(); });
  if (tabLogin) tabLogin.addEventListener("click", showLogin);
  if (tabRegister) tabRegister.addEventListener("click", showRegister);

  async function postJson(payload){
    const res = await fetch(AUTH_API, { method: "POST", credentials: "omit",
      headers: { "Content-Type": "text/plain;charset=UTF-8" },
      body: JSON.stringify(payload),
      mode: "cors"
    });
    if(!res.ok) throw new Error("HTTP " + res.status);
      return res.json();
  }

  formLogin && formLogin.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const fd = new FormData(formLogin);
    const gov_id = String(fd.get("gov_id")||"").trim();
    const pin = String(fd.get("pin")||"").trim();
    const teacher_pass = String(fd.get("teacher_pass")||"").trim();
    try{
      showAlert("Äang Ä‘Äƒng nháº­p...");
      const payload = teacher_pass ? {action:"login", teacher_pass} : {action:"login", gov_id, pin};
      const data = await postJson(payload);
      if (!data || data.ok!==true) throw new Error(data && data.error ? data.error : "ÄÄƒng nháº­p tháº¥t báº¡i");
      // Merge server response with any existing auth to preserve local fields (e.g. avatar_custom)
      const current = (typeof getAuth === 'function' ? (getAuth() || {}) : {});
      const merged   = Object.assign({}, current, data || {});
      setAuth(merged);
      // Use the unified logged-in UI renderer so that avatar, name and meta update correctly
      if (typeof renderLoggedInUI === 'function') {
        renderLoggedInUI(merged);
      }
      // Still update the auth-only elements for legacy code
      try { renderAuthUI(); } catch(e){}
      showAlert("ÄÄƒng nháº­p thÃ nh cÃ´ng! Xin chÃ o " + (merged.name || merged.gov_id), "ok");
      setTimeout(()=>{ closeModal(); }, 800);
      // Update any modal header/profile UI if available
      if (typeof hydrateModalHeader === 'function') {
        hydrateModalHeader(merged);
      }
    }catch(err){
      showAlert(err.message||String(err));
    }
  });

  formRegister && formRegister.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const fd = new FormData(formRegister);
    const payload = {
      action: "register",
      name: String(fd.get("name")||"").trim(),
      grade: String(fd.get("grade")||"").trim(),
      class: String(fd.get("class")||"").trim(),
      gov_id: String(fd.get("gov_id")||"").trim(),
      pin: String(fd.get("pin")||"").trim()
    };
    try{
      showAlert("Äang táº¡o tÃ i khoáº£n...");
      const data = await postJson(payload);
      if (!data || data.ok!==true) throw new Error(data && data.error ? data.error : "ÄÄƒng kÃ½ tháº¥t báº¡i");
      localStorage.setItem("gau_auth", JSON.stringify(data));
      try{ renderAuthUI(); }catch(e){}
      showAlert("Táº¡o tÃ i khoáº£n thÃ nh cÃ´ng! Xin chÃ o " + (data.name || data.gov_id), "ok");
      setTimeout(()=>{ closeModal(); }, 900);
    }catch(err){
      showAlert(err.message||String(err));
    }
  });
})();
</script>
<script>
(function(){
  const AUTH_KEY = "gau_auth";
  const $ = (s)=>document.querySelector(s);
  const authEntry = $("#auth-entry-wrap");
  const accArea = $("#account-area");
  const accName = $("#acc-name");
  const accMeta = $("#acc-meta");
  function readAuth(){
    try { return JSON.parse(localStorage.getItem(AUTH_KEY)||""); } catch(e){ return null; }
  }
  function renderAuthUI(){
    const a = readAuth();
    const logged = a && a.token;
    if(logged){
      authEntry && authEntry.classList.add("hidden");
      accArea && accArea.classList.remove("hidden");
      if (accName) accName.textContent = a.name || a.gov_id || "Há»c sinh";
      const meta = [a.grade ? ("Khá»‘i " + a.grade) : "", a.class ? ("Lá»›p " + a.class) : ""].filter(Boolean).join(" â€¢ ");
      accMeta && (accMeta.textContent = meta);
      // Sync info in modal
      const n1 = document.getElementById("acc-modal-name");
      const m1 = document.getElementById("acc-modal-meta");
      if (n1) n1.textContent = accName.textContent;
      if (m1) m1.textContent = meta;
    } else {
      accArea && accArea.classList.add("hidden");
      authEntry && authEntry.classList.remove("hidden");
    }
  }
  window.renderAuthUI = renderAuthUI;
  // Events
  const btnLogout = $("#acc-logout");
  btnLogout && btnLogout.addEventListener("click", ()=>{
    localStorage.removeItem(AUTH_KEY);
    renderAuthUI();
    alert("ÄÃ£ Ä‘Äƒng xuáº¥t!");
  });
  const btnSettings = $("#acc-settings");
  btnSettings && btnSettings.addEventListener("click", ()=>{
    const mm = document.getElementById("account-modal");
    mm && mm.classList.remove("hidden");
  });
  ["acc-close","acc-close2"].forEach(id=>{
    const b = document.getElementById(id);
    b && b.addEventListener("click", ()=>{
      document.getElementById("account-modal")?.classList.add("hidden");
    });
  });
  const modalLogout = document.getElementById("acc-modal-logout");
  modalLogout && modalLogout.addEventListener("click", ()=>{
    localStorage.removeItem(AUTH_KEY);
    document.getElementById("account-modal")?.classList.add("hidden");
    renderAuthUI();
    alert("ÄÃ£ Ä‘Äƒng xuáº¥t!");
  });
  // Initial
  document.addEventListener("DOMContentLoaded", renderAuthUI);
  window.addEventListener("load", renderAuthUI);
})();
</script>
<!-- Account Settings Modal -->
<div class="fixed inset-0 z-[100] hidden" id="account-modal">
<div class="absolute inset-0 bg-black/40"></div>
<div class="absolute inset-0 flex items-center justify-center p-4">
<div class="w-full max-w-md bg-white rounded-2xl shadow-lg overflow-hidden">
<div class="px-5 py-4 border-b flex items-center justify-between">
<h3 class="font-bold text-gray-800">CÃ i Ä‘áº·t tÃ i khoáº£n</h3>
<button class="text-gray-500 hover:text-gray-700 text-xl leading-none" id="acc-close">Ã—</button>
</div>
<div class="p-5 space-y-4">
<div class="flex items-center gap-3">
<img alt="avatar" class="w-10 h-10 rounded-full ring-2 ring-blue-100" id="acc-modal-avatar" src="data/images/logo-bear-64.png"/>
<div>
<div class="font-semibold" id="acc-modal-name">Há»c sinh</div>
<div class="text-sm text-gray-600" id="acc-modal-meta">Khá»‘i â€¢ Lá»›p</div>
</div>
</div>
<div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800">
<b>LÆ°u Ã½:</b> Thay Ä‘á»•i thÃ´ng tin vÃ  Ä‘á»•i PIN sáº½ Ä‘Æ°á»£c báº­t á»Ÿ giai Ä‘oáº¡n P2 (backend). Hiá»‡n táº¡i báº¡n cÃ³ thá»ƒ ÄÄƒng xuáº¥t bÃ¬nh thÆ°á»ng.
        </div>
<div class="grid grid-cols-2 gap-3">
<button class="px-4 py-2 rounded-lg bg-gray-200 text-gray-600 cursor-not-allowed" id="acc-change-pin">Äá»•i PIN (sáº¯p báº­t)</button>
<button class="px-4 py-2 rounded-lg bg-gray-200 text-gray-600 cursor-not-allowed" id="acc-change-info">Äá»•i thÃ´ng tin (sáº¯p báº­t)</button>
</div>
</div>
<div class="px-5 py-4 border-t flex justify-end gap-2">
<button class="px-4 py-2 rounded-lg bg-red-500 text-white" id="acc-modal-logout">ÄÄƒng xuáº¥t</button>
<button class="px-4 py-2 rounded-lg bg-gray-200" id="acc-close2">ÄÃ³ng</button>
</div>
</div>
</div>
</div>
<!-- === [AUTH UPGRADE v2.8.0] Account Settings Modal (inserted just before <script>
/* ===== Client-side cache for Leaderboard (lb-cache) ===== */
(function(){
  const LB_CACHE_NS = 'lb-cache-v1';
  const TZ = 'Asia/Ho_Chi_Minh';

  function lbScopeToken(scope){
    const d = new Date();
    if(scope === 'daily'){
      const y = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, year: 'numeric'}).format(d);
      const m = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, month: '2-digit'}).format(d);
      const day = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, day: '2-digit'}).format(d);
      return `${y}${m}${day}`;
    }
    if(scope === 'weekly'){
      const onejan = new Date(d.getFullYear(),0,1);
      const week = Math.ceil((((d-onejan)/86400000)+onejan.getDay()+1)/7);
      return `${d.getFullYear()}w${week}`;
    }
    return 'all';
  }
  function lbCacheKey(scope){ return `${LB_CACHE_NS}:${scope}:${lbScopeToken(scope)}`; }
  function readLbCache(scope){
    try{
      const raw = localStorage.getItem(lbCacheKey(scope));
      if(!raw) return null;
      const obj = JSON.parse(raw);
      return (obj && Array.isArray(obj.rows)) ? obj : null;
    }catch(_){ return null; }
  }
  function writeLbCache(scope, rows){
    try{ localStorage.setItem(lbCacheKey(scope), JSON.stringify({ rows, fetchedAt: Date.now() })); }catch(_){}
  }
  function cacheIsFresh(scope, maxAgeMs){ 
    const c = readLbCache(scope); 
    return !!(c && (Date.now() - (c.fetchedAt||0) < maxAgeMs));
  }

  // Find tbody/render util (non-destructive: only set innerHTML of rows area)
  function renderLeaderboardRows(rows){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = rows.map((r,i)=>`
      <tr>
        <td>${i+1}</td>
        <td>${r.name || r.username || 'â€”'}</td>
        <td>${r.class || r.grade || 'â€”'}</td>
        <td>${r.score ?? r.avg_score ?? 0}</td>
        <td>${(r.time_ms!=null && r.time_ms!=='' ? r.time_ms : (r.time_taken_ms??'â€”'))}</td>
      </tr>
    `).join('');
  }
  function renderSkeleton(count){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = Array.from({length:count||8}).map(()=>`
      <tr class="animate-pulse opacity-60">
        <td>â‹¯</td><td>Äang táº£iâ€¦</td><td>â‹¯</td><td>â‹¯</td><td>â‹¯</td>
      </tr>
    `).join('');
  }

  // expose on window so existing code can call
  window.__LB_CACHE__ = {
    readLbCache, writeLbCache, cacheIsFresh, renderLeaderboardRows, renderSkeleton
  };

  // Main show function using existing apiPost if present
  window.showLeaderboard = async function(scope, limit){
    scope = scope || 'daily';
    limit = limit || 50;

    const cached = readLbCache(scope);
    if(cached){ renderLeaderboardRows(cached.rows); }
    else { renderSkeleton(8); }

    // Avoid hammering API if a fresh cache exists (<60s)
    if(cacheIsFresh(scope, 60000)) return;

    try{
      if (typeof apiPost !== 'function') return; // safety
      const res = await apiPost('leaderboard', { scope, limit });
      const rows = (res && (res.rows || res.data || res.items)) || [];
      if(rows && rows.length){
        renderLeaderboardRows(rows);
        writeLbCache(scope, rows);
      }
    }catch(e){
      // keep cached UI silently
      console && console.debug && console.debug('leaderboard fetch failed, using cache', e);
    }
  };
})();

</script>

<script>
(function(){
  function bindTab(selector, scope){
    var el = document.querySelector(selector);
    if(!el) return;
    el.addEventListener('click', function(){ window.showLeaderboard(scope); });
  }
  // Common selectors (adjusted to what's likely in your UI)
  bindTab('#tab-daily', 'daily');
  bindTab('#tab-weekly', 'weekly');
  bindTab('#tab-alltime', 'all');
  // When opening the leaderboard modal/page, attempt default load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function(){ window.showLeaderboard('daily'); });
  } else {
    window.showLeaderboard('daily');
  }
})();
</script>


<!-- AUTH INTEGRATION (auto-injected) -->
<script>
(function(){'use strict';
  const AUTH_API = "https://script.google.com/macros/s/AKfycbyBZC7beL0eb386iH7oXdLoT2GfcUqIghP0e-zVhIhRTSwsb1qKdk3_q7jRHZmkrdB5/exec";
  function postJSON(url, data){
    return fetch(url, { method:'POST', headers:{'Content-Type':'text/plain;charset=utf-8'}, body: JSON.stringify(data) })
      .then(r => r.json());
  }
  function saveToken(t){ try{ localStorage.setItem('auth_token', t||''); }catch(e){} }
  function getToken(){ try{ return localStorage.getItem('auth_token')||''; }catch(e){ return ''; } }
  function uiStatus(msg, type){ 
    let el = document.getElementById('auth-status'); 
    if(!el){ el = document.createElement('div'); el.id='auth-status'; el.style.cssText='position:fixed;left:50%;transform:translateX(-50%);bottom:16px;background:#111827;color:#fff;padding:10px 14px;border-radius:12px;z-index:99999;font-size:12px;box-shadow:0 8px 20px rgba(0,0,0,.2)'; document.body.appendChild(el);}
    el.style.background = (type==='ok') ? '#059669' : (type==='warn' ? '#c2410c' : '#111827');
    el.textContent = msg;
    clearTimeout(window.__auth_toast_timer);
    window.__auth_toast_timer = setTimeout(()=>{ el.remove(); }, 3000);
  }

  // REGISTER
  const fr = document.getElementById('form-register');
  if (fr) {
    fr.addEventListener('submit', async function(e){ 
      e.preventDefault();
      const fd = new FormData(fr);
      const payload = {
        action: 'register',
        // BACKEND yÃªu cáº§u cÃ¡c trÆ°á»ng nÃ y (Ä‘Ã£ thá»‘ng nháº¥t): name, grade, class, pin, gov_id
        name: String(fd.get('name')||'').trim(),
        grade: String(fd.get('grade')||'').trim(),
        'class': String(fd.get('class')||'').trim(),
        pin: String(fd.get('pin')||'').trim(),
        gov_id: String(fd.get('gov_id')||'').trim()
      };
      if (!payload.gov_id) return uiStatus('Vui lÃ²ng nháº­p MÃ£ Äá»‹nh Danh Bá»™ GD&ÄT', 'warn');
      try {
        fr.querySelector('button[type=submit]')?.setAttribute('disabled','');
        const res = await postJSON(AUTH_API, payload);
        if (res && res.ok) {
          saveToken(res.token);
          uiStatus('ÄÄƒng kÃ½ thÃ nh cÃ´ng! MÃ£ há»c sinh: ' + (res.gov_id||''), 'ok');
          // Ä‘iá»n ngÆ°á»£c gov_id vÃ o form Ä‘Äƒng nháº­p náº¿u tá»“n táº¡i
          const si = document.querySelector('#form-login input[name=gov_id]');
          if (si) si.value = res.gov_id||'';
          // cáº­p nháº­t tÃªn hiá»ƒn thá»‹ náº¿u cÃ³
          const n = document.querySelector('[data-user-name]'); if(n) n.textContent = res.name||'';
        } else {
          uiStatus(res && res.error ? res.error : 'ÄÄƒng kÃ½ tháº¥t báº¡i', 'err');
        }
      } catch(err){ uiStatus('Lá»—i máº¡ng: ' + err, 'err'); }
      finally { fr.querySelector('button[type=submit]')?.removeAttribute('disabled'); }
    });
  }

  // LOGIN
  const fl = document.getElementById('form-login');
  if (fl) {
    fl.addEventListener('submit', async function(e){ 
      e.preventDefault();
      const fd = new FormData(fl);
      const payload = { action:'login' };
      const teacherPass = String(fd.get('teacher_pass')||'').trim();
      const govId = String(fd.get('gov_id')||'').trim();
      const pin = String(fd.get('pin')||'').trim();
      if (teacherPass) { payload.teacher_pass = teacherPass; }
      else { payload.gov_id = govId; payload.pin = pin; }
      try {
        fl.querySelector('button[type=submit]')?.setAttribute('disabled','');
        const res = await postJSON(AUTH_API, payload);
        if (res && res.ok) {
          saveToken(res.token);
          uiStatus('ÄÄƒng nháº­p thÃ nh cÃ´ng', 'ok');
          const n = document.querySelector('[data-user-name]'); if(n) n.textContent = res.name||'';
        } else {
          uiStatus(res && res.error ? res.error : 'ÄÄƒng nháº­p tháº¥t báº¡i', 'err');
        }
      } catch(err){ uiStatus('Lá»—i máº¡ng: ' + err, 'err'); }
      finally { fl.querySelector('button[type=submit]')?.removeAttribute('disabled'); }
    });
  }

  // WHOAMI on load -> tá»± khÃ´i phá»¥c phiÃªn
  (async function(){
    const t = getToken(); if(!t) return;
    try {
      const res = await postJSON(AUTH_API, { action:'whoami', token: t });
      if(res && res.ok) {
        const n = document.querySelector('[data-user-name]'); if(n) n.textContent = res.name||'';
      }
    } catch(_e){}
  })();

})();
</script>

</body>) === -->
<div class="fixed inset-0 hidden items-center justify-center z-50" id="account-modal">
<div class="absolute inset-0 bg-black/40"></div>
<div class="relative bg-white rounded-3xl shadow-2xl w-[min(92vw,560px)] p-6">
<div class="flex items-center justify-between mb-4">
<h3 class="text-xl font-extrabold text-blue-700">CÃ i Ä‘áº·t tÃ i khoáº£n</h3>
<button class="text-2xl leading-none" id="account-close">Ã—</button>
</div>
<div class="flex items-center gap-3 mb-4">
<img alt="" class="w-12 h-12 rounded-full ring-2 ring-blue-100" id="modal-avatar" src="data/images/logo-bear-64.png"/>
<div>
<div class="font-bold" id="modal-name">Há»c sinh</div>
<div class="text-sm text-gray-600" id="modal-grade-class">Khá»‘i â€¢ Lá»›p</div>
</div>
</div>
<div class="space-y-3">
<!-- PIN change button remains -->
<button class="w-full px-4 py-2 rounded-xl bg-white border" id="btnChangePin">Äá»•i PIN</button>
<!-- Personal information form -->
<div class="border-t pt-3 space-y-2">
<label class="text-sm text-gray-600">Cáº­p nháº­t thÃ´ng tin</label>
<input class="w-full border rounded-xl p-3" id="inputName" placeholder="TÃªn hiá»ƒn thá»‹" type="text"/>
<div class="grid grid-cols-2 gap-3">
<input class="border rounded-xl p-3" id="inputGrade" placeholder="Khá»‘i (3/4/5)" type="text"/>
<input class="border rounded-xl p-3" id="inputClass" placeholder="Lá»›p (vd: 5A)" type="text"/>
</div>
<button class="w-full px-3 py-2 rounded-xl bg-blue-600 text-white" id="btnSaveInfo">LÆ°u thÃ´ng tin</button>
</div>
<!-- Avatar selection section -->
<div class="border-t pt-3" id="avatar-select-section">
<label class="text-sm text-gray-600">Chá»n áº£nh Ä‘áº¡i diá»‡n</label>
<!-- Grid of builtâ€‘in avatars; populated by JS -->
<div class="grid grid-cols-4 gap-3 mt-2" id="avatar-icon-grid"></div>
<div class="mt-3">
<button class="px-3 py-2 rounded-xl bg-blue-600 text-white" id="btnSaveAvatar">LÆ°u áº£nh Ä‘áº¡i diá»‡n</button>
</div>
<!-- Preview for the currently selected avatar -->
<img alt="" class="mt-3 w-16 h-16 rounded-full ring-2 ring-blue-100" id="avatarPreview" src="data/images/logo-bear-64.png"/>
</div>
</div>
<div class="mt-5 flex justify-end">
<button class="px-4 py-2 rounded-xl bg-gray-100" id="account-close-2">ÄÃ³ng</button>
</div>
</div>
</div>
<!-- === [AUTH UPGRADE v2.8.0] Auth wiring appended before <script>
/* ===== Client-side cache for Leaderboard (lb-cache) ===== */
(function(){
  const LB_CACHE_NS = 'lb-cache-v1';
  const TZ = 'Asia/Ho_Chi_Minh';

  function lbScopeToken(scope){
    const d = new Date();
    if(scope === 'daily'){
      const y = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, year: 'numeric'}).format(d);
      const m = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, month: '2-digit'}).format(d);
      const day = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, day: '2-digit'}).format(d);
      return `${y}${m}${day}`;
    }
    if(scope === 'weekly'){
      const onejan = new Date(d.getFullYear(),0,1);
      const week = Math.ceil((((d-onejan)/86400000)+onejan.getDay()+1)/7);
      return `${d.getFullYear()}w${week}`;
    }
    return 'all';
  }
  function lbCacheKey(scope){ return `${LB_CACHE_NS}:${scope}:${lbScopeToken(scope)}`; }
  function readLbCache(scope){
    try{
      const raw = localStorage.getItem(lbCacheKey(scope));
      if(!raw) return null;
      const obj = JSON.parse(raw);
      return (obj && Array.isArray(obj.rows)) ? obj : null;
    }catch(_){ return null; }
  }
  function writeLbCache(scope, rows){
    try{ localStorage.setItem(lbCacheKey(scope), JSON.stringify({ rows, fetchedAt: Date.now() })); }catch(_){}
  }
  function cacheIsFresh(scope, maxAgeMs){ 
    const c = readLbCache(scope); 
    return !!(c && (Date.now() - (c.fetchedAt||0) < maxAgeMs));
  }

  // Find tbody/render util (non-destructive: only set innerHTML of rows area)
  function renderLeaderboardRows(rows){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = rows.map((r,i)=>`
      <tr>
        <td>${i+1}</td>
        <td>${r.name || r.username || 'â€”'}</td>
        <td>${r.class || r.grade || 'â€”'}</td>
        <td>${r.score ?? r.avg_score ?? 0}</td>
        <td>${(r.time_ms!=null && r.time_ms!=='' ? r.time_ms : (r.time_taken_ms??'â€”'))}</td>
      </tr>
    `).join('');
  }
  function renderSkeleton(count){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = Array.from({length:count||8}).map(()=>`
      <tr class="animate-pulse opacity-60">
        <td>â‹¯</td><td>Äang táº£iâ€¦</td><td>â‹¯</td><td>â‹¯</td><td>â‹¯</td>
      </tr>
    `).join('');
  }

  // expose on window so existing code can call
  window.__LB_CACHE__ = {
    readLbCache, writeLbCache, cacheIsFresh, renderLeaderboardRows, renderSkeleton
  };

  // Main show function using existing apiPost if present
  window.showLeaderboard = async function(scope, limit){
    scope = scope || 'daily';
    limit = limit || 50;

    const cached = readLbCache(scope);
    if(cached){ renderLeaderboardRows(cached.rows); }
    else { renderSkeleton(8); }

    // Avoid hammering API if a fresh cache exists (<60s)
    if(cacheIsFresh(scope, 60000)) return;

    try{
      if (typeof apiPost !== 'function') return; // safety
      const res = await apiPost('leaderboard', { scope, limit });
      const rows = (res && (res.rows || res.data || res.items)) || [];
      if(rows && rows.length){
        renderLeaderboardRows(rows);
        writeLbCache(scope, rows);
      }
    }catch(e){
      // keep cached UI silently
      console && console.debug && console.debug('leaderboard fetch failed, using cache', e);
    }
  };
})();

</script>

<script>
(function(){
  function bindTab(selector, scope){
    var el = document.querySelector(selector);
    if(!el) return;
    el.addEventListener('click', function(){ window.showLeaderboard(scope); });
  }
  // Common selectors (adjusted to what's likely in your UI)
  bindTab('#tab-daily', 'daily');
  bindTab('#tab-weekly', 'weekly');
  bindTab('#tab-alltime', 'all');
  // When opening the leaderboard modal/page, attempt default load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function(){ window.showLeaderboard('daily'); });
  } else {
    window.showLeaderboard('daily');
  }
})();
</script>

</body> (no existing IDs changed) === -->
<!-- Toast message for success notifications -->
<div class="hidden fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-xl shadow-lg flex items-center gap-2 z-50" id="success-toast">
<span class="text-xl">âœ“</span>
<span id="success-toast-msg"></span>
</div>
<!-- P2 Leaderboard Modal Overlay (hidden by default) -->
<div class="hidden fixed inset-0 z-50 items-center justify-center flex" id="p2-lb-overlay">
<!-- backdrop -->
<div class="absolute inset-0 bg-black/50"></div>
<!-- modal -->
<div class="relative bg-white rounded-2xl shadow-2xl p-6 max-w-3xl w-[92vw] max-h-[90vh] overflow-y-auto">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center gap-2">
<span class="text-3xl">ğŸ†</span>
<h3 class="text-xl font-extrabold text-blue-700">Báº£ng xáº¿p háº¡ng</h3>
</div>
<button class="text-3xl leading-none hover:text-red-500" id="p2-lb-close">Ã—</button>
</div>
<!-- My Stats section -->
<div class="mb-5" id="p2-my-stats">
<div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
<div class="p-3 bg-yellow-50 border border-yellow-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Äiá»ƒm hÃ´m nay</div>
<div class="relative h-3 bg-yellow-100 rounded-full overflow-hidden">
<div class="absolute top-0 left-0 h-full bg-yellow-400 rounded-full" id="p2-lb-progress-bar" style="width:0%"></div>
</div>
<div class="text-xs mt-1" id="p2-lb-progress-text">0 / 0</div>
</div>
<div class="p-3 bg-green-50 border border-green-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Äiá»ƒm cao nháº¥t</div>
<div class="text-lg font-bold" id="p2-lb-best-score">â€”</div>
<div class="text-xs text-gray-500" id="p2-lb-best-quiz">â€”</div>
</div>
<div class="p-3 bg-blue-50 border border-blue-200 rounded-xl text-center">
<div class="text-sm text-gray-600 mb-1">Thá»i gian tá»‘t nháº¥t</div>
<div class="text-lg font-bold" id="p2-lb-best-time">â€”</div>
<div class="text-xs text-gray-500">ms</div>
</div>
</div>
</div>
<!-- Tabs for scopes -->
<div class="flex mb-3">
<button class="p2-lb-tab px-4 py-1 text-sm font-medium rounded-full mr-2 bg-blue-600 text-white" data-scope="daily">HÃ´m nay</button>
<button class="p2-lb-tab px-4 py-1 text-sm font-medium rounded-full mr-2 bg-gray-200 text-gray-700" data-scope="weekly">Tuáº§n nÃ y</button>
<button class="p2-lb-tab px-4 py-1 text-sm font-medium rounded-full bg-gray-200 text-gray-700" data-scope="all">All-time</button>
</div>
<!-- Leaderboard table -->
<div class="overflow-auto">
<table class="min-w-full text-sm">
<thead class="sticky top-0 bg-white">
<tr class="border-b">
<th class="px-2 py-2">Háº¡ng</th>
<th class="px-2 py-2">Há» &amp; tÃªn</th>
<th class="px-2 py-2">Lá»›p</th>
<th class="px-2 py-2">Äiá»ƒm</th>
<th class="px-2 py-2">Thá»i gian</th>
</tr>
</thead>
<tbody id="p2-lb-list">
<tr><td class="text-center p-3 text-gray-500" colspan="5">Äang táº£iâ€¦</td></tr>
</tbody>
</table>
</div>
</div>
</div>
<!-- scoreboard script: defines functions for leaderboard & my stats and binds events -->
<script>
      // scoreboard module executed after DOM is ready
      document.addEventListener('DOMContentLoaded', () => {
        const lbOverlay = document.getElementById('p2-lb-overlay');
        if(!lbOverlay) return;
        // helper: call whoami via existing apiPost
        async function p2Whoami(){
          const auth = getAuth();
          if(!auth || !auth.token) return null;
          try{
            const r = await apiPost('whoami', { token: auth.token });
            return (r && r.ok) ? r : null;
          }catch(e){ return null; }
        }
        // load my stats: progress bar, best score, best time
        async function p2LoadMyStats(){
          const me = await p2Whoami();
          const progBar  = document.getElementById('p2-lb-progress-bar');
          const progText = document.getElementById('p2-lb-progress-text');
          const bestScoreEl = document.getElementById('p2-lb-best-score');
          const bestQuizEl  = document.getElementById('p2-lb-best-quiz');
          const bestTimeEl  = document.getElementById('p2-lb-best-time');
          if(!me){
            if(progBar) progBar.style.width = '0%';
            if(progText) progText.textContent = '0 / 0';
            if(bestScoreEl) bestScoreEl.textContent = 'â€”';
            if(bestQuizEl) bestQuizEl.textContent = 'â€”';
            if(bestTimeEl) bestTimeEl.textContent = 'â€”';
            return;
          }
          let today = 0; let bestScore = 'â€”', bestQuiz = 'â€”', bestTime = 'â€”';
          const token = me.token;
          // fetch daily leaderboard to get today's points
          try{
            const daily = await apiPost('leaderboard', { token, scope:'daily', limit:50 });
            const rows = daily.rows || daily.data || daily.items || [];
            const mine = rows.find(r => r.gov_id === me.gov_id);
            // new scoring API only returns `points` for each row
            if(mine) today = Number(mine.points || 0);
          }catch(e){}
          // fetch all-time leaderboard to get best points from all-time leaderboard
          try{
            const all = await apiPost('leaderboard', { token, scope:'all', limit:50 });
            const rows = all.rows || all.data || all.items || [];
            const mine = rows.find(r => r.gov_id === me.gov_id);
            if(mine){
              bestScore = (typeof mine.points !== 'undefined') ? mine.points : 'â€”';
              // bestTime and bestQuiz are not provided by the new API; leave as 'â€”'
            }
          }catch(e){}
          // progress bar
          if(progBar){
            // determine daily cap per grade; fallback to grade 4
            const capMap = { '3': 200, '4': 250, '5': 300 };
            const cap = capMap[String(me.grade) || ''] || capMap['4'];
            const pct = cap ? Math.min(100, Math.round((today / cap) * 100)) : 0;
            progBar.style.width = pct + '%';
            if(progText) progText.textContent = `${today} / ${cap}`;
          }
          if(bestScoreEl) bestScoreEl.textContent = bestScore;
          if(bestQuizEl) bestQuizEl.textContent  = bestQuiz;
          if(bestTimeEl) bestTimeEl.textContent  = bestTime;
        }
        // load leaderboard for given scope
        async function p2LoadLeaderboard(scope){
          // Use the table body with id 'p2-lb-list' (defined in markup)
          const tbody = document.getElementById('p2-lb-list');
          if(!tbody) return;
          /* cache-first render */
try{
  const cached = (window.__LB_CACHE__ && __LB_CACHE__.readLbCache) ? __LB_CACHE__.readLbCache(scope) : null;
  if(cached && Array.isArray(cached.rows) && cached.rows.length){
    __LB_CACHE__.renderLeaderboardRows(cached.rows);
  } else {
    tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-gray-500">Äang táº£iâ€¦</td></tr>';
  }
}catch(_){ tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-gray-500">Äang táº£iâ€¦</td></tr>'; }

          const me = await p2Whoami();
          const token = me?.token || null;
          try{
            // avoid refetch if cache is fresh (<60s)
if (window.__LB_CACHE__ && __LB_CACHE__.cacheIsFresh && __LB_CACHE__.cacheIsFresh(scope, 60000)) {
  return; // cache already rendered above
}
const res = await apiPost('leaderboard', { token, scope, limit:50 });
            const rows = res.rows || res.data || res.items || [];
            if(!rows.length){
              tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-gray-500">ChÆ°a cÃ³ dá»¯ liá»‡u</td></tr>';
              return;
            }
            let html = '';
            rows.forEach((row, idx) => {
              const rank = idx + 1;
              let rankDisplay;
              if(rank === 1) rankDisplay = '<span class="p2-trophy">ğŸ¥‡</span>';
              else if(rank === 2) rankDisplay = '<span class="p2-trophy">ğŸ¥ˆ</span>';
              else if(rank === 3) rankDisplay = '<span class="p2-trophy">ğŸ¥‰</span>';
              else rankDisplay = rank;
              const name = row.name || row.student_name || 'â€”';
              const cls  = row.class || row.cls || row.grade_class || 'â€”';
              const pts  = row.points || row.score || row.best_score_final || 0;
              const time = row.best_duration_ms || row.duration_ms || 'â€”';
              const classes = [];
              if(me && row.gov_id === me.gov_id) classes.push('p2-lb-row-me');
              if(rank === 1) classes.push('p2-lb-row-top1');
              else if(rank === 2) classes.push('p2-lb-row-top2');
              else if(rank === 3) classes.push('p2-lb-row-top3');
              html += `<tr class="${classes.join(' ')}"><td class="px-2 py-1">${rankDisplay}</td><td class="px-2 py-1">${name}</td><td class="px-2 py-1">${cls}</td><td class="px-2 py-1 font-bold">${pts}</td><td class="px-2 py-1">${time}</td></tr>`;
            });
            tbody.innerHTML = html;
          }catch(err){
            tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-red-500">Lá»—i táº£i BXH</td></tr>';
          }
        }
        // define global function to open leaderboard
        window.p2ShowLeaderboard = function(){
          lbOverlay.classList.remove('hidden');
          // activate daily tab
          const tabs = document.querySelectorAll('.p2-lb-tab');
          tabs.forEach(tab => {
            const scope = tab.getAttribute('data-scope');
            tab.classList.toggle('p2-lb-tab-active', scope === 'daily');
            tab.classList.toggle('p2-lb-tab-inactive', scope !== 'daily');
          });
          p2LoadMyStats();
          p2LoadLeaderboard('daily');
        };
        // close overlay
        const closeBtn = document.getElementById('p2-lb-close');
        if(closeBtn) closeBtn.addEventListener('click', () => lbOverlay.classList.add('hidden'));
        // handle tab clicks
        const tabs = document.querySelectorAll('.p2-lb-tab');
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            const scope = tab.getAttribute('data-scope');
            tabs.forEach(t => {
              t.classList.remove('p2-lb-tab-active');
              t.classList.add('p2-lb-tab-inactive');
            });
            tab.classList.add('p2-lb-tab-active');
            tab.classList.remove('p2-lb-tab-inactive');
            p2LoadLeaderboard(scope);
          });
        });
      });
    </script>
<!-- Scoped styles for the leaderboard & stats modal -->
<style id="p2-lb-styles">
  /* Tab states */
  .p2-lb-tab {
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
  }
  .p2-lb-tab-active {
    background-color: #2563eb; /* blue-600 */
    color: #ffffff;
  }
  .p2-lb-tab-inactive {
    background-color: #e5e7eb; /* gray-200 */
    color: #374151; /* gray-700 */
  }
  /* Highlight current user's row */
  .p2-lb-row-me {
    background-color: #DCFCE7; /* light green */
  }
  /* Highlight top ranks with playful pastel colors */
  .p2-lb-row-top1 {
    background-color: #FEF3C7; /* gold-ish */
  }
  .p2-lb-row-top2 {
    background-color: #F3F4F6; /* silver-ish (light gray) */
  }
  .p2-lb-row-top3 {
    background-color: #F3E8FF; /* bronze-ish (light purple) */
  }
  /* Trophy column width */
  .p2-trophy {
    font-size: 1.4rem;
    display: inline-block;
    width: 1.6rem;
  }
</style>
<!-- Override and rebind leaderboard JS to avoid init errors -->
<script>
    // Custom leaderboard handler: run after full page load to ensure apiPost & helpers are defined
    window.addEventListener('load', function(){
      // Disabled legacy leaderboard script to avoid conflicts. The new leaderboard logic is defined elsewhere.
      return;
      // daily caps based on grade; adjust if needed
      const DAILY_CAPS = { '3': 200, '4': 250, '5': 300 };
      let meCache = null;

      // Helper to call backend (reuse global apiPost & getAuth)
      async function whoami(){
        const auth = (typeof getAuth === 'function') ? getAuth() : null;
        if(!auth || !auth.token) return null;
        try {
          const r = await apiPost('whoami', { token: auth.token });
          return (r && r.ok) ? r : null;
        }catch(e){ return null; }
      }

      async function loadMyStats(){
        const bar  = document.getElementById('p2-lb-progress-bar');
        const txt  = document.getElementById('p2-lb-progress-text');
        const bestScoreEl = document.getElementById('p2-lb-best-score');
        const bestQuizEl  = document.getElementById('p2-lb-best-quiz');
        const bestTimeEl  = document.getElementById('p2-lb-best-time');
        // reset
        if(bar) bar.style.width = '0%';
        if(txt) txt.textContent = '0 / 0';
        if(bestScoreEl) bestScoreEl.textContent = 'â€”';
        if(bestQuizEl)  bestQuizEl.textContent  = 'â€”';
        if(bestTimeEl)  bestTimeEl.textContent  = 'â€”';
        if(!meCache || !meCache.gov_id) return;
        const token = meCache.token;
        const grade = meCache.grade || '';
        const cap   = DAILY_CAPS[grade] || 0;
        let todayPts = 0;
        // fetch daily leaderboard to get current points
        try{
          const r = await apiPost('leaderboard', { token, scope:'daily', limit: 50 });
          const rows = r && r.rows ? r.rows : [];
          const found = rows.find(x => x.gov_id === meCache.gov_id);
          if(found){ todayPts = Number(found.points || found.score || 0); }
        }catch(err){}
        if(cap > 0){ const pct = Math.max(0, Math.min(100, Math.round((todayPts/cap)*100))); bar.style.width = pct + '%'; txt.textContent = `${todayPts} / ${cap}`; }
        else { txt.textContent = `${todayPts}`; bar.style.width = '0%'; }
        // best-of via all-time
        let totalPts = 0;
        try{
          const r = await apiPost('leaderboard', { token, scope:'all', limit: 50 });
          const rows = r && r.rows ? r.rows : [];
          const found = rows.find(x => x.gov_id === meCache.gov_id);
          if(found){ totalPts = Number(found.points || found.score || 0); }
        }catch(err){}
        if(bestScoreEl) bestScoreEl.textContent = totalPts;
      }

      async function loadLeaderboard(scope){
        const tbody = document.getElementById('p2-lb-list');
        if(!tbody) return;
        tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-gray-500">Äang táº£iâ€¦</td></tr>';
        const auth = (typeof getAuth === 'function') ? getAuth() : null;
        const token = auth && auth.token ? auth.token : null;
        try{
          const r = await apiPost('leaderboard', { token, scope, limit: 50 });
          const rows = (r && r.rows) ? r.rows : [];
          if(!rows.length){ tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-gray-500">ChÆ°a cÃ³ dá»¯ liá»‡u</td></tr>'; return; }
          let html='';
          rows.forEach((row, idx) => {
            const rank = idx+1;
            let rankDisplay;
            if(rank===1) rankDisplay='<span class="p2-trophy">ğŸ¥‡</span>';
            else if(rank===2) rankDisplay='<span class="p2-trophy">ğŸ¥ˆ</span>';
            else if(rank===3) rankDisplay='<span class="p2-trophy">ğŸ¥‰</span>';
            else rankDisplay = rank;
            const name = row.name || row.student_name || 'â€”';
            const cls  = row.class || row.cls || row.grade_class || 'â€”';
            const pts  = row.points || row.score || row.best_score_final || 0;
            const time = row.best_duration_ms || row.duration_ms || 'â€”';
            const classes = [];
            if(meCache && row.gov_id === meCache.gov_id) classes.push('p2-lb-row-me');
            if(rank===1) classes.push('p2-lb-row-top1');
            else if(rank===2) classes.push('p2-lb-row-top2');
            else if(rank===3) classes.push('p2-lb-row-top3');
            html += `<tr class="${classes.join(' ')}"><td class="px-2 py-1">${rankDisplay}</td><td class="px-2 py-1">${name}</td><td class="px-2 py-1">${cls}</td><td class="px-2 py-1 font-bold">${pts}</td><td class="px-2 py-1">${time}</td></tr>`;
          });
          tbody.innerHTML = html;
        }catch(err){ tbody.innerHTML = '<tr><td colspan="5" class="text-center p-3 text-red-500">Lá»—i táº£i BXH</td></tr>'; }
      }

      async function initLeaderboard(){
        meCache = await whoami();
        await loadMyStats();
        await loadLeaderboard('daily');
      }

      // Expose global function
      window.p2ShowLeaderboard = function(){
        const overlay = document.getElementById('p2-lb-overlay');
        if(!overlay) return;
        overlay.classList.remove('hidden');
        // activate daily tab
        const tabs = document.querySelectorAll('.p2-lb-tab');
        tabs.forEach(tab => {
          const scope = tab.getAttribute('data-scope');
          tab.classList.toggle('p2-lb-tab-active', scope === 'daily');
        });
        initLeaderboard();
      };

      // Add close & tab listeners after DOM content loaded
      document.addEventListener('DOMContentLoaded', () => {
        const closeBtn = document.getElementById('p2-lb-close');
        if(closeBtn) closeBtn.addEventListener('click', () => {
          const ov = document.getElementById('p2-lb-overlay');
          if(ov) ov.classList.add('hidden');
        });
        const tabs = document.querySelectorAll('.p2-lb-tab');
        tabs.forEach(tab => {
          tab.addEventListener('click', () => {
            const scope = tab.getAttribute('data-scope');
            tabs.forEach(t => t.classList.remove('p2-lb-tab-active'));
            tab.classList.add('p2-lb-tab-active');
            loadLeaderboard(scope);
          });
        });
      });
    });
  </script>
<script>
// 2) Constants & helpers
// Updated API URL to the latest GAS deployment
const AUTH_API = "https://script.google.com/macros/s/AKfycbyBZC7beL0eb386iH7oXdLoT2GfcUqIghP0e-zVhIhRTSwsb1qKdk3_q7jRHZmkrdB5/exec";  // â† GAS /exec URL

// v2.8.6: new Scoring API for start_run/submit_run/leaderboard calls
const SCORING_API = "https://script.google.com/macros/s/AKfycbyNUYxxZ73XtzO66sCS9xEcW05QRf_lVMQ5naVqeEGTgjyuyUq9nR9lGImpimWKtY5m/exec";
const AUTH_KEY = "gau_auth";

function getAuth(){ try { return JSON.parse(localStorage.getItem(AUTH_KEY) || "{}"); } catch(e){ return {}; } }
function setAuth(x){ localStorage.setItem(AUTH_KEY, JSON.stringify(x || {})); }
function clearAuth(){ localStorage.removeItem(AUTH_KEY); }

async function apiPost(action, payload){
  // Choose endpoint based on action: scoring-related actions go to SCORING_API
  // All other actions (login, whoami, etc.) continue to use AUTH_API.  
  const scoringActions = ['start_run','submit_run','leaderboard'];
  const apiBase = (scoringActions.indexOf(action) !== -1) ? SCORING_API : AUTH_API;
  // Use a plain text content type to avoid CORS preflight issues when
  // sending JSON from a file:// origin. Apps Script accepts JSON
  // encoded bodies even with this header.
  const res = await fetch(apiBase, {
    method: 'POST',
    headers: { 'Content-Type': 'text/plain;charset=UTF-8' },
    body: JSON.stringify(Object.assign({ action }, payload || {})),
    mode: 'cors'
  });
  return res.json();
}

// 3) Profile bar show/hide
function renderLoggedInUI(auth){
  // Always read the latest auth from localStorage if not provided
  if (!auth) {
    auth = getAuth() || {};
  }
  const entry = document.getElementById('auth-entry-wrap');
  const bar   = document.getElementById('account-area');
  if(entry) entry.classList.add('hidden');
  if(bar)   bar.classList.remove('hidden');

  // Update display name
  const nameEl = document.getElementById('acc-name');
  if(nameEl) {
    nameEl.textContent = auth.name || 'Há»c sinh';
  }
  // Update avatar; prefer proxy URLs with cache-busting, then fallback to normal URL or stored values
  const avatarEl = document.getElementById('acc-avatar');
  if(avatarEl){
    const stored = getAuth() || {};
    // Prefer any custom avatar (emoji or built-in icon) saved locally
    avatarEl.src =
      auth.avatar_custom ||
      auth.avatar_proxy_url_busted ||
      auth.avatar_proxy_url ||
      auth.avatar_url_busted ||
      auth.avatar_url ||
      stored.avatar_custom ||
      stored.avatar_proxy_url_busted ||
      stored.avatar_proxy_url ||
      stored.avatar_url_busted ||
      stored.avatar_url ||
      'data/images/logo-bear-64.png';
  }
  // Update grade/class meta
  const metaEl = document.getElementById('acc-meta');
  if(metaEl){
    const grade = auth.grade ? `Khá»‘i ${auth.grade}` : 'Khá»‘i';
    const cls   = auth.class ? `Lá»›p ${auth.class}` : 'Lá»›p';
    metaEl.textContent = `${grade} â€¢ ${cls}`;
  }
}

function renderLoggedOutUI(){
  const entry = document.getElementById('auth-entry-wrap');
  const bar   = document.getElementById('account-area');
  if(entry) entry.classList.remove('hidden');
  if(bar)   bar.classList.add('hidden');
}

// 4) Bootstrap version
async function bootstrapAuth(){
  const auth = getAuth();
  if(!auth || !auth.token){ renderLoggedOutUI(); return; }

  try{
    const me = await apiPost('whoami', { token: auth.token });
    if(!me || me.ok === false){
      clearAuth();
      renderLoggedOutUI();
      return;
    }
    // Merge server data with local auth while preserving locally stored fields
    const merged = Object.assign({}, auth, me);
    // Prefer proxy avatar URL (cache-busted) from server
    if (me.avatar_proxy_url_busted) {
      merged.avatar_proxy_url = me.avatar_proxy_url_busted;
    } else if (me.avatar_proxy_url) {
      merged.avatar_proxy_url = me.avatar_proxy_url;
    }
    // Fallback to local proxy URL if server doesn't supply
    if (!me.avatar_proxy_url && !me.avatar_proxy_url_busted && auth.avatar_proxy_url) {
      merged.avatar_proxy_url = auth.avatar_proxy_url;
    }
    // Handle normal avatar URL
    if (me.avatar_url_busted) {
      merged.avatar_url = me.avatar_url_busted;
    } else if (me.avatar_url) {
      merged.avatar_url = me.avatar_url;
    }
    // Preserve avatar_url if server does not supply any avatar URL
    if (!me.avatar_url && !me.avatar_url_busted && auth.avatar_url) merged.avatar_url = auth.avatar_url;
    // Preserve name/grade/class if not supplied by server
    if (!me.name && auth.name) merged.name = auth.name;
    if (!me.grade && auth.grade) merged.grade = auth.grade;
    if (!me.class && auth.class) merged.class = auth.class;

    // Restore any previously saved custom avatar from localStorage if the server does not provide one.
    // This ensures that refreshing the page or reloading the app retains the selected avatar.
    try {
      if (merged.gov_id && !merged.avatar_custom) {
        const cached = localStorage.getItem('gau_avatar_custom_' + merged.gov_id);
        if (cached) {
          merged.avatar_custom = cached;
        }
      }
    } catch (e) {
      // Swallow any localStorage errors silently
    }
    setAuth(merged);
    renderLoggedInUI(merged);
  }catch(e){
    // network issue: fall back to local
    renderLoggedInUI(auth);
  }
}
document.addEventListener('DOMContentLoaded', bootstrapAuth);

// 6) UI events (bind after DOMContentLoaded with null-guards)
document.addEventListener('DOMContentLoaded', () => {
  const btnLogin = document.getElementById('auth-open-btn');
  // Disable the custom prompt-based login handler. We leave the legacy
  // login/register modal intact so users can register and log in as
  // originally implemented in v2.7.4_officail.
  if(false && btnLogin){
    btnLogin.addEventListener('click', async (e) => {
      // Prevent other click listeners on the login button (e.g. the legacy
      // auth modal) from firing. This ensures our prompt-based login
      // handler runs exclusively.
      if(e){
        if(typeof e.stopImmediatePropagation === 'function') e.stopImmediatePropagation();
        if(typeof e.preventDefault === 'function') e.preventDefault();
      }

      // Hide the legacy auth modal (if present) to avoid overlap with the
      // upgraded prompt-based flow. This modal has the id `auth-modal` and
      // would otherwise display a login/register form.
      const legacyAuthModal = document.getElementById('auth-modal');
      if(legacyAuthModal){
        legacyAuthModal.classList.add('hidden');
        legacyAuthModal.classList.remove('flex');
      }
      const gov_id = prompt('Nháº­p MÃ£ Ä‘á»‹nh danh (gov_id):');
      if(gov_id === null) return;
      const pin = prompt('Nháº­p PIN:');
      if(pin === null) return;

      let res;
      try {
        res = await apiPost('login', { gov_id, pin });
      } catch(err) {
        // Network or fetch error. Inform the user and gracefully fall back to
        // a local session so the UI can still be explored offline. The
        // fallback record stores the entered gov_id and a dummy token.
        alert('KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau. Báº¡n sáº½ Ä‘Æ°á»£c Ä‘Äƒng nháº­p táº¡m thá»i.');
        const fallback = { token: '__local__', name: gov_id || 'Há»c sinh', gov_id: gov_id || '', grade: '', class: '' };
        setAuth(fallback);
        renderLoggedInUI(fallback);
        hydrateModalHeader(fallback);
        return;
      }
      if(!res || res.ok === false){
        alert(res && res.error ? res.error : 'ÄÄƒng nháº­p lá»—i');
        return;
      }

      // Merge server response with any existing auth so we don't lose local fields like avatar_custom
      const currentAuth = (typeof getAuth === 'function' ? (getAuth() || {}) : {});
      const mergedAuth = Object.assign({}, currentAuth, res || {});
      setAuth(mergedAuth);
      renderLoggedInUI(mergedAuth);
      // If the hydrateModalHeader helper exists, pass the merged auth to preserve local fields
      if (typeof hydrateModalHeader === 'function') {
        hydrateModalHeader(mergedAuth);
      }
    });
  }

  const btnSettings = document.getElementById('acc-settings');
  const btnLogout   = document.getElementById('acc-logout');
  // Select the upgraded account settings modal (the last occurrence). If
  // multiple elements share the same id, the browser returns the first
  // match by default. We need the last one for the upgraded UI.
  const modalNodes = document.querySelectorAll('#account-modal');
  const modal = modalNodes.length > 0 ? modalNodes[modalNodes.length - 1] : null;

  if(btnSettings && modal){
    btnSettings.addEventListener('click', (e) => {
      // Prevent legacy handlers on the settings button from showing the old modal
      if(e){
        if(typeof e.stopImmediatePropagation === 'function') e.stopImmediatePropagation();
        if(typeof e.preventDefault === 'function') e.preventDefault();
      }
      hydrateModalHeader(getAuth());
      // Hide any legacy account settings modal before showing the upgraded one
      document.querySelectorAll('#account-modal').forEach((el) => {
        if(el !== modal){
          el.classList.add('hidden');
          el.classList.remove('flex');
        }
      });
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    });
  }

  const close1 = document.getElementById('account-close');
  const close2 = document.getElementById('account-close-2');
  [close1, close2].forEach(el=>{
    if(el) el.addEventListener('click', () => {
      if(modal){ modal.classList.add('hidden'); modal.classList.remove('flex'); }
    });
  });

  if(btnLogout){
    btnLogout.addEventListener('click', async (e) => {
      // Prevent legacy handlers from firing on logout by stopping propagation
      if(e){
        if(typeof e.stopImmediatePropagation === 'function') e.stopImmediatePropagation();
        if(typeof e.preventDefault === 'function') e.preventDefault();
      }
      const auth = getAuth();
      if(auth && auth.token){ try { await apiPost('logout', { token: auth.token }); } catch(e){} }
      clearAuth();
      renderLoggedOutUI();
      if(modal){ modal.classList.add('hidden'); modal.classList.remove('flex'); }
    });
  }

  // Change PIN
  const btnChangePin = document.getElementById('btnChangePin');
  if(btnChangePin){
    btnChangePin.addEventListener('click', async () => {
      const auth = getAuth();
      if(!auth.token) return alert('Báº¡n chÆ°a Ä‘Äƒng nháº­p');
      const old_pin = prompt('PIN cÅ©:'); if(old_pin === null) return;
      const new_pin = prompt('PIN má»›i (>=4):'); if(new_pin === null) return;
      if(!new_pin || new_pin.length < 4) return alert('PIN má»›i tá»‘i thiá»ƒu 4 kÃ½ tá»±');

      let r;
      try {
        r = await apiPost('change_pin', { token: auth.token, old_pin, new_pin });
      } catch(err) {
        alert('KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau.');
        return;
      }
      if(!r || r.ok === false) return alert(r && r.error ? r.error : 'Lá»—i Ä‘á»•i PIN');
      alert('Äá»•i PIN thÃ nh cÃ´ng!');
    });
  }

  // Save updated profile information via form inputs
  const btnSaveInfo = document.getElementById('btnSaveInfo');
  if (btnSaveInfo) {
    btnSaveInfo.addEventListener('click', async () => {
      const auth = getAuth();
      if (!auth || !auth.token) {
        alert('Báº¡n chÆ°a Ä‘Äƒng nháº­p');
        return;
      }

      const nameInput  = document.getElementById('inputName');
      const gradeInput = document.getElementById('inputGrade');
      const classInput = document.getElementById('inputClass');
      const name  = nameInput  ? nameInput.value.trim()  : '';
      const grade = gradeInput ? gradeInput.value.trim() : '';
      const cls   = classInput ? classInput.value.trim()  : '';

      // Require at least one field to be non-empty
      if (!name && !grade && !cls) {
        alert('Vui lÃ²ng nháº­p Ã­t nháº¥t má»™t trÆ°á»ng Ä‘á»ƒ cáº­p nháº­t');
        return;
      }
      // Validate grade if provided
      if (grade && !/^[345]$/.test(grade)) {
        alert('Khá»‘i chá»‰ nháº­n 3/4/5');
        return;
      }

      // Build payload only with fields provided
      const payload = { token: auth.token };
      if (name)  payload.name  = name;
      if (grade) payload.grade = grade;
      if (cls)   payload['class'] = cls;

      let r;
      try {
        r = await apiPost('update_profile', payload);
      } catch (err) {
        alert('KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau.');
        return;
      }
      if (!r || r.ok === false) {
        alert(r && r.error ? r.error : 'Lá»—i cáº­p nháº­t');
        return;
      }
      // Merge updated fields from response or fallback to the submitted fields
      const updated = Object.assign({}, auth, r.data || payload);
      setAuth(updated);
      renderLoggedInUI(updated);
      hydrateModalHeader(updated);
      // Display a success toast instead of a browser alert
      showSuccessToast('ÄÃ£ cáº­p nháº­t thÃ´ng tin!');
    });
  }

  // Upload avatar
  async function handleAvatarUpload() {
    const auth = getAuth() || {};
    if (!auth.token) {
      alert('Báº¡n chÆ°a Ä‘Äƒng nháº­p');
      return;
    }
    const fileInput = document.getElementById('avatarFile');
    const f = fileInput && fileInput.files && fileInput.files[0];
    if (!f) {
      alert('Chá»n áº£nh trÆ°á»›c Ä‘Ã£');
      return;
    }
    if (f.size > 400000) {
      alert('áº¢nh lá»›n > 400KB, vui lÃ²ng nÃ©n nhá» hÆ¡n');
      return;
    }
    // Use a blob URL for instant preview. This avoids potential
    // FileReader or CORS issues when reading large files from
    // file:// origins.
    const blobUrl = URL.createObjectURL(f);
    const previewEl = document.getElementById('avatarPreview');
    const modalAvtEl = document.getElementById('modal-avatar');
    const accAvtEl = document.getElementById('acc-avatar');
    if (previewEl) previewEl.src = blobUrl;
    if (modalAvtEl) modalAvtEl.src = blobUrl;
    if (accAvtEl) accAvtEl.src = blobUrl;
    // Persist temporary local avatar via blob URL. We store this
    // under avatar_url so the UI uses it on page reload. Note: this
    // blob URL is only valid in the current session. If you reload
    // the page, the avatar will fall back to the server URL once
    // uploaded successfully.
    setAuth(Object.assign({}, auth, { avatar_url: blobUrl }));
    renderLoggedInUI(getAuth());
    hydrateModalHeader(getAuth());
    // Convert to base64 for server upload. We wrap this in try/catch
    // so that a failure to read the file doesn't prevent local
    // preview. If conversion fails, we simply abort the upload and
    // leave the preview as-is.
    let dataUrl;
    try {
      dataUrl = await fileToDataURL(f);
    } catch (err) {
      console.warn('Failed to convert file to DataURL', err);
      alert('KhÃ´ng thá»ƒ Ä‘á»c tá»‡p áº£nh. Vui lÃ²ng thá»­ áº£nh khÃ¡c.');
      return;
    }
    // Attempt to upload to the server. If the request fails (for
    // example due to CORS or missing script properties), we leave
    // the local preview unchanged and show an error. A successful
    // upload returns avatar URLs; we use those to update local
    // storage and reload the UI accordingly.
    let r;
    try {
      r = await apiPost('upload_avatar', { token: auth.token, data_url: dataUrl, file_name: f.name });
    } catch (err) {
      alert('KhÃ´ng thá»ƒ káº¿t ná»‘i Ä‘áº¿n mÃ¡y chá»§. Vui lÃ²ng thá»­ láº¡i sau.');
      return;
    }
    if (!r || r.ok === false) {
      alert(r && r.error ? r.error : 'Upload lá»—i');
      return;
    }
    // Use returned URL for persistent avatar. Prefer proxy (with
    // cache-busting) then normal URL. If none are provided, we keep
    // using the blob URL from above. Note: Apps Script may omit
    // avatar_proxy_url fields if the script properties are missing.
    const url = r.avatar_proxy_url_busted || r.avatar_proxy_url || r.avatar_url_busted || r.avatar_url || blobUrl;
    if (previewEl) previewEl.src = url;
    if (modalAvtEl) modalAvtEl.src = url;
    if (accAvtEl) accAvtEl.src = url;
    // Persist the new avatar URLs and update UI. We store both the
    // proxy and normal URLs when provided so subsequent sessions
    // prefer the server-hosted image instead of the local blob URL.
    const updatedAuth = Object.assign({}, getAuth());
    if (r.avatar_proxy_url_busted) {
      updatedAuth.avatar_proxy_url = r.avatar_proxy_url_busted;
    } else if (r.avatar_proxy_url) {
      updatedAuth.avatar_proxy_url = r.avatar_proxy_url;
    }
    if (r.avatar_url_busted) {
      updatedAuth.avatar_url = r.avatar_url_busted;
    } else if (r.avatar_url) {
      updatedAuth.avatar_url = r.avatar_url;
    } else {
      // Fallback: use blobUrl so UI persists across reloads until
      // another successful upload occurs.
      updatedAuth.avatar_url = blobUrl;
    }
    setAuth(updatedAuth);
    renderLoggedInUI(getAuth());
    hydrateModalHeader(getAuth());
    showSuccessToast('ÄÃ£ cáº­p nháº­t avatar!');
  }
  // Attach click handler to the upload button. We use the named
  // function so it can be reused for the file input change event as
  // well. If there are multiple elements with id btnUploadAvatar
  // because of legacy modals, we attach to all of them.
  document.querySelectorAll('#btnUploadAvatar').forEach(btn => {
    btn.addEventListener('click', handleAvatarUpload);
  });
  // Also trigger upload automatically when the user selects a file.
  const fileEl = document.getElementById('avatarFile');
  if (fileEl) {
    fileEl.addEventListener('change', () => {
      // Only auto-upload if a file is selected. This also
      // immediately previews the image.
      handleAvatarUpload();
    });
  }
});

// Helpers
function hydrateModalHeader(auth){
  if(!auth) return;
  const name = auth.name || 'Há»c sinh';
  const grade = auth.grade ? `Khá»‘i ${auth.grade}` : 'Khá»‘i';
  const cls   = auth.class ? `Lá»›p ${auth.class}` : 'Lá»›p';
  if(document.getElementById('modal-name')) document.getElementById('modal-name').textContent = name;
  if(document.getElementById('modal-grade-class')) document.getElementById('modal-grade-class').textContent = `${grade} â€¢ ${cls}`;
  // Prefer proxy avatar URLs with cache-busting for modal and preview
  // Prefer custom avatar saved locally, then fall back to proxy or URL
  const avt = auth.avatar_custom || auth.avatar_proxy_url_busted || auth.avatar_proxy_url || auth.avatar_url_busted || auth.avatar_url || 'data/images/logo-bear-64.png';
  if(document.getElementById('modal-avatar'))  document.getElementById('modal-avatar').src  = avt;
  if(document.getElementById('avatarPreview')) document.getElementById('avatarPreview').src = avt;

  // Populate input fields for editing profile
  const inputNameEl = document.getElementById('inputName');
  const inputGradeEl = document.getElementById('inputGrade');
  const inputClassEl = document.getElementById('inputClass');
  if(inputNameEl)  inputNameEl.value  = auth.name  || '';
  if(inputGradeEl) inputGradeEl.value = auth.grade || '';
  if(inputClassEl) inputClassEl.value = auth.class || '';
}

// Show a temporary toast notification with a green check and message
function showSuccessToast(message) {
  const toast = document.getElementById('success-toast');
  const msgEl = document.getElementById('success-toast-msg');
  if (!toast || !msgEl) return;
  msgEl.textContent = message || '';
  toast.classList.remove('hidden');
  // Hide after 2 seconds
  setTimeout(() => {
    toast.classList.add('hidden');
  }, 2000);
}

function fileToDataURL(file){
  return new Promise((res, rej) => {
    const fr = new FileReader();
    fr.onload = () => res(fr.result);
    fr.onerror = rej;
    fr.readAsDataURL(file);
  });
}

// ================= Avatar selection (built-in icons) ==================
// Predefined list of emojis for students to choose. Each emoji will be
// rendered into a canvas when saving so it can be uploaded to the server as
// a PNG. Feel free to expand or modify this list for more variety.
const ICON_EMOJIS = [
  'ğŸ»','ğŸ±','ğŸ¶','â­','â¤ï¸','ğŸŒ','ğŸ“š','âœï¸','ğŸš€','ğŸˆ',
  'ğŸ§¸','ğŸ¼','ğŸ¦Š','ğŸ¦','ğŸ°','ğŸ€','ğŸŒˆ','ğŸ€','ğŸ§','ğŸµ'
];

// Convert an image at a given src into a DataURL by drawing it to a canvas.
// This is used when saving the selected avatar to the server. If the image
// fails to load (which shouldn't happen for local file paths), the promise
// will reject.
function dataURLFromImageSrc(src) {
  return new Promise((resolve, reject) => {
    const img = new Image();
    // Setting crossOrigin is not strictly necessary for file:// origins but
    // included for completeness in case the icons are served from http.
    img.crossOrigin = 'anonymous';
    img.onload = function() {
      const canvas = document.createElement('canvas');
      canvas.width  = img.naturalWidth  || img.width;
      canvas.height = img.naturalHeight || img.height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(img, 0, 0);
      resolve(canvas.toDataURL('image/png'));
    };
    img.onerror = reject;
    img.src = src;
  });
}

document.addEventListener('DOMContentLoaded', () => {
  // Populate built-in avatar icons into the grid.
  const grid = document.getElementById('avatar-icon-grid');
  const previewEl = document.getElementById('avatarPreview');
  // Track the currently selected avatar. If an emoji is selected, we store
  // its character and a generated DataURL separately. If a file-based
  // avatar is used (legacy support), selectedIconPath will be non-null.
  let selectedIconPath = null;
  let selectedEmoji = null;
  let selectedEmojiDataUrl = null;
  if (grid) {
    ICON_EMOJIS.forEach((emoji, index) => {
      // Create a container for each emoji so we can style it like an avatar
      const div = document.createElement('div');
      div.classList.add('w-12','h-12','rounded-full','cursor-pointer','border-2','border-transparent','flex','items-center','justify-center','text-2xl','select-none','hover:border-blue-400');
      div.dataset.emoji = emoji;
      div.textContent = emoji;
      div.addEventListener('click', () => {
        // Highlight the selected emoji
        document.querySelectorAll('#avatar-icon-grid div').forEach(el => {
          el.classList.remove('border-blue-500');
        });
        div.classList.add('border-blue-500');
        selectedIconPath = null;
        selectedEmoji = emoji;
        // Generate a preview on the fly by drawing the emoji to a canvas
        const canvas = document.createElement('canvas');
        canvas.width = 128;
        canvas.height = 128;
        const ctx = canvas.getContext('2d');
        ctx.font = '96px sans-serif';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.clearRect(0,0,128,128);
        ctx.fillText(emoji, 64, 64);
        const dataUrl = canvas.toDataURL('image/png');
        if (previewEl) previewEl.src = dataUrl;
        const modalAvtEl = document.getElementById('modal-avatar');
        const accAvtEl   = document.getElementById('acc-avatar');
        if (modalAvtEl) modalAvtEl.src = dataUrl;
        if (accAvtEl)   accAvtEl.src   = dataUrl;
        // Store the temporary preview DataURL in a variable for later upload
        selectedEmojiDataUrl = dataUrl;
      });
      grid.appendChild(div);
    });
  }
  // Attach handler to the save avatar button.
  const saveBtn = document.getElementById('btnSaveAvatar');
  if (saveBtn) {
    saveBtn.addEventListener('click', async () => {
      const auth = getAuth() || {};
      if (!auth.token) {
        alert('Báº¡n chÆ°a Ä‘Äƒng nháº­p');
        return;
      }
      // Require a selection: either an emoji (with DataURL) or a legacy file path
      if (!selectedEmojiDataUrl && !selectedIconPath) {
        alert('Vui lÃ²ng chá»n má»™t áº£nh Ä‘áº¡i diá»‡n');
        return;
      }
      // Determine the DataURL and a filename for the avatar. If the user
      // selected an emoji, we use the pre-generated DataURL. If a file-based
      // avatar is selected (for backward compatibility), we read it from disk.
      let dataUrl;
      let fileName;
      if (selectedEmojiDataUrl) {
        dataUrl = selectedEmojiDataUrl;
        fileName = `${selectedEmoji || 'avatar'}.png`;
      } else if (selectedIconPath) {
        try {
          dataUrl = await dataURLFromImageSrc(selectedIconPath);
        } catch (err) {
          alert('KhÃ´ng thá»ƒ Ä‘á»c áº£nh. Vui lÃ²ng thá»­ láº¡i.');
          return;
        }
        fileName = selectedIconPath.split('/').pop();
      } else {
        alert('Vui lÃ²ng chá»n má»™t áº£nh Ä‘áº¡i diá»‡n');
        return;
      }
      // Use the DataURL or path depending on selection. Persist this
      // locally under a custom avatar field so it remains across reloads.
      const url = selectedEmojiDataUrl || selectedIconPath;
      if (previewEl) previewEl.src = url;
      const modalAvtEl = document.getElementById('modal-avatar');
      const accAvtEl   = document.getElementById('acc-avatar');
      if (modalAvtEl) modalAvtEl.src = url;
      if (accAvtEl)   accAvtEl.src   = url;
      const updatedAuth = Object.assign({}, getAuth());
      // Save the custom avatar so it is preferred over any server-provided avatar
      updatedAuth.avatar_custom = url;
      updatedAuth.avatar_url = url;
      // Remove any previous proxy URLs to avoid overriding the custom avatar
      delete updatedAuth.avatar_proxy_url;
      delete updatedAuth.avatar_proxy_url_busted;
      delete updatedAuth.avatar_url_busted;
      setAuth(updatedAuth);
      // Cache the custom avatar per gov_id so it persists across reloads and logins
      try {
        const a = getAuth() || {};
        if (a.gov_id && a.avatar_custom) {
          localStorage.setItem('gau_avatar_custom_' + a.gov_id, a.avatar_custom);
        }
      } catch (e) {
        // Ignore localStorage errors silently
      }
      renderLoggedInUI(getAuth());
      hydrateModalHeader(getAuth());
      showSuccessToast('ÄÃ£ cáº­p nháº­t avatar!');
    });
  }
});
</script>

<script>
(function () {
  if (!('attachShadow' in Element.prototype)) return;
  const _attachShadow = Element.prototype.attachShadow;
  Element.prototype.attachShadow = function(init) {
    try { return _attachShadow.call(this, init); }
    catch (e) {
      console.warn('attachShadow failed; fallback to light DOM for:', this, e);
      if (!this.shadowRoot) {
        try { Object.defineProperty(this, 'shadowRoot', { value: this, configurable: true }); } catch(_){}
      }
      return this;
    }
  };
})();

(function () {
  const SELECTORS = [
    '.answer', '.option', '.choice', '.answer-option', '.dap-an', '.lua-chon',
    '.btn-answer', 'button[data-answer]', 'li[data-answer]', 'div[data-answer]'
  ].join(',');

  function rememberText(el) {
    if (!el) return;
    const t = (el.textContent || '').trim();
    if (!el.dataset) return;
    if (!el.dataset.original) el.dataset.original = t;
  }

  function restoreIfLost(el) {
    if (!el) return;
    const txt = (el.textContent || '').trim();
    if (!txt && el.dataset && el.dataset.original) {
      el.textContent = el.dataset.original;
    }
  }

  function markSelected(el) {
    if (!el) return;
    el.classList.add('selected-answer');
    restoreIfLost(el);
  }

  function initOnce(root) {
    root.querySelectorAll(SELECTORS).forEach(rememberText);
    root.addEventListener('click', function (ev) {
      const el = ev.target.closest(SELECTORS);
      if (!el) return;
      setTimeout(function () { markSelected(el); }, 0);
    }, true);

    const mo = new MutationObserver((muts) => {
      muts.forEach(m => {
        if (m.type === 'childList') {
          m.addedNodes.forEach(node => {
            if (node.nodeType === 1) {
              if (node.matches && node.matches(SELECTORS)) rememberText(node);
              node.querySelectorAll && node.querySelectorAll(SELECTORS).forEach(rememberText);
            }
          });
        } else if (m.type === 'characterData') {
          const el = m.target && m.target.parentElement;
          if (el && el.matches && el.matches(SELECTORS)) restoreIfLost(el);
        }
      });
    });
    mo.observe(root, { subtree: true, childList: true, characterData: true });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => initOnce(document));
  } else {
    initOnce(document);
  }
})();
</script>
<style>
.selected-answer {
  background: #16a34a !important;
  color: #fff !important;
  border-color: #16a34a !important;
}
.selected-answer, .selected-answer * {
  text-decoration: none !important;
  opacity: 1 !important;
  visibility: visible !important;
}
</style>
    <!-- HATBOT SMARTBEAR START -->
    <!-- CHANGELOG: 2025-11-04 â€“ Thay module TrÃ² chÆ¡i mini cÅ© báº±ng cÆ¡ cháº¿ má»›i â€œHÃ nh TrÃ¬nh Gáº¥u ThÃ´ng ThÃ¡iâ€. ThÃªm HUD, timer, lane má»›i, nhÃ¢n váº­t Gáº¥u cháº¡y/náº£y, combo, booster, boss vÃ  tÃ­nh Ä‘iá»ƒm tÆ°Æ¡ng thÃ­ch API v3.0. -->
    <style id="hatbot-smartbear-style">
    /* Namespace hatbot-* Ä‘á»ƒ trÃ¡nh xung Ä‘á»™t vá»›i CSS hiá»‡n cÃ³ */
    #hatbot-progress-lane{position:relative;height:80px;margin:12px 0;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.06);overflow:hidden;padding:12px}
    #hatbot-track{position:absolute;left:12px;right:12px;top:34px;height:10px;border-radius:999px;background:linear-gradient(90deg,rgba(0,200,255,.35),rgba(255,255,255,.12))}
    .hatbot-tick{position:absolute;top:28px;width:2px;height:22px;background:rgba(255,255,255,.15)}
    .hatbot-chest{position:absolute;top:6px;transform:translateX(-50%);font-size:14px;filter:drop-shadow(0 0 6px rgba(255,200,0,.5))}
.hatbot-player{position:absolute;left:12px;top:4px;width:60px;height:60px;border-radius:50%;background:none;display:grid;place-items:center;border:2px solid rgba(0,0,0,.2);filter:drop-shadow(0 8px 12px rgba(0,0,0,.35));font-size:40px;line-height:1;color:#71491e}
    .hatbot-player.glow{filter:drop-shadow(0 0 12px rgba(0,200,255,.95)) drop-shadow(0 8px 12px rgba(0,0,0,.35))}
    @keyframes hatbot-shake{10%,90%{transform:translateX(-1px)}20%,80%{transform:translateX(2px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
    .hatbot-shake{animation:hatbot-shake .4s}
    .hatbot-float{position:fixed;left:50%;top:24%;transform:translateX(-50%);font-weight:800;opacity:0;transition:opacity .15s ease,transform .5s ease;z-index:10000}
    .hatbot-float.show{opacity:1;transform:translate(-50%,-16px)}
    #hatbot-end-modal{position:fixed;inset:0;display:none;place-items:center;z-index:9999;background:rgba(0,0,0,.35)}
    #hatbot-end-modal.show{display:grid}
    #hatbot-end-modal .box{width:min(92vw,480px);border-radius:20px;padding:20px;background:#fff;color:#111;box-shadow:0 20px 60px rgba(0,0,0,.2);text-align:center}
    #hatbot-end-modal.win .box{animation:hatbot-pop .4s cubic-bezier(.2,1,.2,1)}
    #hatbot-end-modal.lose .box{animation:hatbot-shake .5s ease-in-out}
    @keyframes hatbot-pop{0%{transform:scale(.9);opacity:0}100%{transform:scale(1);opacity:1}}

    /* Styles for scoreboard pills, answer options and boosters */
    .hatbot-hud .pill,
    #hb-opts .pill,
    #hb-boost .pill {
      display: inline-block;
      padding: 6px 10px;
      border-radius: 9999px;
      border: 1px solid rgba(0,0,0,0.15);
      font-size: 0.875rem;
      line-height: 1.2;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }
    /* HUD pills (score, hearts, combo, time) */
    .hatbot-hud .pill {
      background: rgba(0,0,0,0.05);
      color: #111;
      font-weight: 600;
    }
    /* Answer option buttons */
    #hb-opts .pill {
      width: 100%;
      background: #ffffff;
      color: #111;
      border: 2px solid rgba(0,0,0,0.1);
    }
    #hb-opts .pill:hover:not(:disabled) {
      background: #f3f4f6;
    }
    #hb-opts .pill:disabled {
      opacity: 0.5;
      cursor: default;
    }
    /* Booster buttons */
    #hb-boost .pill {
      background: rgba(255,255,255,0.8);
      color: #111;
      border: 1px solid rgba(0,0,0,0.1);
    }
    </style>
    <script id="hatbot-smartbear-game">
    (function(){'use strict';
    if (window.__HATBOT_SMARTBEAR__) return; window.__HATBOT_SMARTBEAR__=true;
    // ===== Locate game root =====
    function findGameRoot(){
      // Prioritize the dedicated game stage container if it exists.  In the original layout
      // the playable area lives inside #game-play > #game-stage.  Avoid using #race-wrap
      // since it is hidden by default and is specific to the old flash game.
      return document.getElementById('game-stage')
          || document.getElementById('game-area')
          || document.querySelector('#page-game .card-body')
          || document.querySelector('#page-game')
          || document.body;
    }
    // ===== Mount new UI =====
    function mountUI(root){
      root.innerHTML = `
        <div class="hatbot-hud" style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:8px">
          <div class="pill">Äiá»ƒm: <b id="hb-score">0</b></div>
          <div class="pill">Tim: <span id="hb-hearts">â¤ï¸â¤ï¸â¤ï¸</span></div>
          <div class="pill">Combo: <b id="hb-combo">x1</b></div>
          <div class="pill">Thá»i gian: <b id="hb-time">90s</b></div>
        </div>
        <div id="hatbot-progress-lane">
          <div id="hatbot-track"></div>
          <div id="hatbot-player" class="hatbot-player">ğŸ»</div>
        </div>
        <div class="timerbar" style="height:10px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;margin-bottom:8px">
          <div id="hb-timebar" style="height:100%;width:100%;background:linear-gradient(90deg,#22c55e,#22d3ee)"></div>
        </div>
        <h4 id="hb-q" style="margin:8px 0 6px">CÃ¢u há»i</h4>
        <div id="hb-opts" style="display:grid;grid-template-columns:1fr 1fr;gap:10px"></div>
        <div id="hb-boost" style="display:flex;gap:10px;margin-top:8px"></div>
        <div id="hatbot-end-modal"><div class="box"><div class="ttl"></div><div class="msg" style="margin:6px 0 10px"></div><button class="btn">ÄÃ³ng</button></div></div>
        <div id="hb-float" class="hatbot-float"></div>
      `;
    }
    // ===== Constants =====
    const START_TIME = 90;
    const TOTAL_QS   = 10;
    const MILESTONES = [3,6,9];
    // ===== State =====
    const state = { qIndex:0, hearts:3, combo:0, position:0, stepBase:1/TOTAL_QS, score:0, timeLeft:START_TIME, boosters:{fifty:false, freeze:false, x2:false}, boss:false, correctCount:0 };
    // ===== Helpers =====
    const $ = (sel,root) => (root||document).querySelector(sel);
    function renderLane(lane){
      const w = lane.clientWidth - 24;
      lane.querySelectorAll('.hatbot-tick,.hatbot-chest').forEach(n=>n.remove());
      for(let i=1;i<TOTAL_QS;i++){
        const x = 12 + (i/TOTAL_QS)*w;
        const t = document.createElement('div'); t.className='hatbot-tick'; t.style.left = x+'px'; lane.appendChild(t);
      }
      MILESTONES.forEach(m=>{
        if(m > TOTAL_QS) return;
        const x = 12 + (m/TOTAL_QS)*w;
        const c = document.createElement('div'); c.className='hatbot-chest'; c.style.left = x+'px'; c.textContent='ğŸ§°'; lane.appendChild(c);
      });
    }
    function updateHUD(ui){
      ui.hearts.textContent = 'â¤ï¸'.repeat(state.hearts);
      const comboMul = state.combo>=5?1.5: state.combo>=3?1.25:1;
      ui.combo.textContent = 'x'+comboMul;
      ui.time.textContent = Math.max(0,Math.ceil(state.timeLeft))+'s';
      ui.timebar.style.width = Math.max(0,(state.timeLeft/START_TIME)*100)+'%';
      ui.score.textContent = Math.round(state.score);
    }
    function showFloat(text,color='#a7f3d0'){
      const e = $('#hb-float'); e.textContent = text; e.style.color = color; e.classList.add('show'); setTimeout(()=>e.classList.remove('show'),600);
    }
    function animateDash(prevPos, nowPos, lane, player){
      const w = lane.clientWidth - 24;
      const fromX = 12 + prevPos * w;
      const toX   = 12 + nowPos  * w;
      const midX  = fromX + (toX - fromX)/2;
      player.classList.add('glow');
      player.animate([
        // begin at current horizontal position
        { transform:`translate(${fromX}px, 0px)` },
        // lift slightly upwards at the midpoint for a jumping arc
        { transform:`translate(${midX}px, -24px)` },
        // land back on the baseline at destination
        { transform:`translate(${toX}px, 0px)` }
      ], { duration:650, easing:'ease-out', fill:'forwards' }).onfinish = () => player.classList.remove('glow');
    }
    function animateShake(player){ player.classList.add('hatbot-shake'); setTimeout(()=>player.classList.remove('hatbot-shake'),400); }
    function grantBooster(ui){
      const order = ['fifty','freeze','x2'];
      for(const k of order){
        if(!state.boosters[k]){
          state.boosters[k] = true;
          const btn = document.createElement('button'); btn.className='pill'; btn.textContent = k==='fifty' ? 'ğŸ² 50/50' : k==='freeze' ? 'â„ï¸ +10s' : 'âœ¨ x2 Ä‘iá»ƒm';
          btn.onclick = () => {
            if(k==='fifty'){
              const opts = [...ui.opts.children];
              const wrong = opts.filter(el=>el.dataset.correct!=='1').sort(()=>Math.random()-.5).slice(0, Math.max(0, opts.length-2));
              wrong.forEach(el=> el.disabled = true);
            }
            if(k==='freeze') state.timeLeft += 10;
            if(k==='x2'){ state.boosters.x2 = true; setTimeout(()=>{ state.boosters.x2 = false; }, 10000); }
            btn.disabled = true;
            showFloat(btn.textContent,'#fde68a'); updateHUD(ui);
          };
          ui.boost.appendChild(btn);
          break;
        }
      }
    }
    function buildBoss(){ return { q:'Chá»n mÃ´ táº£ ÄÃšNG NHáº¤T vá» JSON:', opts:['NgÃ´n ngá»¯ láº­p trÃ¬nh','Äá»‹nh dáº¡ng dá»¯ liá»‡u dáº¡ng vÄƒn báº£n','Kiá»ƒu áº£nh nÃ©n','Thiáº¿t bá»‹ vÃ o/ra'], a:1, diff:1.5 }; }
    const QUESTION_BANK = [
      { q:'ÄÃ¢u lÃ  thiáº¿t bá»‹ nháº­p dá»¯ liá»‡u?', opts:['Chuá»™t','MÃ n hÃ¬nh','MÃ¡y in','Loa'], a:0, diff:1 },
      { q:'CPU lÃ  viáº¿t táº¯t cá»§a cá»¥m tá»« nÃ o?', opts:['Central Processing Unit','Computer Personal Unit','Central Print Unit','Control Program Unit'], a:0, diff:1.3 },
      { q:'Thiáº¿t bá»‹ nÃ o dÃ¹ng Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u lÃ¢u dÃ i?', opts:['RAM','á»” cá»©ng','Cache','MÃ n hÃ¬nh'], a:1, diff:1.1 },
      { q:'Bit lÃ  gÃ¬ trong tin há»c?', opts:['ÄÆ¡n vá»‹ nhá» nháº¥t cá»§a dá»¯ liá»‡u','Pháº§n má»m','Thiáº¿t bá»‹','NgÃ´n ngá»¯ láº­p trÃ¬nh'], a:0, diff:1 },
      { q:'Há»‡ Ä‘iá»u hÃ nh phá»• biáº¿n trÃªn mÃ¡y tÃ­nh cÃ¡ nhÃ¢n?', opts:['Windows','Photoshop','Chrome','PowerPoint'], a:0, diff:1 },
      { q:'Thiáº¿t bá»‹ nÃ o dÃ¹ng Ä‘á»ƒ káº¿t ná»‘i Internet?', opts:['Modem','MÃ¡y in','Scanner','Webcam'], a:0, diff:1 },
      { q:'Tá»• há»£p phÃ­m Ctrl + C thÆ°á»ng dÃ¹ng Ä‘á»ƒ lÃ m gÃ¬?', opts:['Sao chÃ©p','LÆ°u','DÃ¡n','Cáº¯t'], a:0, diff:1 },
      { q:'Pháº§n má»m soáº¡n tháº£o vÄƒn báº£n phá»• biáº¿n lÃ ?', opts:['Microsoft Word','Excel','PowerPoint','Chrome'], a:0, diff:1 },
      { q:'HTML Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ?', opts:['Táº¡o trang web','Viáº¿t chÆ°Æ¡ng trÃ¬nh','Thiáº¿t káº¿ slide','TÃ­nh toÃ¡n'], a:0, diff:1.2 },
      { q:'MÃ¡y tÃ­nh xá»­ lÃ½ thÃ´ng tin báº±ng gÃ¬?', opts:['CÃ¢u lá»‡nh','BÃ n phÃ­m','Chuá»™t','MÃ n hÃ¬nh'], a:0, diff:1 }
    ];
    function renderQuestion(ui,lane,player){
      const isBoss = state.boss;
      let item = isBoss ? buildBoss() : QUESTION_BANK[state.qIndex % QUESTION_BANK.length];
      const prefix = isBoss ? 'ğŸ›¡ï¸ BOSS: ' : 'CÃ¢u '+(state.qIndex+1)+'/'+TOTAL_QS+': ';
      ui.q.textContent = prefix + item.q;
      ui.opts.innerHTML = '';
      item.opts.forEach((t,i) => {
        const b = document.createElement('button'); b.className='pill'; b.style.textAlign='left'; b.textContent=t; b.dataset.correct = (i===item.a ? '1' : '0'); b.onclick = () => onAnswer({ correct: i===item.a, diffMul: item.diff || 1 }, ui, lane, player); ui.opts.appendChild(b);
      });
    }
    function onAnswer(result, ui, lane, player){
      [...ui.opts.children].forEach(b=> b.disabled = true);
      const prevPos = state.position;
      if(result.correct){
        state.combo++;
        const comboMul = state.combo>=5?1.5: state.combo>=3?1.25:1;
        let step = state.stepBase * comboMul;
        if(state.boss) step *= 1.2;
        state.position = Math.min(1, state.position + step);
        const pts = 10 * (result.diffMul||1) * comboMul * (state.boosters.x2 ? 2 : 1);
        state.score += pts;
        state.correctCount++;
        animateDash(prevPos, state.position, lane, player);
        showFloat('+'+Math.round(pts),'#86efac');
      } else {
        state.combo = 0; state.hearts--; animateShake(player); showFloat('âˆ’1 â¤ï¸','#fecaca'); if(state.hearts <=0){ updateHUD(ui); return endGame('out_of_hearts', ui); }
      }
      const passedIdx = Math.floor(state.position * TOTAL_QS);
      if(!state.boss && MILESTONES.includes(passedIdx)) grantBooster(ui);
      updateHUD(ui);
      if(state.position >=1 && !state.boss){ state.qIndex = TOTAL_QS-1; state.boss=true; renderQuestion(ui,lane,player); return; }
      state.qIndex++;
      if(state.boss){ if(result.correct && state.position >=1){ return endGame('finish',ui); } renderQuestion(ui,lane,player); return; }
      if(state.qIndex >= TOTAL_QS){ state.boss=true; renderQuestion(ui,lane,player); return; }
      renderQuestion(ui,lane,player);
    }
    function calcStars(){ const total = TOTAL_QS + 1; const acc = state.correctCount / total; const timePct = state.timeLeft/START_TIME; if(acc>=0.9 && timePct>=0.3) return 3; if(acc>=0.7) return 2; return state.position>=1 ? 1 : 0; }
    async function endGame(reason, ui){ clearInterval(window.__hatbot_timer__); [...ui.opts.children].forEach(b=> b.disabled=true); const bonus = Math.ceil(state.timeLeft/5); const finalScore = Math.round(state.score + bonus); const stars = calcStars(); try{ if(typeof window.saveResultV3 === 'function'){ await window.saveResultV3({ mode:'GauThongThai', score:finalScore, stars, correct:state.correctCount, total:TOTAL_QS+1, timeLeft:Math.max(0,Math.ceil(state.timeLeft)), reason }); } else if(window.GAS_ENDPOINT){ await fetch(window.GAS_ENDPOINT,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ action:'save_result', payload:{ mode:'GauThongThai', score:finalScore, stars, correct:state.correctCount, total:TOTAL_QS+1, timeLeft:Math.max(0,Math.ceil(state.timeLeft)), reason }}) }); } }catch(_){}
      const m = document.getElementById('hatbot-end-modal'); m.className = reason==='finish'? 'show win':'show lose'; m.querySelector('.ttl').textContent = reason==='finish' ? 'HoÃ n thÃ nh ğŸ‰' : 'Thá»­ láº¡i nhÃ© ğŸ˜¿'; m.querySelector('.msg').textContent = `Äiá»ƒm ${finalScore} â€¢ â­ ${'â˜…'.repeat(stars)}${'â˜†'.repeat(3-stars)}`; m.querySelector('.btn').onclick = () => { m.className=''; location.reload(); };
    }
    function startTimer(ui){ clearInterval(window.__hatbot_timer__); let last = performance.now(); window.__hatbot_timer__ = setInterval(()=>{ const now = performance.now(); const dt = (now - last)/1000; last = now; state.timeLeft -= dt; if(state.timeLeft <=0){ state.timeLeft = 0; updateHUD(ui); endGame('timeout', ui); } else { updateHUD(ui); } },200);
    }
    function init(){
      const root = findGameRoot();
      if(!root) return;
      // Mount our UI into the game stage
      mountUI(root);
      const ui = {
        lane: document.getElementById('hatbot-progress-lane'),
        player: document.getElementById('hatbot-player'),
        q: document.getElementById('hb-q'),
        opts: document.getElementById('hb-opts'),
        boost: document.getElementById('hb-boost'),
        hearts: document.getElementById('hb-hearts'),
        combo: document.getElementById('hb-combo'),
        time: document.getElementById('hb-time'),
        timebar: document.getElementById('hb-timebar'),
        score: document.getElementById('hb-score')
      };
      // Reset game state variables
      state.qIndex = 0;
      state.hearts = 3;
      state.combo  = 0;
      state.position = 0;
      state.score = 0;
      state.timeLeft = START_TIME;
      state.boosters = {fifty:false, freeze:false, x2:false};
      state.boss = false;
      state.correctCount = 0;
      // Render lane and HUD, start timer and first question
      renderLane(ui.lane);
      updateHUD(ui);
      startTimer(ui);
      renderQuestion(ui, ui.lane, ui.player);
      window.addEventListener('resize', () => renderLane(ui.lane));
      // Hide old UI elements that belong to the legacy miniâ€‘game so they don't overlap
      const hideIds = ['game-question-text','game-feedback','game-next','race-wrap'];
      hideIds.forEach(id => {
        const el = document.getElementById(id);
        if(el) el.style.display = 'none';
      });
    }

    // Expose init globally so legacy code can invoke it instead of its own startGame logic
    try{
      window.hatbotSmartbearInit = init;
    }catch(_){ }
    // Monkey patch existing functions
    // Override resetGame (if defined) to start our new game instead of old one.
    if(typeof window.resetGame === 'function'){
      window.resetGame = function(){ init(); };
    }
    // Override generic startMiniGame if present to call our init
    if(typeof window.startMiniGame === 'function'){
      window.startMiniGame = function(){ init(); };
    }
    // Override startGame (used by mini games list) to hide old UI and launch our game
    if(typeof window.startGame === 'function'){
      window.startGame = function(g){
        try{
          // hide the list and show play area similar to original startGame
          const listEl = document.getElementById('game-list');
          const playEl = document.getElementById('game-play');
          if(listEl) listEl.classList.add('hidden');
          if(playEl) playEl.classList.remove('hidden');
          // hide legacy score/lives/time display if present
          const e1=document.getElementById('game-score');
          const e2=document.getElementById('game-lives');
          const e3=document.getElementById('game-timer');
          if(e1) e1.parentElement.style.display='none';
          if(e2) e2.parentElement.style.display='none';
          if(e3) e3.parentElement.style.display='none';
        }catch(_){}
        init();
      };
    }
    // Intercept showPage to start our game automatically when navigating to game page
    if(typeof window.showPage === 'function'){
      const origShow = window.showPage;
      window.showPage = function(page){
        const res = origShow.apply(this, arguments);
        if(page === 'page-game'){
          // hide legacy scoreboard elements
          const e1=document.getElementById('game-score');
          const e2=document.getElementById('game-lives');
          const e3=document.getElementById('game-timer');
          if(e1) e1.parentElement.style.display='none';
          if(e2) e2.parentElement.style.display='none';
          if(e3) e3.parentElement.style.display='none';
          init();
        }
        return res;
      };
    }
    document.addEventListener('DOMContentLoaded', () => {
      const currentPage = document.querySelector('#page-game');
      if (currentPage && currentPage.style.display !== 'none'){
        init();
      }
      // Additionally, monitor interactions on the page to automatically load our game when the game root appears.
      function autoStart(){
        const root = findGameRoot();
        // If a root exists and our progress lane hasn't been mounted yet
        if(root && !document.getElementById('hatbot-progress-lane')){
          // Hide the list and show the play area (if defined in original layout)
          const listEl = document.getElementById('game-list');
          const playEl = document.getElementById('game-play');
          if(listEl) listEl.classList.add('hidden');
          if(playEl) playEl.classList.remove('hidden');
          // Hide legacy scoreboard elements
          const s1=document.getElementById('game-score');
          const s2=document.getElementById('game-lives');
          const s3=document.getElementById('game-timer');
          if(s1) s1.parentElement.style.display='none';
          if(s2) s2.parentElement.style.display='none';
          if(s3) s3.parentElement.style.display='none';
          init();
        }
      }
      // Run once immediately
      setTimeout(autoStart, 100);
      // Also run after any click (user selecting a mini game)
      document.body.addEventListener('click', () => setTimeout(autoStart, 50), true);

      // Intercept clicks on the mini game list so that old handlers don't start the legacy games.
      const gameList = document.getElementById('game-list');
      if(gameList){
        gameList.addEventListener('click', function(ev){
          const btn = ev.target.closest('button');
          if(!btn) return;
          // Prevent the legacy click handler for this card from firing.  Using stopImmediatePropagation
          // ensures no other listener on this element will run.
          ev.stopImmediatePropagation();
          ev.preventDefault();
          // Hide the list and show game-play area
          const listEl = document.getElementById('game-list');
          const playEl = document.getElementById('game-play');
          if(listEl) listEl.classList.add('hidden');
          if(playEl) playEl.classList.remove('hidden');
          // Hide legacy score/lives/time boxes
          const s1=document.getElementById('game-score');
          const s2=document.getElementById('game-lives');
          const s3=document.getElementById('game-timer');
          if(s1) s1.parentElement.style.display='none';
          if(s2) s2.parentElement.style.display='none';
          if(s3) s3.parentElement.style.display='none';
          // Start our game
          init();
        }, true);
      }
    });
    })();
    </script>
    <!-- HATBOT SMARTBEAR END -->

    <!-- quizFix START -->
    <script>
    (function(){
      'use strict';
      // Define safe utilities for splitting strings and ensuring arrays
      const quizFix = {
        split: function(val, sep){
          return (val ?? '').toString().split(sep).map(function(s){ return s.trim(); }).filter(Boolean);
        },
        arr: function(val){ return Array.isArray(val) ? val : []; }
      };
      // expose globally
      window.quizFix = quizFix;

      // Helper to find the quiz answer area. Fallback to empty object when missing.
      function getAnswerArea(){
        return document.getElementById('quiz-answer-area') || { innerHTML:'' };
      }

      // ===== Monkey patches for Phiáº¿u bÃ i táº­p â€“ Khá»‘i 3 =====
      // Guard renderTrueFalse
      if(typeof window.renderTrueFalse === 'function'){
        const __origTrueFalse = window.renderTrueFalse;
        window.renderTrueFalse = function(q){
          try{
            // Ensure statements array exists with at least one item
            if(!Array.isArray(q.statements) || q.statements.length===0){
              const placeholder = (q && q.question) ? q.question : 'ÄÃºng hay Sai?';
              q.statements = [{ text: placeholder, correct: true }];
            }
          }catch(_e){}
          return __origTrueFalse.call(this, q);
        };
      }

      // Guard renderMultipleChoice
      if(typeof window.renderMultipleChoice === 'function'){
        const __origMultiple = window.renderMultipleChoice;
        window.renderMultipleChoice = function(q){
          try{
            // If options missing, try to derive from q.choices and mark correct ones using q.answer
            if(!Array.isArray(q.options) || q.options.length===0){
              const opts = quizFix.split(q.choices, '|');
              if(opts.length){
                const expected = quizFix.split(q.answer, '|');
                q.options = opts.map(function(text){ return { text: text, correct: expected.includes(text) }; });
              }
            }
            // When still no options, show friendly message and skip original renderer
            if(!Array.isArray(q.options) || q.options.length===0){
              const area = getAnswerArea();
              area.innerHTML = '<div class="text-gray-600 italic">ChÆ°a cÃ³ dá»¯ liá»‡u lá»±a chá»n cho cÃ¢u há»i nÃ y</div>';
              return;
            }
          }catch(_e){}
          return __origMultiple.call(this, q);
        };
      }

      // Guard renderFillInBlank
      if(typeof window.renderFillInBlank === 'function'){
        const __origFill = window.renderFillInBlank;
        window.renderFillInBlank = function(q){
          try{
            if(!q || !q.sentence || typeof q.sentence !== 'string'){ q = Object.assign({}, q, { sentence: '' }); }
          }catch(_e){}
          return __origFill.call(this, q);
        };
      }
      // Guard renderFillInBlankChoice
      if(typeof window.renderFillInBlankChoice === 'function'){
        const __origFillChoice = window.renderFillInBlankChoice;
        window.renderFillInBlankChoice = function(q){
          try{
            if(!q || !q.sentence || typeof q.sentence !== 'string'){ q = Object.assign({}, q, { sentence: '' }); }
            if(!Array.isArray(q.options) || q.options.length===0){
              const opts = quizFix.split(q.choices, '|');
              if(opts.length) q.options = opts;
            }
          }catch(_e){}
          return __origFillChoice.call(this, q);
        };
      }

      // Guard renderMatching (and variants)
      if(typeof window.renderMatching === 'function'){
        const __origMatching = window.renderMatching;
        window.renderMatching = function(q){
          try{
            // Build column arrays from various possible property names
            let colA = quizFix.arr(q.columnA || q.left || q.pairsA);
            let colB = quizFix.arr(q.columnB || q.right || q.pairsB);
            // If empty and pairsText provided, parse pairsText with lines separated by newline and ~ delimiter
            if((!colA.length || !colB.length) && q && q.pairsText){
              const lines = quizFix.split(q.pairsText, '\n');
              lines.forEach(function(line){
                const parts = quizFix.split(line, '~');
                if(parts.length >= 2){
                  colA.push(parts[0]);
                  colB.push(parts[1]);
                }
              });
            }
            // Assign back to q
            q.columnA = colA;
            q.columnB = colB;
            // When still missing items, show friendly note and skip original renderer
            if(!colA.length || !colB.length){
              const area = getAnswerArea();
              area.innerHTML = '<div class="text-gray-600 italic">ChÆ°a cÃ³ dá»¯ liá»‡u item cho bÃ i nÃ y</div>';
              return;
            }
          }catch(_e){}
          return __origMatching.call(this, q);
        };
      }

      // Provide isCorrect helper for unified answer checking
      if(typeof window.isCorrect !== 'function'){
        window.isCorrect = function(q, user){
          const ansStr = (q.answer ?? '').toString();
          if(q.type === 'matching'){ // expected user and ans as "A1-B2;A2-B1"
            const expected = quizFix.split(ansStr, ';');
            const got = quizFix.split(user ?? '', ';');
            return JSON.stringify([...got].sort()) === JSON.stringify([...expected].sort());
          }
          if(q.type === 'true_false'){
            return (user ?? '') === ansStr;
          }
          // Multiple choice supports multiple answers separated by |
          const expected = quizFix.split(ansStr, '|');
          const got = quizFix.split(user ?? '', '|');
          return expected.length ? expected.every(function(x){ return got.includes(x); }) && got.every(function(x){ return expected.includes(x); }) : false;
        };
      }
    })();
    </script>
    <!-- quizFix END -->
    <!-- About Modal START -->
    <div id="about-modal" class="about-modal fixed inset-0 z-50 items-center justify-center bg-black/50">
      <div class="modal-content">
        <button class="modal-close" data-close-about>&times;</button>
        <h2 class="text-2xl font-bold mb-4">Giá»›i thiá»‡u pháº§n má»m</h2>
        <!-- hiá»ƒn thá»‹ phiÃªn báº£n rÃµ rÃ ng cho ngÆ°á»i dÃ¹ng -->
        <p class="text-sm text-gray-500 mb-2">PhiÃªn báº£n: <b>v3.7.4</b></p>
        <p class="mb-4">Gáº¥u Con Há»c Tin lÃ  trá»£ lÃ½ há»c táº­p cho há»c sinh tiá»ƒu há»c vá»›i cÃ¡c module: Video há»c Ä‘á»ƒ xem bÃ i giáº£ng, Phiáº¿u bÃ i táº­p Ä‘á»ƒ luyá»‡n táº­p, Mini game Ã´n luyá»‡n kiáº¿n thá»©c, Báº£ng xáº¿p háº¡ng Ä‘á»ƒ so tÃ i, vÃ  Káº¿t quáº£ há»c táº­p chi tiáº¿t. Pháº§n má»m há»— trá»£ cÃ¡c khá»‘i 3â€“4â€“5 (phiÃªn báº£n v3.5.2).</p>
        <p class="mb-4">
          <strong>TÃ¡c giáº£:</strong> Nguyá»…n Thá»‹ BÃ¬nh<br/>
          <strong>Email:</strong> nguyenthibinh222430@gmail.com<br/>
          <strong>Äiá»‡n thoáº¡i:</strong> 0912633111<br/>
          <strong>ÄÆ¡n vá»‹:</strong> TrÆ°á»ng Tiá»ƒu há»c VÃµng La<br/>
          <strong>Äá»“ng tÃ¡c giáº£:</strong> Cao Thá»‹ Nguyá»‡t; Nguyá»…n Thá»‹ Minh Hiá»ƒn
        </p>
      </div>
    </div>
    <!-- About Modal END -->
    <!-- MODULES SCRIPT START -->
    <script>
    // JS to open and close the About modal
    document.addEventListener('DOMContentLoaded', function() {
      var aboutBtn = document.querySelector('[data-open-about]');
      var aboutModal = document.getElementById('about-modal');
      var closeBtn = aboutModal ? aboutModal.querySelector('[data-close-about]') : null;
      if (aboutBtn && aboutModal) {
        aboutBtn.addEventListener('click', function () {
          aboutModal.classList.add('show');
        });
      }
      if (closeBtn) {
        closeBtn.addEventListener('click', function () {
          aboutModal.classList.remove('show');
        });
      }
      // click outside to close
      if (aboutModal) {
        aboutModal.addEventListener('click', function(e) {
          if (e.target === aboutModal) {
            aboutModal.classList.remove('show');
          }
        });
      }
    });
    </script>
    <!-- MODULES SCRIPT END -->
<script>
/* ===== Client-side cache for Leaderboard (lb-cache) ===== */
(function(){
  const LB_CACHE_NS = 'lb-cache-v1';
  const TZ = 'Asia/Ho_Chi_Minh';

  function lbScopeToken(scope){
    const d = new Date();
    if(scope === 'daily'){
      const y = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, year: 'numeric'}).format(d);
      const m = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, month: '2-digit'}).format(d);
      const day = new Intl.DateTimeFormat('en-CA', { timeZone: TZ, day: '2-digit'}).format(d);
      return `${y}${m}${day}`;
    }
    if(scope === 'weekly'){
      const onejan = new Date(d.getFullYear(),0,1);
      const week = Math.ceil((((d-onejan)/86400000)+onejan.getDay()+1)/7);
      return `${d.getFullYear()}w${week}`;
    }
    return 'all';
  }
  function lbCacheKey(scope){ return `${LB_CACHE_NS}:${scope}:${lbScopeToken(scope)}`; }
  function readLbCache(scope){
    try{
      const raw = localStorage.getItem(lbCacheKey(scope));
      if(!raw) return null;
      const obj = JSON.parse(raw);
      return (obj && Array.isArray(obj.rows)) ? obj : null;
    }catch(_){ return null; }
  }
  function writeLbCache(scope, rows){
    try{ localStorage.setItem(lbCacheKey(scope), JSON.stringify({ rows, fetchedAt: Date.now() })); }catch(_){}
  }
  function cacheIsFresh(scope, maxAgeMs){ 
    const c = readLbCache(scope); 
    return !!(c && (Date.now() - (c.fetchedAt||0) < maxAgeMs));
  }

  // Find tbody/render util (non-destructive: only set innerHTML of rows area)
  function renderLeaderboardRows(rows){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = rows.map((r,i)=>`
      <tr>
        <td>${i+1}</td>
        <td>${r.name || r.username || 'â€”'}</td>
        <td>${r.class || r.grade || 'â€”'}</td>
        <td>${r.score ?? r.avg_score ?? 0}</td>
        <td>${(r.time_ms!=null && r.time_ms!=='' ? r.time_ms : (r.time_taken_ms??'â€”'))}</td>
      </tr>
    `).join('');
  }
  function renderSkeleton(count){
    const tbody = document.querySelector('#lb-tbody, .lb-tbody, table#leaderboard tbody');
    if(!tbody) return;
    tbody.innerHTML = Array.from({length:count||8}).map(()=>`
      <tr class="animate-pulse opacity-60">
        <td>â‹¯</td><td>Äang táº£iâ€¦</td><td>â‹¯</td><td>â‹¯</td><td>â‹¯</td>
      </tr>
    `).join('');
  }

  // expose on window so existing code can call
  window.__LB_CACHE__ = {
    readLbCache, writeLbCache, cacheIsFresh, renderLeaderboardRows, renderSkeleton
  };

  // Main show function using existing apiPost if present
  window.showLeaderboard = async function(scope, limit){
    scope = scope || 'daily';
    limit = limit || 50;

    const cached = readLbCache(scope);
    if(cached){ renderLeaderboardRows(cached.rows); }
    else { renderSkeleton(8); }

    // Avoid hammering API if a fresh cache exists (<60s)
    if(cacheIsFresh(scope, 60000)) return;

    try{
      if (typeof apiPost !== 'function') return; // safety
      const res = await apiPost('leaderboard', { scope, limit });
      const rows = (res && (res.rows || res.data || res.items)) || [];
      if(rows && rows.length){
        renderLeaderboardRows(rows);
        writeLbCache(scope, rows);
      }
    }catch(e){
      // keep cached UI silently
      console && console.debug && console.debug('leaderboard fetch failed, using cache', e);
    }
  };
})();

</script>

<script>
(function(){
  function bindTab(selector, scope){
    var el = document.querySelector(selector);
    if(!el) return;
    el.addEventListener('click', function(){ window.showLeaderboard(scope); });
  }
  // Common selectors (adjusted to what's likely in your UI)
  bindTab('#tab-daily', 'daily');
  bindTab('#tab-weekly', 'weekly');
  bindTab('#tab-alltime', 'all');
  // When opening the leaderboard modal/page, attempt default load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function(){ window.showLeaderboard('daily'); });
  } else {
    window.showLeaderboard('daily');
  }
})();
</script>

</body>
</html>
